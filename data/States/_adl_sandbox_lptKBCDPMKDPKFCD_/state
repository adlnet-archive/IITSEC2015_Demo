[{"children":{"Nc339b428":{"children":{"N2c2a998b":{"extends":"sphere2.vwf","methods":{"notifyPeers":{"body":"this.tickCount++;\n    if (this.tickCount == 10)\n    {\n\n        this.tickCount = 0;\n        var my_position = this.transformAPI.getWorldPosition();\n\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward, this.avoidDist ], this.avoidDist);\n    }","parameters":[]},"tick":{"body":"// The tick function is called 20 times every second.\n    // Write code here to animate over time\n   \n        this.notifyPeers();","parameters":[]}},"properties":{"DisplayName":"AvoidRadius","EditorData":{"avoid":{"displayname":"avoid radius","max":1000,"min":1,"property":"avoidDist","type":"slider"}},"___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Fri Nov 06 2015 16:04:03 GMT-0500 (Eastern Standard Time)","avoidDist":200,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"5beae96c","tickCount":0,"transform":[0.0124810002744198,0.717251002788544,-9.99999997475243e-7,0,-0.717253029346466,0.0124810002744198,0,0,-9.99999997475243e-7,0,0.717360019683838,0,3.30383706092834,-2.59943199157715,3.5651650428772,1],"type":"Primitive"},"random":{"c":1,"s0":0.065319,"s1":0.005573,"s2":0.870037},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"N2c2a998b"}},"extends":"asset.vwf","properties":{"DisplayName":"Chemical Tanker","___assetServerOriginalID":"N65b7e28d","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Wed Nov 04 2015 14:11:23 GMT-0500 (Eastern Standard Time)","materialDef":{"alpha":1,"ambient":{"b":0.616883,"g":0.616883,"r":0.616883},"blendMode":1,"color":{"a":1,"b":0.616883,"g":0.616883,"r":0.616883},"combine":0,"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/51c1a77e"}],"metal":false,"reflect":0.01,"shading":true,"shininess":0.000002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"95bc52f8","transform":[0.0242570005357265,-1.39497196674347,-0.0243510007858276,0,1.39378905296326,0.0242759995162487,0.000422000011894852,0,0,-0.0243539996445179,1.39518201351166,0,-0.457085996866226,0.426483005285263,-0.462936997413635,1]},"random":{"c":1,"s0":0.770068,"s1":0.372494,"s2":0.669335},"sequence":0,"source":"/sas/assets/b7747e55","type":"subDriver/threejs/asset/vnd.gltf+json","name":"Nc339b428"}},"extends":"box2.vwf","methods":{"activateState":{"body":"\n    var currentState = this.states[this.activeState];\n    if (currentState.transitions && currentState.transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        newState = this.states[newState];\n        if (!newState)\n        {\n            console.log('state does not exist');\n        }\n        if (newState.transitionFunc && this[newState.transitionFunc])\n        {\n            this[newState.transitionFunc]();\n        }\n\n    }\n    else\n    {\n        console.log('invalid transition');\n    }    \n","parameters":["newState"]},"buoyancy":{"body":"\n        var waterDepth = 20;\n    var hullThick = 2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 2;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n        //this.physicsAPI.addForceAtCenter(this.transformAPI.localToGlobal(0, 100, 0));\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 10;\n        vel[1] *= 1.0 - depth / 3;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }        \n","parameters":[]},"command":{"body":"\n    var command = args[0];\n    if (command == \"aheadFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadFull\";\n    }\n    if (command == \"backFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"backFull\";\n    }\n    if (command == \"aheadHalf\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadHalf\";\n    }\n    if (command == \"engineIdle\")\n    {\n        this.activateState('navigating');\n        this.engine = \"idle\";\n    }\n    if (command == \"hardRight\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardRight\";\n    }\n    if (command == \"hardLeft\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardLeft\";\n    }\n    if (command == \"rudderCenter\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"center\";\n    }    \n","parameters":["args"]},"hit":{"body":"if (force > 5) //cannot be hurt by 50 cal\n    {\n\n    this.children_by_name.Barry1.materialDef.layers[0].src = this.damageTexture;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-damaged\", this.DisplayName, \"TacticalActionOfficer\", null);\n    }\n    }","parameters":["pos","force"]},"movement":{"body":"var torque = [0, 0, 0];\n    var force = [0, 0, 0];\n    if (this.rudder == 'hardLeft')\n    {\n        torque[2] = .0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'hardRight')\n    {\n        torque[2] = -.0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'center')\n    {\n\n    }\n    if (this.engine == \"aheadFull\")\n    {\n        force[0] = 25 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"aheadHalf\")\n    {\n        force[0] = 12 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"idle\")\n    {\n\n    }\n    if (this.engine == 'backFull')\n    {\n        force[0] = -12 * this.physicsAPI.getMass();\n    }\n    torque[2] *= force[0];\n    force = this.transformAPI.localToGlobalRotation(force);\n    this.physicsAPI.addForceAtCenter(force);\n    this.physicsAPI.addTorque(torque);","parameters":[]},"tick":{"body":"\n    var state = this.states[this.activeState];\n    if (state)\n    {\n\n        if (state.movement)\n            this.movement();\n        if (state.buoyancy)\n            this.buoyancy();\n        if(state.updateFunc && this[state.updateFunc])\n            this[state.updateFunc]()\n        \n        \n    }    \n","parameters":[]}},"properties":{"DisplayName":"Chemical Tanker","EditorData":{"engine":{"displayname":"engine","labels":["Ahead Full","Ahead Half","Back","Idle"],"property":"engine","type":"choice","values":["aheadFull","aheadHalf","back","idle"]},"hullThick":{"displayname":"Hull Thickness","max":25,"min":0,"property":"hullThick","type":"slider"},"rudder":{"displayname":"rudder","labels":["Hard Right","Hard Left","center"],"property":"rudder","type":"choice","values":["hardRight","hardLeft","back"]},"state":{"displayname":"state","labels":["idle","navigating"],"property":"activeState","type":"choice","values":["idle","navigating"]}},"___physics_activation_state":4,"___physics_angular_velocity":[0.006768,0.002322,0.000003],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.000001,0,-0.000002],"___physics_mass":80051.2,"___physics_velocity_angular":[0.008379,-0.002339,0.000013],"___physics_velocity_linear":[0.000001,-0.000129,-0.00325],"___sourceAssetTimestamp":"Fri Nov 06 2015 15:59:41 GMT-0500 (Eastern Standard Time)","_length":230,"activeState":"navigating","counter":14602,"damageTexture":"/sas/assets/dde67e10","engine":"aheadHalf","height":10,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":0,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":true,"wireframe":false},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rudder":"back","sourceAssetId":"95bc52f8","states":{"idle":{"buoyancy":true,"movement":false,"transitionFunc":null,"transitions":["navigating"],"updateFunc":null},"navigating":{"buoyancy":true,"movement":true,"transitionFunc":null,"transitions":["idle"],"updateFunc":null}},"transform":[1,0,0,0,0,0.998847007751465,-0.0174349993467331,0,0,0.017433000728488,0.998847007751465,0,-128,-1441.75,23.25,1],"type":"Primitive","visible":false,"width":35,"worldPosition":[-128,-1441.75,23.25]},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N2d9ad8e1"},{"children":{"-sas-assets-0c42853d-N324f7728N1675d244":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n              this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);              \n","parameters":["pos"]},"tick":{"body":"\n                                                             // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                             \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem6","___assetServerOriginalID":"N1675d244","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-308,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,27.038556,14.754263,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728N1675d244"},"-sas-assets-0c42853d-N324f7728N2e89a982":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n                  this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);                  \n","parameters":["pos"]},"tick":{"body":"\n                                                                 // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                                 \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem11","___assetServerOriginalID":"N2e89a982","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-318,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,21.070783,9.816103,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728N2e89a982"},"-sas-assets-0c42853d-N324f7728N38b49f97":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n           this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);           \n","parameters":["pos"]},"tick":{"body":"\n                                                          // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                          \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem2","___assetServerOriginalID":"N38b49f97","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-304,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,29.768466,17.115659,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728N38b49f97"},"-sas-assets-0c42853d-N324f7728N47f111ed":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n                   this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);                   \n","parameters":["pos"]},"tick":{"body":"\n                                                                  // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                                  \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem12","___assetServerOriginalID":"N47f111ed","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-314,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,25.869434,13.748161,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728N47f111ed"},"-sas-assets-0c42853d-N324f7728N6ea9f140":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n            this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);            \n","parameters":["pos"]},"tick":{"body":"\n                                                           // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                           \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem3","___assetServerOriginalID":"N6ea9f140","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-316,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,26.033971,14.102132,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728N6ea9f140"},"-sas-assets-0c42853d-N324f7728N95a1561c":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n               this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);               \n","parameters":["pos"]},"tick":{"body":"\n                                                              // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                              \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem7","___assetServerOriginalID":"N95a1561c","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-312,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,21.892799,10.625923,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728N95a1561c"},"-sas-assets-0c42853d-N324f7728Na421bf57":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n                this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);                \n","parameters":["pos"]},"tick":{"body":"\n                                                               // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                               \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem9","___assetServerOriginalID":"Na421bf57","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-296,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,25.005879,12.908297,-0.000001,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728Na421bf57"},"-sas-assets-0c42853d-N324f7728Nb5bcb9f7":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n             this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);             \n","parameters":["pos"]},"tick":{"body":"\n                                                            // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                            \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem4","___assetServerOriginalID":"Nb5bcb9f7","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-298,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,23.208803,11.911276,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728Nb5bcb9f7"},"-sas-assets-0c42853d-N324f7728Nd132a72c":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n                 this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);                 \n","parameters":["pos"]},"tick":{"body":"\n                                                                // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                                \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem18","___assetServerOriginalID":"Nd132a72c","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-310,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,25.60729,14.053204,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728Nd132a72c"},"-sas-assets-0c42853d-N324f7728Ne5fd1e14":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n             this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);             \n","parameters":["pos"]},"tick":{"body":"\n                                                            // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                            \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem4","___assetServerOriginalID":"Ne5fd1e14","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-300,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,23.543348,12.070398,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728Ne5fd1e14"},"-sas-assets-0c42853d-N324f7728Nec7b6ac1":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n               this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);               \n","parameters":["pos"]},"tick":{"body":"\n                                                              // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                              \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem7","___assetServerOriginalID":"Nec7b6ac1","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-302,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,21.604657,10.372077,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728Nec7b6ac1"},"-sas-assets-0c42853d-N324f7728Nf765253e":{"extends":"SandboxParticleSystem.vwf","methods":{"start":{"body":"\n          this.transformAPI.setPosition(pos);\n    this.visible = true;\n    this.counter = 10;\n    var sound = Math.floor((Math.random() - .01) * 3);\n    if(sound > 0 && sound < 2)\n    this.audioAPI.playSound(this.soundFiles[sound], false, 30);          \n","parameters":["pos"]},"tick":{"body":"\n                                                         // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.visible = true;\n    if(this.counter < 0)\n    this.visible = false;\n    this.counter--;                                                         \n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem9","___assetServerOriginalID":"Nf765253e","additive":false,"alphaTest":0.5,"colorRange":[0,0,0,0],"counter":-306,"depthTest":false,"emitterPosition":[0,0,3],"emitterSize":[0.2,0.2,1],"emitterType":"box","endColor":[0.698039,0.97647,1,0.5],"endSize":1,"image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":20,"maxAcceleration":[0,0,-9.82],"maxLifeTime":1,"maxOrientation":13.2,"maxRate":0,"maxVelocity":[0,0,0],"minAcceleration":[0,0,-9.82],"minLifeTime":1,"minOrientation":-19.5,"minSpin":1.1,"minVelocity":[0,0,0],"owner":"Anonymous_zgviOjtXorD5eSi9AAAA","particleCount":50,"sizeRange":0,"solver":"AnalyticShader","soundFiles":["/sas/assets/2cb9fef9","/sas/assets/994ee0c8","/sas/assets/68b679a8"],"startColor":[1,1,1,1],"startSize":0.1,"textureTiles":4,"transform":[0.367231,0,0,0,0,0.367231,0,0,0,0,0.367231,0,28.753791,16.128884,0,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":414635,"s0":0.318485,"s1":0.128272,"s2":0.216222},"sequence":0,"name":"-sas-assets-0c42853d-N324f7728Nf765253e"}},"continues":"/sas/assets/0c42853d","extends":"plane2.vwf","methods":{"hit":{"body":"var pos = args[0];\n    if (!pos) return;\n    pos = this.transformAPI.globalToLocal(pos);\n    //this.children[this.splashCount].transformAPI.setPosition(pos);\n    this.children[this.splashCount].start(pos);\n    this.children[this.splashCount].audioAPI.playSound(\"/sas/assets/52144a97\",false,100,true);\n    this.splashCount++;\n\n    if (this.splashCount > this.children.length - 1)\n    {\n        \n        this.splashCount = 0;\n    }","parameters":["args"]},"splash":{"body":"\n\n","parameters":["pos"]}},"properties":{"":null,"DisplayName":"Ocean-Collision","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Mon Nov 09 2015 12:21:03 GMT-0500 (Eastern Standard Time)","_length":10000,"lsegs":30,"materialDef":{"alpha":0.993506,"ambient":{"b":0.658823,"g":0.541176,"r":0.490196},"blendMode":1,"color":{"a":0.993506,"b":0.658823,"g":0.541176,"r":0.490196},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":0.15,"mapInput":0,"mapTo":4,"offsetx":0,"offsety":0,"rot":0,"scalex":100,"scaley":100,"src":"../vwfDataManager.svc/texture?UID=waternormal.jpg"}],"metal":false,"reflect":1,"shadeless":false,"shading":true,"shadow":true,"shininess":1,"side":0,"specularColor":{"b":30.57735,"g":30.57735,"r":30.57735},"specularLevel":10,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":1,"sourceAssetId":"0c42853d","splashCount":10,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3692.5,-210.25,20,1],"type":"Primitive","visible":false,"width":10000,"worldPosition":[3692.5,-210.25,20],"wsegs":30},"random":{"c":1,"s0":0.703975,"s1":0.197294,"s2":0.396665},"sequence":0,"name":"N324f7728"},{"children":{"-sas-assets-874eb90b-N37ac1079N7711dbf9":{"children":{"-sas-assets-874eb90b-N37ac1079Ndd622fe7":{"extends":"asset.vwf","properties":{"DisplayName":"Arleigh_Burke_Railings","___assetServerOriginalID":"Ndd622fe7","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":0.58,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/58f95c66"}],"metal":false,"reflect":0,"shading":true,"shininess":0.000402,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"renderDepth":0,"transform":[0.00999800022691488,0,0,0,0,0.00999800022691488,0,0,0,0,0.00999800022691488,0,0,0,0,1],"type":"3DR Object"},"random":{"c":1,"s0":0.737384,"s1":0.892781,"s2":0.062031},"sequence":0,"source":"Arleigh_Burke_Railings","type":"link_existing/threejs","name":"-sas-assets-874eb90b-N37ac1079Ndd622fe7"},"-sas-assets-874eb90b-N37ac1079Necdbc16e":{"extends":"SandboxCamera.vwf","properties":{"DisplayName":"DeckCam","___assetServerOriginalID":"Necdbc16e","far":10000,"owner":"ADLteam","transform":[-0.00999999977648258,-0.00000799999997980194,-0.00000199999999495049,0,0.00000700000009601354,-0.00958400033414364,-0.00285899988375604,0,0,-0.00285899988375604,0.00958099961280823,0,0,1.54899799823761,0.563997983932495,1]},"random":{"c":1,"s0":0.041035,"s1":0.718352,"s2":0.528338},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"-sas-assets-874eb90b-N37ac1079Necdbc16e"}},"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(point, force);","parameters":["point","force"]}},"properties":{"DisplayName":"Barry1","___assetServerOriginalID":"N7711dbf9","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":0,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/f110f46d"}],"metal":false,"reflect":0,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[108,0,0,0,0,108,0,0,0,0,108,0,0,0,0,1],"type":"3DR Object","worldPosition":[35.9720230102539,18.4657554626465,20.4234828948975]},"random":{"c":1,"s0":0.529011,"s1":0.196021,"s2":0.923128},"sequence":0,"source":"/sas/assets/b318ad31","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-874eb90b-N37ac1079N7711dbf9"},"N81a0a4b8":{"children":{"-sas-assets-06f4f9c2-N81a0a4b8N95451019":{"children":{"-sas-assets-06f4f9c2-N81a0a4b8N43bdfb3e":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.021857,-0.000001,-0.99076,0,-0.000001,0.990999,0,0,0.990759,-0.000001,0.021857,0,-0.299817,-0.009032,0.050076,1]},"random":{"c":1,"s0":0.469421,"s1":0.536146,"s2":0.120138},"sequence":0,"name":"-sas-assets-06f4f9c2-N81a0a4b8N43bdfb3e"},"-sas-assets-06f4f9c2-N81a0a4b8Nc63b7c4e":{"children":{"-sas-assets-06f4f9c2-N81a0a4b8N1c1b0e9":{"events":{"pointerClick":{"body":"this.broadcast(\"TAOCommand50Cal\", [\"toggleControl\"], 0);","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Button1","___assetServerOriginalID":"N1c1b0e9","height":38,"left":0,"owner":"ADLteam","text":"Take Control","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3,90,0,1],"visible":false,"visibleToAncestor":true,"width":100},"random":{"c":1,"s0":0.896834,"s1":0.558635,"s2":0.598735},"sequence":0,"name":"-sas-assets-06f4f9c2-N81a0a4b8N1c1b0e9"},"-sas-assets-06f4f9c2-N81a0a4b8N97599420":{"extends":"sphere2.vwf","properties":{"DisplayName":"sphere1","___assetServerOriginalID":"N97599420","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-0.994077980518341,-0.139039993286133,0.0222169999033213,0,0.139707997441292,-0.993709027767181,0.032260000705719,0,0.0175039991736412,0.0349979996681213,1.0022360086441,0,0,0,0,1],"type":"Primitive","visible":false},"random":{"c":1,"s0":0.149597,"s1":0.002604,"s2":0.888775},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-N81a0a4b8N97599420"},"-sas-assets-06f4f9c2-N81a0a4b8Na1019187":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"CommandDisplayLabel","___assetServerOriginalID":"Na1019187","font_size":24,"height":51,"left":0,"owner":"ADLteam","style":{"background-color":"red","border":"outset white 3px","font-weight":"bold","vertical-align":"middle"},"text":"Command","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,70,12,0,1],"visible":false,"visibleToAncestor":true,"width":294},"random":{"c":1,"s0":0.21545,"s1":0.828244,"s2":0.371171},"sequence":0,"name":"-sas-assets-06f4f9c2-N81a0a4b8Na1019187"}},"extends":"SandboxCamera.vwf","methods":{"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                      // The tick function is called 20 times every second.\n                  // Write code here to animate over time\n                  this.fov += (this.fovGoal - this.fov) / 5;                        \n\n\n\n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"50 Cal Camera","___assetServerOriginalID":"Nc63b7c4e","far":10000,"fov":59.999999,"fovGoal":60,"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[0,0.999997973442078,0,0,0,-9.99999997475243e-7,1,0,1,-9.99999997475243e-7,-9.99999997475243e-7,0,0.5,0,-2.00000095367432,1]},"random":{"c":1,"s0":0.881991,"s1":0.977037,"s2":0.315142},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-N81a0a4b8Nc63b7c4e"},"-sas-assets-06f4f9c2-N81a0a4b8Nf113456":{"extends":"asset.vwf","properties":{"___assetServerOriginalID":"Nf113456","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 14:15:57 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/96493a7c"}],"metal":false,"reflect":0,"shadeless":false,"shading":true,"shadow":true,"shininess":0,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.0174690000712872,0,-1.00084900856018,0,0,1.00100004673004,0,0,1.00084602832794,0,0.0174690000712872,0,-0.300999999046326,-0.00999999977648258,0.0500000007450581,1]},"random":{"c":1,"s0":0.096464,"s1":0.534941,"s2":0.233227},"sequence":0,"source":"/sas/assets/744f77e3","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-06f4f9c2-N81a0a4b8Nf113456"},"-sas-assets-06f4f9c2-N81a0a4b8Nf40d8dc8":{"extends":"box2.vwf","properties":{"DisplayName":"Barrel","___assetServerOriginalID":"Nf40d8dc8","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.2,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/96493a7c"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[1,0,-9.99999997475243e-7,0,0,1,0,0,0,0,1,0,0,0,0.75,1],"type":"Primitive","visible":false,"width":0.28,"worldTransform":[0.00514142261818051,-0.119343765079975,0.992837011814117,0,-0.999072909355164,-0.0430712178349495,1.44613991892584e-7,0,0.0427648834884167,-0.99191552400589,-0.119450770318508,0,0.0320940017700195,8.50610733032227,31.9104804992676,1]},"random":{"c":1,"s0":0.809604,"s1":0.25392,"s2":0.654554},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-N81a0a4b8Nf40d8dc8"}},"extends":"box2.vwf","properties":{"DisplayName":"50CalPivot","___assetServerOriginalID":"N95451019","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.33,"height":0.39,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/96493a7c"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":0,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[-0.119453996419907,0,0.992838025093079,0,0,1,0,0,-0.992839992046356,0,-0.119453996419907,0,-0.00000199999999495049,-9.99999997475243e-7,0.749997973442078,1],"type":"Primitive","visible":false,"width":0.33},"random":{"c":1,"s0":0.570447,"s1":0.810183,"s2":0.997119},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-N81a0a4b8N95451019"}},"continues":"/sas/assets/06f4f9c2","extends":"box2.vwf","methods":{"TAOCommand50Cal":{"body":"var command = args[0];\n    var label = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].children_by_name.CommandDisplayLabel;\n\n    \n    if (command === \"toggleControl\")\n    {\n        this.toggleControl();\n        return;\n    }\n    \n    label.text = command;\n    label.visible = true;\n    \n    if (command == \"50 Cal Engage\")\n    {\n        this.activateState(\"targeting\");\n    }\n    if (command == \"50 Cal disengage\")\n    {\n        this.activateState(\"idle\");\n    }","parameters":["args"]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    this.keysDown.push(e.key.char);\n    if (e.key.char == ' ')\n    {\n        //do xapi\n    }","parameters":["e"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    this.keysDown.splice(this.keysDown.indexOf(' '), 1)\n    if (e.key.char == ' ' && (this.activeState != 'reloading'))\n    {\n        this.playSound(\"/sas/assets/8eb34370\", false, 10);\n        this.xAPISend([]);\n    }","parameters":["e"]},"_pointerDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = true;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].fovGoal = 10;\n    }","parameters":["e","d"]},"_pointerMove":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (!this.mouseDown) return;\n    var relx = e.position[0] - this.lastx;\n    var rely = e.position[1] - this.lasty;\n\n    this.lastx = e.position[0];\n    this.lasty = e.position[1];\n    this.transformAPI.rotateZ(-relx * 160);\n    this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(rely * 60);","parameters":["e","d"]},"_pointerUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = false;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].fovGoal = 60;\n    }","parameters":["e","d"]},"activateState":{"body":"if (this.states[newState] && this.states[newState].transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        console.log(\"transition to \" + newState);\n    }\n    else\n    {\n        console.log(\"invalid transition\");\n    }","parameters":["newState"]},"collectXAPIData":{"body":"//1 - Burst Statement\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender && this.userControlled())\n    {\n        //2 - Info from bullets - still inside the if sender and user control\n        if (!this.started)\n        {\n            // console.log(\"Starting Burst\");\n            this.startT = this.Scene.time;\n            this.hits = [];\n            this.started = true;\n            this.roundsFired = 0;\n            this.numHits = 0;\n            this.burstCount++; //make this a property\n        }\n        this.roundsFired++;\n        // console.error(hit);\n        if (hit && hit.node /*we have hit something significant*/ )\n        {\n           this.verifyHit(hit.node.DisplayName);\n        }\n        // console.error(this.hits);\n        // console.log(this.roundsFired, this.numHits);\n    }","parameters":["hit"]},"engaging":{"body":"this.tracking();\n    this.playBurst();\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target || target.activeState == \"defeated\")\n    {\n        this.stopBurst();\n        this.audioAPI.stopSound(this.fireSound);\n        this.activateState(\"targeting\");\n        return;\n    }\n\n    if (this.Ammo > 0)\n    {\n        this.shake();\n\n        if (this.firecounter >= 2)\n        {\n            this.firecounter = 0;\n            this.fire();\n        }\n    }","parameters":[]},"fire":{"body":"var origin = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.getWorldPosition();\n    var dir = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.localToGlobalRotation([0, 0, 1]);\n    var shake = [this.random() / this.accuracy - 1 / this.accuracy, this.random() / this.accuracy - 1 / this.accuracy, this.random() / this.accuracy - 1 / this.accuracy];\n    if (!this.userControlled())\n    {\n        shake = MATH.scaleVec3(shake, 1.5);\n    }\n\n    dir = Vec3.normalize(Vec3.add(shake, dir, []), []);\n    var hit = this.Scene.traceAPI.rayCast(origin, dir,\n    {\n        ignore: [findviewnode(this.id)]\n    });\n\n    if (hit && hit.node)\n    {\n        // if (Engine.ancestors(hit.node.id).indexOf(this.targetID) != -1)\n        {\n\n            if (hit.node.hit)\n                hit.node.hit([hit.point, 5]);\n\n        }\n        if (!this.userControlled())\n        {\n            // this.stopBurst();\n\n            //    this.activateState(\"targeting\");\n        }\n    }\n\n    this.collectXAPIData(hit);\n    this.Ammo -= 2;\n    console.log(this.Ammo);\n    if (this.Ammo <= 0)\n    {\n        this.startReloading();\n    }","parameters":[]},"firing":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                       return (this.keysDown.indexOf(' ') !== -1)                         \n\n\n\n\n\n\n\n","parameters":[]},"playBurst":{"body":"var sound = vwf.callMethod(this.id, \"getSound\", [this.fireSound]);\n    if (sound && !sound.isPlaying())\n    {\n        sound.play();\n    }\n    else if (!sound)\n    {\n        this.audioAPI.playSound(this.fireSound, true, 200);\n    }","parameters":[]},"ready":{"body":"this.Scene.unbind(\"pointerMove\", this._pv,this);\n    this.Scene.unbind(\"pointerDown\", this._pd,this);\n    this.Scene.unbind(\"pointerUp\", this._pu,this);\n\n    this.Scene.unbind(\"keyDown\", this._kd,this);\n    this.Scene.unbind(\"keyUp\", this._ku,this);\n    var self = this;\n    this._pv = function(e, d)\n    {\n        self._pointerMove(e, d);\n    }\n    this._pd = function(e, d)\n    {\n        self._pointerDown(e, d);\n    }\n    this._pu = function(e, d)\n    {\n        self._pointerUp(e, d);\n    }\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d);\n    }\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d);\n    }\n    this.Scene.bind(\"pointerMove\", this._pv,this);\n    this.Scene.bind(\"pointerDown\", this._pd,this);\n    this.Scene.bind(\"pointerUp\", this._pu,this);\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"reloading":{"body":"if (this.firecounter == 0)\n    {\n\n        console.log('reloading, so stopping sound and sending xapi statement');\n        this.Ammo = 1000;\n        // this.xAPISend();\n        this.state = 'ready';\n\n        this.activateState('targeting');\n    }","parameters":[]},"returnFromShakeOffsets":{"body":"this.userControlCounter--;\n    var pos = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].transformAPI.getPosition();\n    var goal = [0.1, -0.01, -2];\n    var move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);\n\n    pos = this.children_by_name[\"50CalPivot\"].transformAPI.getPosition();\n    goal = [0.0, 0, 0.75];\n    move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"50CalPivot\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);","parameters":[]},"shake":{"body":"var shake = [this.random() / 10 - .05, this.random() / 10 - .05, this.random() / 10 - .05]\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].transformAPI.move(shake);\n        shake = [this.random() / 10 - .05, this.random() / 10 - .05, this.random() / 10 - .05]\n        this.children_by_name[\"50CalPivot\"].transformAPI.move(shake);","parameters":[]},"startReloading":{"body":"this.stopBurst();\n    this.audioAPI.playSound(this.reloadSound, false, 100);\n    this.activateState(\"reloading\");\n    this.firecounter = -130;","parameters":[]},"stopBurst":{"body":"this.audioAPI.stopSound(this.fireSound);","parameters":[]},"targeting":{"body":"var near = Infinity;\n    var target = null;\n    var thispos = this.transformAPI.getPosition();\n    var list = [];\n    for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var child = this.Scene.children[i];\n        if (child.id == this.id) continue;\n        if (child.parent.id == this.id) continue;\n        if (!child.transformAPI) continue;\n\n        var childpos = child.transformAPI.getPosition();\n        var dist = MATH.distanceVec3(thispos, childpos);\n        if (dist < (this.maxRange || 100) && child.hostile && child.activeState !== 'disabled')\n        {\n            list.push(\n            {\n                near: dist,\n                target: child,\n            });\n        }\n    }\n\n    list.sort(function(a, b)\n    {\n        return a.near - b.near;\n    });\n\n    for (var i = 0; i < list.length; i++)\n    {\n        target = list[i].target;\n        if (target)\n        {\n            var origin = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.getWorldPosition();\n            var b = Vec3.subtract(target.transformAPI.getWorldPosition(), origin, []);\n            var dir = Vec3.normalize(b, []);\n\n            var hit = this.Scene.traceAPI.rayCast(origin, dir,\n            {\n                ignore: [findviewnode(this.id), findviewnode(target.id)]\n            });\n            if (hit && hit.distance < Vec3.distance(target.transformAPI.getWorldPosition(), origin))\n                target = null; //something is between us and the target\n        }\n\n        if (target)\n        {\n            this.targetID = target.id;\n            this.activateState(\"tracking\");\n            return;\n        }\n    }","parameters":[]},"tick":{"body":"this.returnFromShakeOffsets();\n    this.firecounter++;\n\n    if (!this.userControlled())\n    {\n        var state = this.states[this.activeState];\n        if (state)\n        {\n            if (state.updateFunc && this[state.updateFunc])\n                this[state.updateFunc]();\n        }\n\n    }\n    else\n    {\n\n        if (this.firing() && this.Ammo > 0)\n        {\n            this.playBurst();\n            this.shake();\n\n            if (this.firecounter >= 2)\n            {\n                this.firecounter = 0;\n                this.fire();\n            }\n\n        }\n        else\n        {\n            this.stopBurst();\n            if (this.Ammo <= 0)\n                this.reloading();\n        }\n    }","parameters":[]},"toggleControl":{"body":"if (disable) this.isUserControlled = false;\n    else this.isUserControlled = !this.isUserControlled;\n\n    var button = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].children_by_name[\"Button1\"];\n    button.text = this.isUserControlled ? \"Enable AI\" : \"Take Control\";","parameters":["disable"]},"tracking":{"body":"console.log(\"tracking\");\n    if (!this.targetID)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n\n    var thispos = this.transformAPI.getPosition();\n\n    var thisPivotpos = this.children[0].transformAPI.getWorldPosition();\n    thisPivotpos = this.transformAPI.globalToLocal(thisPivotpos);\n    var targetpos = target.transformAPI.getWorldPosition();\n\n    if (this.parent.transformAPI)\n    {\n        targetpos = this.parent.transformAPI.globalToLocal(targetpos);\n    }\n    if (!this.lastTargetPos)\n        this.lastTargetPos = targetpos;\n\n    var targetSpeed = MATH.subVec3(targetpos, this.lastTargetPos);\n    // targetSpeed = MATH.scaleVec3(targetSpeed, 20); //now in m/s\n\n    var vec = MATH.subVec3(thispos, targetpos);\n    var dist = MATH.lengthVec3(vec);\n    //vec = MATH.subVec3(thispos, [0, 0, 0]);\n    this.fuse = MATH.lengthVec3(vec) / 1000; //the 50 cal does not need to lead the target nearly so much\n    vec = MATH.toUnitVec3(vec);\n    var targetangle = Math.atan2(vec[0], vec[1]);\n    var thisvec = this.transformAPI.localToGlobalRotation(1, 0, vec[2]);\n    thisvec = MATH.toUnitVec3(thisvec);\n    if (this.parent.transformAPI)\n    {\n        thisvec = this.parent.transformAPI.globalToLocalRotation(thisvec);\n    }\n    var thisangle = Math.atan2(thisvec[0], thisvec[1]);\n    var angle = targetangle - thisangle;\n\n    if (angle < -Math.PI)\n        angle *= -1;\n    else if (angle > Math.PI)\n    {\n        angle *= -1;\n    }\n    angle *= 10;\n    if (angle > 1) angle = 1;\n    if (angle < -1) angle = -1;\n    this.transformAPI.rotateZ(-angle * 1.7);\n\n    var upvec = this.children_by_name[\"50CalPivot\"].transformAPI.localToGlobalRotation(1, 0, 0);\n\n    if (this.parent.transformAPI)\n    {\n        upvec = this.parent.transformAPI.globalToLocalRotation(upvec);\n    }\n\n    var targetvec = MATH.subVec3(thispos, targetpos);\n    targetvec = MATH.toUnitVec3(targetvec);\n\n    var dot = MATH.dotVec3(upvec, targetvec)\n    if (dot > .001)\n    {\n        this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(Math.min(-0.5, -dot));\n    }\n    if (dot < -.001)\n    {\n        this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(Math.max(0.5, -dot));\n    }\n\n    if (Math.abs(angle) < .06 && Math.abs(dot) < .02)\n    {\n        this.activateState(\"engaging\");\n    }\n    this.lastTargetPos = targetpos;","parameters":[]},"userControlled":{"body":"var thisCam = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].id;\n    var isUserControlled = (this.userControlCounter > 0) && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0;\n\n   \n\n    return isUserControlled;","parameters":[]},"verifyCamera":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n                  var thisCam = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].id;\n                  if (!cam || cam.id != thisCam) return false;\n                  return true;  \n\n\n\n\n\n\n\n","parameters":[]},"verifyHit":{"body":"console.log(\"verifyHit method\");\n\n    // console.error('We have hit', hit);\n    if (name != \"Ocean-Collision\" && name != \"Terrain\")\n    {\n        this.numHits++;\n        var newObj = true;\n        for (var i in this.hits)\n        {\n            if (this.hits[i] === name)\n                newObj = false;\n        }\n        if (newObj)\n            this.hits.push(name); //or hit.node, or hit.node.DisplayName\n    }","parameters":["name"]},"xAPISend":{"body":"// console.log(\"Ending burst and sending xapi statement\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        this.started = false;\n        var dur = this.Scene.time - this.startT;\n\n        //3 - build objects for statement\n        var result = {\n            score:\n            {\n                max: this.roundsFired, // || 140,\n                raw: this.numHits, // || 45,\n                min: 0,\n                scaled: this.numHits / this.roundsFired, // || 0.321 //remove or 0.321 when in place\n            },\n            success: (this.hits.length > 0),\n            duration: \"PT\" + Math.floor(dur * 1000) / 1000 + \"S\", //a real end - start number of the burst\n            response: \"scaled is the hit/fired ratio\"\n        };\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n            \"https://sandbox.adlnet.gov/context/extensions/objectHit\": this.hits.toString() || \"broadside of barn\", //hit.node.DisplayName/hit.node.id\n            \"https://sandbox.adlnet.gov/context/extensions/userControlled\": \"\" + (this.isUserControlled || true),\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.targetID || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/shipStatus\": this.Scene.children_by_name[\"DDG51\"].engine || \"status error\",\n        };\n        // console.error(result);\n        var burstObject = {\n            id: sender.baseURL + \"objects/\" + (encodeURI(\"burst\" + (this.burstCount || 0))),\n            definition:\n            {\n                name:\n                {\n                    \"en-US\": encodeURI(\"burst\" + (this.burstCount || 0)),\n                },\n                type: sender.baseURL + \"activity/types/50CalBurst\",\n            },\n        };\n\n        //4 - Send it - inside if(ended),  inside if(sender)\n        sender.xAPISend(\"fired\", burstObject, \"Small Craft Action Team\", result, conExt);\n    } //if(sender)","parameters":["hits"]}},"properties":{"Ammo":390,"DisplayName":"50CalBase6g2","EditorData":{"accuracy":{"displayname":"Accuracy","max":100,"min":0,"property":"accuracy","type":"slider"},"aiState":{"displayname":"AI Behavior","labels":["attack","wait"],"property":"activeState","type":"choice","values":["targeting","idle"]},"ammo":{"displayname":"Ammo","max":2500,"min":0,"property":"Ammo","type":"slider"}},"EditorDate":"","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Nov 24 2015 13:28:28 GMT-0500 (Eastern Standard Time)","_length":0.23,"accuracy":24,"activeState":"idle","burstCount":0,"controllingCamera":"SandboxCamera-vwf-sas-assets-06f4f9c2-N81a0a4b8Nc63b7c4e","fireSound":"/sas/assets/bdd66107","firecounter":1,"fuse":0,"hasSentStatement":false,"height":1.16,"isUserControlled":false,"keysDown":[],"lastTargetPos":null,"lastx":0.613684,"lasty":0.382741,"materialDef":{"alpha":0.993506,"ambient":{"b":0.51948,"g":0.51948,"r":0.51948},"blendMode":1,"color":{"a":0.993506,"b":0.51948,"g":0.51948,"r":0.51948},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"maxRange":400,"mouseDown":false,"owner":"ADLteam","playFireSound":"","reloadSound":"/sas/assets/ee04dc80","sourceAssetId":"06f4f9c2","started":false,"state":"ready","states":{"engaging":{"transitions":["tracking","idle","targeting"],"updateFunc":"engaging"},"idle":{"transitions":["targeting","idle"],"updateFunc":null},"reloading":{"transitions":["engaging","idle","targeting"],"updateFunc":"reloading"},"targeting":{"transitions":["tracking","idle","engaging"],"updateFunc":"targeting"},"tracking":{"transitions":["targeting","idle","engaging"],"updateFunc":"tracking"}},"targetID":null,"tracerDef":{"extends":"sphere2.vwf","methods":{"tick":{"body":" // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.life++;\n    if(this.life > 20)\n         vwf.deleteNode(this.id); ","parameters":[]}},"properties":{"DisplayName":"sphere1","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"isSelectable":false,"life":0,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"Anonymous_wpez3LO-WphZ6WWjAAAA","radius":0.2,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-13.75,-0.25,0,1],"type":"Primitive","visible":true},"random":{"c":1,"s0":0.206418,"s1":0.937666,"s2":0.393718},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs"},"transform":[-0.0430749990046024,0.998974025249481,-0.0138839995488524,0,-0.999072015285492,-0.0430979989469051,-0.00134700001217425,0,-0.00194400001782924,0.0138100003823638,0.999902009963989,0,-35.9929580688477,-9.06641674041748,10.8828916549683,1],"type":"Primitive","userControlCounter":0,"visible":true,"width":0.14},"random":{"c":1035752,"s0":0.388171,"s1":0.468831,"s2":0.595018},"sequence":0,"name":"N81a0a4b8"},"N8ffd1eec":{"children":{"-sas-assets-61c77daf-N8ffd1eecN24419d25":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-0.425419,1.528019,-0.07872,1]},"random":{"c":1,"s0":0.83592,"s1":0.643901,"s2":0.15082},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecN24419d25"},"-sas-assets-61c77daf-N8ffd1eecNa138c25e":{"children":{"-sas-assets-61c77daf-N8ffd1eecN2b97c1a":{"children":{"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aN2663ae91":{"events":{"pointerClick":{"body":"this.parent.radarRange = this.range;","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Far Range","___assetServerOriginalID":"N2663ae91","height":23,"left":0,"owner":"ADLteam","range":5500,"text":"Far","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,15,0,1000,1],"visible":true,"width":43},"random":{"c":1,"s0":0.737827,"s1":0.108029,"s2":0.486122},"sequence":0,"name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aN2663ae91"},"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aN2ca58639":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"scale","___assetServerOriginalID":"N2ca58639","font_color":[0.254901,0.741176,0.717647],"font_size":15,"height":19,"left":0,"owner":"ADLteam","style":{"font-family":"sans-serif"},"text":"250m","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,2.604,91.667999,1,1],"visible":true,"width":54},"random":{"c":1,"s0":0.338156,"s1":0.713276,"s2":0.31637},"sequence":0,"name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aN2ca58639"},"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aN8808de2a":{"extends":"http://vwf.example.com/html.vwf","properties":{"DisplayName":"bgImage","___assetServerOriginalID":"N8808de2a","__innerHTML":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!-- Created with Inkscape (http://www.inkscape.org/) -->\n\n<svg\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n   xmlns:cc=\"http://creativecommons.org/ns#\"\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\"\n   xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\"\n   width=\"600\"\n   height=\"600\"\n   viewBox=\"0 0 600 600\"\n   id=\"svg2\"\n   version=\"1.1\"\n   inkscape:version=\"0.91 r13725\"\n   sodipodi:docname=\"radar.svg\"\n   inkscape:export-filename=\"/home/svergenz/Projects/Sandbox/IITSEC2015_Demo/data/DataFiles/radar.png\"\n   inkscape:export-xdpi=\"90\"\n   inkscape:export-ydpi=\"90\">\n  <defs\n     id=\"defs4\">\n    <marker\n       inkscape:stockid=\"DotM\"\n       orient=\"auto\"\n       refY=\"0.0\"\n       refX=\"0.0\"\n       id=\"DotM\"\n       style=\"overflow:visible\"\n       inkscape:isstock=\"true\">\n      <path\n         id=\"path4426\"\n         d=\"M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z \"\n         style=\"fill-rule:evenodd;stroke:#3ea254;stroke-width:1pt;stroke-opacity:1;fill:#3ea254;fill-opacity:1\"\n         transform=\"scale(0.4) translate(7.4, 1)\" />\n    </marker>\n    <marker\n       inkscape:stockid=\"StopL\"\n       orient=\"auto\"\n       refY=\"0.0\"\n       refX=\"0.0\"\n       id=\"marker4475\"\n       style=\"overflow:visible\"\n       inkscape:isstock=\"true\">\n      <path\n         id=\"path4477\"\n         d=\"M 0.0,5.65 L 0.0,-5.65\"\n         style=\"fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#41bdb6;stroke-width:1pt;stroke-opacity:1\"\n         transform=\"scale(0.8)\" />\n    </marker>\n    <marker\n       inkscape:stockid=\"StopL\"\n       orient=\"auto\"\n       refY=\"0.0\"\n       refX=\"0.0\"\n       id=\"StopL\"\n       style=\"overflow:visible\"\n       inkscape:isstock=\"true\">\n      <path\n         id=\"path4339\"\n         d=\"M 0.0,5.65 L 0.0,-5.65\"\n         style=\"fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#41bdb6;stroke-width:1pt;stroke-opacity:1\"\n         transform=\"scale(0.8)\" />\n    </marker>\n    <marker\n       style=\"overflow:visible\"\n       id=\"DistanceEnd\"\n       refX=\"0.0\"\n       refY=\"0.0\"\n       orient=\"auto\"\n       inkscape:stockid=\"DistanceEnd\"\n       inkscape:isstock=\"true\">\n      <g\n         id=\"g2301\"\n         style=\"stroke:#000000;stroke-opacity:1;fill:#000000;fill-opacity:1\">\n        <path\n           style=\"fill:#000000;stroke:#000000;stroke-width:1.15;stroke-linecap:square;stroke-opacity:1;fill-opacity:1\"\n           d=\"M 0,0 L -2,0\"\n           id=\"path2316\" />\n        <path\n           style=\"fill:#000000;fill-rule:evenodd;stroke:#000000;stroke-opacity:1;fill-opacity:1\"\n           d=\"M 0,0 L -13,4 L -9,0 -13,-4 L 0,0 z \"\n           id=\"path2312\" />\n        <path\n           style=\"fill:#000000;stroke:#000000;stroke-width:1;stroke-linecap:square;stroke-opacity:1;fill-opacity:1\"\n           d=\"M 0,-4 L 0,40\"\n           id=\"path2314\" />\n      </g>\n    </marker>\n    <marker\n       inkscape:stockid=\"StopL\"\n       orient=\"auto\"\n       refY=\"0.0\"\n       refX=\"0.0\"\n       id=\"marker9041\"\n       style=\"overflow:visible\"\n       inkscape:isstock=\"true\">\n      <path\n         id=\"path8954\"\n         d=\"M 0.0,5.65 L 0.0,-5.65\"\n         style=\"fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#41bdb6;stroke-width:1pt;stroke-opacity:1\"\n         transform=\"scale(0.8)\" />\n    </marker>\n    <marker\n       inkscape:isstock=\"true\"\n       style=\"overflow:visible\"\n       id=\"marker6226\"\n       refX=\"0.0\"\n       refY=\"0.0\"\n       orient=\"auto\"\n       inkscape:stockid=\"StopL\">\n      <path\n         transform=\"scale(0.8)\"\n         style=\"fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#308b86;stroke-width:1pt;stroke-opacity:1\"\n         d=\"M 0.0,5.65 L 0.0,-5.65\"\n         id=\"path6228\" />\n    </marker>\n    <marker\n       inkscape:stockid=\"EmptyTriangleOutL\"\n       orient=\"auto\"\n       refY=\"0\"\n       refX=\"0\"\n       id=\"EmptyTriangleOutL\"\n       style=\"overflow:visible\"\n       inkscape:isstock=\"true\">\n      <path\n         id=\"path4327\"\n         d=\"m 5.77,0 -8.65,5 0,-10 8.65,5 z\"\n         style=\"fill:#ffffff;fill-rule:evenodd;stroke:#39823b;stroke-width:1pt;stroke-opacity:1\"\n         transform=\"matrix(0.8,0,0,0.8,-4.8,0)\"\n         inkscape:connector-curvature=\"0\" />\n    </marker>\n  </defs>\n  <sodipodi:namedview\n     id=\"base\"\n     pagecolor=\"#282b2d\"\n     bordercolor=\"#666666\"\n     borderopacity=\"1.0\"\n     inkscape:pageopacity=\"1\"\n     inkscape:pageshadow=\"2\"\n     inkscape:zoom=\"1\"\n     inkscape:cx=\"19.08101\"\n     inkscape:cy=\"285.48146\"\n     inkscape:document-units=\"px\"\n     inkscape:current-layer=\"svg2\"\n     showgrid=\"false\"\n     units=\"px\"\n     inkscape:showpageshadow=\"true\"\n     inkscape:window-width=\"1620\"\n     inkscape:window-height=\"1021\"\n     inkscape:window-x=\"60\"\n     inkscape:window-y=\"0\"\n     inkscape:window-maximized=\"1\" />\n  <metadata\n     id=\"metadata7\">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about=\"\">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label=\"Layer 1\"\n     inkscape:groupmode=\"layer\"\n     id=\"layer1\"\n     transform=\"translate(0,-452.36216)\"\n     style=\"fill-opacity:1\" />\n  <circle\n     style=\"fill:#000000;fill-opacity:1;stroke:#3ea254;stroke-width:1.00000002;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"3000m\"\n     cx=\"300\"\n     cy=\"300\"\n     r=\"275\" />\n  <circle\n     style=\"fill:none;fill-opacity:1;stroke:#3ea254;stroke-width:1.00000002;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"2500m\"\n     cx=\"299.99951\"\n     cy=\"300.00049\"\n     r=\"229.16632\" />\n  <ellipse\n     style=\"fill:none;fill-opacity:1;stroke:#3ea254;stroke-width:1.00000002;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"2000m\"\n     cx=\"300\"\n     cy=\"300\"\n     rx=\"183.33287\"\n     ry=\"183.33289\" />\n  <circle\n     style=\"fill:none;fill-opacity:1;stroke:#3ea254;stroke-width:1.00000002;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"1500m\"\n     cx=\"300\"\n     cy=\"300\"\n     r=\"137.49908\" />\n  <circle\n     style=\"fill:none;fill-opacity:1;stroke:#3ea254;stroke-width:1.00000002;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"1000m\"\n     cx=\"300\"\n     cy=\"300\"\n     r=\"91.664841\" />\n  <ellipse\n     style=\"fill:none;fill-opacity:1;stroke:#3ea254;stroke-width:1.00000002;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"500m\"\n     cx=\"300\"\n     cy=\"300\"\n     rx=\"45.834236\"\n     ry=\"45.834232\" />\n  <path\n     style=\"fill:none;fill-rule:evenodd;stroke:#3ea254;stroke-width:1;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;opacity:1;marker-start:url(#DotM)\"\n     d=\"M 300,300 300,25\"\n     id=\"sweepline\"\n     inkscape:connector-curvature=\"0\" />\n  <circle\n     style=\"fill:none;fill-opacity:1;stroke:#41bdb6;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:1, 3.81700000000000017;stroke-dashoffset:0;stroke-opacity:1\"\n     id=\"tickMinor\"\n     cx=\"300\"\n     cy=\"300\"\n     r=\"276\" />\n  <circle\n     r=\"277\"\n     cy=\"300\"\n     cx=\"300\"\n     id=\"tickMajor\"\n     style=\"fill:none;fill-opacity:1;stroke:#41bdb6;stroke-width:5;stroke-miterlimit:4;stroke-dasharray:1, 23.17200000000000060;stroke-dashoffset:0;stroke-opacity:1\" />\n  <g\n     style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\"\n     id=\"text6300\">\n    <path\n       d=\"m 292.81676,8.7872401 q -0.95185,0.023712 -1.41047,0.9753705 -0.45267,0.9454044 -0.40585,2.8247044 0.0467,1.873198 0.546,2.800992 0.50528,0.92154 1.45713,0.897827 0.95796,-0.02386 1.41063,-0.969269 0.45862,-0.951658 0.41195,-2.824856 -0.0468,-1.8793 -0.5521,-2.8008397 -0.49933,-0.9277936 -1.45729,-0.9039292 z m -0.0243,-0.9762596 q 1.53151,-0.038153 2.36717,1.1560058 0.84162,1.1879047 0.89907,3.4943187 0.0573,2.300311 -0.72396,3.534751 -0.77532,1.228185 -2.30683,1.266338 -1.5315,0.03815 -2.37311,-1.149752 -0.83567,-1.194159 -0.89297,-3.494471 -0.0575,-2.306413 0.71786,-3.5345986 0.78127,-1.2344392 2.31277,-1.2725919 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4171\" />\n    <path\n       d=\"m 301.00489,8.6963087 q -0.95214,-0.00264 -1.43692,0.9359571 -0.47867,0.9325132 -0.48389,2.8123882 -0.005,1.873772 0.46827,2.815032 0.47958,0.935172 1.43173,0.937815 0.95824,0.0027 1.43691,-0.929854 0.48478,-0.9386 0.48998,-2.812372 0.005,-1.879875 -0.47436,-2.8150478 -0.47347,-0.941259 -1.43172,-0.9439185 z m 0.003,-0.9765587 q 1.53198,0.00425 2.33427,1.2210826 0.80841,1.2107444 0.80201,3.5178644 -0.006,2.301017 -0.82152,3.513359 -0.80902,1.206255 -2.34099,1.202003 -1.53198,-0.0043 -2.34039,-1.214996 -0.80229,-1.216831 -0.7959,-3.517847 0.006,-2.30712 0.81541,-3.5133757 0.81514,-1.2123421 2.34711,-1.2080903 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4173\" />\n    <path\n       d=\"m 309.1932,8.8326607 q -0.9517,-0.029131 -1.46241,0.895618 -0.50442,0.9188353 -0.56194,2.7978383 -0.0573,1.872902 0.38977,2.826969 0.45338,0.948153 1.40508,0.977284 0.95781,0.02932 1.46223,-0.889518 0.51071,-0.924749 0.56804,-2.797651 0.0575,-1.879003 -0.39587,-2.8271556 -0.44709,-0.9540669 -1.4049,-0.9833847 z m 0.0299,-0.9761054 q 1.53127,0.046871 2.29939,1.2855515 0.77442,1.2327662 0.70383,3.5388152 -0.0704,2.299948 -0.91895,3.489143 -0.84226,1.183281 -2.37352,1.13641 -1.53127,-0.04687 -2.30568,-1.279637 -0.76813,-1.238681 -0.69773,-3.538629 0.0706,-2.306049 0.91285,-3.4893299 0.84855,-1.1891949 2.37981,-1.1423238 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4175\" />\n    <path\n       d=\"m 342.94501,11.830569 q -0.9419,-0.139338 -1.55644,0.719922 -0.60761,0.854115 -0.88271,2.713759 -0.27421,1.853607 0.0592,2.853098 0.34032,0.994347 1.28222,1.133685 0.94794,0.140232 1.55555,-0.713883 0.61453,-0.85926 0.88875,-2.712867 0.2751,-1.859644 -0.0652,-2.853991 -0.3334,-0.999491 -1.28133,-1.139723 z m 0.14291,-0.966049 q 1.51549,0.224192 2.13473,1.543617 0.62618,1.314281 0.28855,3.596572 -0.33673,2.276253 -1.31751,3.358981 -0.97384,1.077584 -2.48933,0.853392 -1.51549,-0.224192 -2.14166,-1.538472 -0.61925,-1.319425 -0.28251,-3.595678 0.33762,-2.282291 1.31147,-3.359875 0.98077,-1.082729 2.49626,-0.858537 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4177\" />\n    <path\n       d=\"m 347.38075,19.873671 1.98334,0.350961 1.21135,-6.845554 -2.23421,0.05093 0.19568,-1.105866 2.2222,-0.05305 1.21405,0.214831 -1.40704,7.95142 1.98335,0.350961 -0.1808,1.021725 -5.16872,-0.914627 0.1808,-1.021724 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4179\" />\n    <path\n       d=\"m 359.07987,14.685432 q -0.93251,-0.192382 -1.59465,0.630749 -0.65494,0.818387 -1.03477,2.659497 -0.3786,1.835133 -0.10226,2.851879 0.28355,1.012002 1.21606,1.204384 0.93849,0.193615 1.59343,-0.624772 0.66214,-0.823131 1.04074,-2.658263 0.37983,-1.841111 0.0963,-2.853113 -0.27634,-1.016746 -1.21483,-1.210361 z m 0.19732,-0.956421 q 1.50039,0.309537 2.04402,1.661871 0.55085,1.347589 0.0847,3.607133 -0.46492,2.253568 -1.50535,3.279098 -1.03323,1.020787 -2.53361,0.711249 -1.50039,-0.309538 -2.05124,-1.657127 -0.54363,-1.352333 -0.0787,-3.6059 0.46615,-2.259545 1.49938,-3.280331 1.04043,-1.025531 2.54082,-0.715993 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4181\" />\n    <path\n       d=\"m 392.7916,23.79276 q -0.90252,-0.303399 -1.65907,0.433903 -0.74883,0.73346 -1.34784,2.515352 -0.59708,1.776106 -0.44533,2.818751 0.15948,1.038804 1.062,1.342203 0.9083,0.305344 1.65712,-0.428117 0.75655,-0.737301 1.35363,-2.513407 0.59902,-1.781892 0.43954,-2.820696 -0.15175,-1.042645 -1.06005,-1.347989 z m 0.31117,-0.925658 q 1.45213,0.488161 1.82877,1.89617 0.38437,1.404169 -0.35079,3.591035 -0.73321,2.181081 -1.88969,3.073701 -1.14876,0.88878 -2.60088,0.400619 -1.45213,-0.488161 -1.8365,-1.892329 -0.37664,-1.408009 0.35658,-3.589091 0.73516,-2.186866 1.88391,-3.075646 1.15648,-0.89262 2.6086,-0.404459 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4183\" />\n    <path\n       d=\"m 396.53445,32.78572 4.03823,1.486061 -0.35834,0.973756 -5.43013,-1.998278 0.35835,-0.973756 q 0.90955,-0.439222 2.46527,-1.167455 1.56355,-0.731854 1.97794,-0.956574 0.78537,-0.419884 1.16112,-0.769383 0.38359,-0.353119 0.53747,-0.771261 0.25084,-0.681629 -0.0722,-1.28829 -0.31733,-0.604553 -1.08488,-0.88701 -0.54416,-0.200249 -1.22088,-0.234662 -0.671,-0.03231 -1.49959,0.09852 l 0.43001,-1.168507 q 0.8021,-0.02351 1.46197,0.05673 0.65986,0.08024 1.16392,0.265731 1.32889,0.48903 1.87484,1.444364 0.54594,0.955333 0.13701,2.066561 -0.19392,0.526974 -0.56936,0.928619 -0.3676,0.398026 -1.12493,0.847742 -0.20432,0.113414 -1.26487,0.627146 -1.05844,0.508004 -2.98093,1.419945 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4185\" />\n    <path\n       d=\"m 408.1693,29.451307 q -0.8839,-0.353977 -1.68096,0.339338 -0.78912,0.689917 -1.488,2.435062 -0.69661,1.739478 -0.6041,2.789039 0.10045,1.046164 0.98436,1.400141 0.88957,0.356246 1.67869,-0.333672 0.79706,-0.693314 1.49366,-2.432792 0.69888,-1.745145 0.59843,-2.791309 -0.0925,-1.04956 -0.98208,-1.405807 z m 0.36305,-0.906568 q 1.42218,0.56954 1.71855,1.996604 0.30431,1.423666 -0.5534,3.565435 -0.85545,2.136102 -2.06058,2.961858 -1.1972,0.82236 -2.61938,0.252819 -1.42218,-0.56954 -1.72648,-1.993207 -0.29637,-1.427063 0.55907,-3.563165 0.85771,-2.141768 2.05491,-2.964128 1.20513,-0.825756 2.62731,-0.256216 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4187\" />\n    <path\n       d=\"m 438.83976,43.864705 q -0.83665,-0.45453 -1.70905,0.141219 -0.86411,0.593299 -1.76152,2.245154 -0.89449,1.646492 -0.92486,2.699684 -0.0221,1.050743 0.81455,1.505272 0.84202,0.457444 1.70613,-0.135856 0.8724,-0.595749 1.76689,-2.24224 0.8974,-1.651855 0.9195,-2.702598 0.0304,-1.053192 -0.81164,-1.510635 z m 0.46618,-0.858107 q 1.34616,0.731327 1.47428,2.183199 0.1364,1.449422 -0.96496,3.476698 -1.09845,2.021914 -2.39157,2.701668 -1.28484,0.677304 -2.63099,-0.05402 -1.34616,-0.731327 -1.48256,-2.180749 -0.12812,-1.451872 0.97033,-3.473785 1.10136,-2.027276 2.3862,-2.704581 1.29312,-0.679754 2.63927,0.05157 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4189\" />\n    <path\n       d=\"m 445.23266,51.357398 q 0.67051,0.60783 0.79792,1.373311 0.13268,0.768544 -0.30843,1.528738 -0.67699,1.166686 -1.85007,1.339839 -1.17309,0.173152 -2.65124,-0.68457 -0.49624,-0.28795 -0.96595,-0.694582 -0.46749,-0.398291 -0.91374,-0.918328 l 0.59734,-1.029428 q 0.29335,0.515993 0.74468,0.954301 0.45133,0.438307 1.02675,0.772206 1.00304,0.582026 1.75542,0.489358 0.75766,-0.0896 1.19571,-0.844519 0.40435,-0.696844 0.14008,-1.372385 -0.25593,-0.677757 -1.12699,-1.183201 l -0.91857,-0.533013 0.50851,-0.876335 0.9608,0.55752 q 0.78659,0.456431 1.38437,0.386963 0.60085,-0.07475 0.94394,-0.666009 0.35228,-0.607099 0.10625,-1.180315 -0.23768,-0.575433 -1.04011,-1.041053 -0.43816,-0.254254 -0.99482,-0.450243 -0.55666,-0.195989 -1.27488,-0.344598 l 0.55139,-0.950241 q 0.70513,0.183347 1.28205,0.40521 0.5822,0.224927 1.05205,0.49756 1.21419,0.704558 1.59995,1.669347 0.38882,0.95951 -0.15645,1.899194 -0.37984,0.654611 -1.01811,0.891122 -0.63519,0.231231 -1.42785,0.0042 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4191\" />\n    <path\n       d=\"m 453.0096,52.086496 q -0.8098,-0.500812 -1.71428,0.04499 -0.89608,0.543819 -1.88486,2.142652 -0.98558,1.593641 -1.07507,2.643464 -0.0811,1.047842 0.72871,1.548655 0.81498,0.504023 1.71107,-0.0398 0.90448,-0.5458 1.89005,-2.139442 0.98879,-1.598832 1.06988,-2.646674 0.0895,-1.049823 -0.7255,-1.553846 z m 0.51365,-0.830562 q 1.30295,0.805794 1.34931,2.262571 0.0547,1.454796 -1.15875,3.416999 -1.2103,1.957013 -2.53956,2.56305 -1.32086,0.604057 -2.62381,-0.201738 -1.30294,-0.805795 -1.3577,-2.260591 -0.0464,-1.456776 1.16394,-3.413789 1.21351,-1.962203 2.53437,-2.56626 1.32926,-0.606037 2.6322,0.199758 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4193\" />\n    <path\n       d=\"m 481.55055,72.188027 q -0.74435,-0.593744 -1.70742,-0.159616 -0.95451,0.433161 -2.12677,1.902772 -1.16846,1.46484 -1.38242,2.496517 -0.20538,1.030712 0.53897,1.624457 0.74912,0.59755 1.70362,0.164388 0.96308,-0.434127 2.13154,-1.898967 1.17226,-1.469611 1.37764,-2.500323 0.21396,-1.031677 -0.53516,-1.629228 z m 0.60897,-0.763434 q 1.19764,0.955319 1.07007,2.40724 -0.119,1.450954 -1.55769,3.254568 -1.43488,1.798842 -2.82689,2.242158 -1.38343,0.442351 -2.58107,-0.512968 -1.19763,-0.955319 -1.07864,-2.406274 0.12757,-1.45192 1.56245,-3.250762 1.43869,-1.803614 2.82212,-2.245965 1.39201,-0.443316 2.58965,0.512003 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4195\" />\n    <path\n       d=\"m 488.28609,78.06947 -5.51679,1.708203 2.37823,2.008361 3.13856,-3.716564 z m 0.44593,-1.029433 1.18445,1.000242 -3.83164,4.537285 0.99326,0.838787 -0.66158,0.783416 -0.99326,-0.838786 -1.38616,1.641443 -0.9373,-0.79153 1.38616,-1.641444 -3.14299,-2.654187 0.7679,-0.909322 6.62116,-1.965904 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4197\" />\n    <path\n       d=\"m 494.06537,82.756038 q -0.71,-0.634413 -1.69583,-0.254785 -0.97722,0.379143 -2.22978,1.780947 -1.24849,1.397252 -1.51977,2.41536 -0.26266,1.017624 0.44734,1.652038 0.71456,0.63848 1.69177,0.259336 0.98584,-0.379628 2.23433,-1.77688 1.25256,-1.401803 1.51522,-2.419427 0.27128,-1.018109 -0.44328,-1.656589 z m 0.65068,-0.728209 q 1.14238,1.020755 0.93387,2.463277 -0.19989,1.442037 -1.73712,3.162432 -1.53317,1.715844 -2.94778,2.080676 -1.40599,0.364348 -2.54837,-0.656407 -1.14238,-1.020755 -0.94248,-2.462792 0.20851,-1.442522 1.74167,-3.158366 1.53724,-1.720395 2.94323,-2.084743 1.4146,-0.364833 2.55698,0.655923 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4199\" />\n    <path\n       d=\"m 517.29799,105.9839 q -0.63452,-0.70991 -1.65665,-0.44304 -1.01352,0.26736 -2.41515,1.52012 -1.39707,1.2487 -1.78062,2.23003 -0.37494,0.98182 0.25958,1.69174 0.63858,0.71446 1.6521,0.4471 1.02214,-0.26687 2.41921,-1.51556 1.40162,-1.25276 1.77656,-2.23458 0.38355,-0.98134 -0.25503,-1.69581 z m 0.72812,-0.65078 q 1.02091,1.14223 0.65222,2.55234 -0.36008,1.41059 -2.08026,2.94807 -1.71562,1.53342 -3.16218,1.73758 -1.43794,0.20465 -2.45886,-0.93758 -1.02092,-1.14223 -0.66084,-2.55282 0.3687,-1.41011 2.08432,-2.94353 1.72018,-1.53747 3.15812,-1.74213 1.44656,-0.20416 2.46748,0.93807 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4201\" />\n    <path\n       d=\"m 521.5973,109.63793 3.1232,3.69758 -0.79267,0.66954 -2.39459,-2.83497 -1.70657,1.44148 q 0.24323,0.14608 0.44916,0.32367 0.2106,0.17366 0.38389,0.37882 0.98461,1.16569 0.92083,2.38603 -0.0638,1.22033 -1.15488,2.14193 -1.12372,0.94917 -2.3393,0.7775 -1.21092,-0.1756 -2.28612,-1.44853 -0.37022,-0.43831 -0.68158,-0.95827 -0.30743,-0.51531 -0.56782,-1.12627 l 0.94655,-0.7995 q 0.12598,0.61263 0.39217,1.15478 0.26618,0.54215 0.6876,1.04107 0.68135,0.80666 1.50345,0.9192 0.82209,0.11254 1.54949,-0.50186 0.72739,-0.6144 0.75392,-1.44374 0.0265,-0.82934 -0.65483,-1.636 -0.31901,-0.37768 -0.72196,-0.68448 -0.399,-0.30213 -0.90702,-0.54414 l 3.49708,-2.95384 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4203\" />\n    <path\n       d=\"m 527.86831,118.49773 q -0.59379,-0.74431 -1.62926,-0.53507 -1.02689,0.21021 -2.49644,1.38255 -1.46478,1.16854 -1.90266,2.12687 -0.4293,0.95929 0.16448,1.70361 0.59759,0.74909 1.62449,0.53888 1.03547,-0.20924 2.50025,-1.37778 1.46954,-1.17234 1.89885,-2.13164 0.43788,-0.95833 -0.15971,-1.70742 z m 0.7634,-0.60901 q 0.95538,1.19759 0.50834,2.58485 -0.43847,1.38823 -2.24201,2.82701 -1.79876,1.43498 -3.25448,1.55786 -1.44714,0.12385 -2.40253,-1.07374 -0.95538,-1.19758 -0.51691,-2.58581 0.44704,-1.38726 2.24581,-2.82224 1.80353,-1.43879 3.25067,-1.56263 1.45572,-0.12288 2.41111,1.0747 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4205\" />\n    <path\n       d=\"m 547.96969,147.04211 q -0.50058,-0.80994 -1.55363,-0.72594 -1.04466,0.086 -2.64378,1.07431 -1.59392,0.98511 -2.14319,1.88425 -0.54086,0.90112 -0.0403,1.71106 0.50379,0.81513 1.54845,0.72915 1.05305,-0.084 2.64698,-1.06912 1.59911,-0.98833 2.13998,-1.88945 0.54926,-0.89913 0.0455,-1.71426 z m 0.83071,-0.51342 q 0.80543,1.30318 0.1958,2.62707 -0.60123,1.32588 -2.56378,2.53883 -1.95735,1.20974 -3.41733,1.15777 -1.45157,-0.05 -2.25699,-1.35316 -0.80542,-1.30317 -0.2042,-2.62905 0.60963,-1.3239 2.56699,-2.53364 1.96255,-1.21294 3.41412,-1.16296 1.45997,0.052 2.26539,1.35514 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4207\" />\n    <path\n       d=\"m 549.44056,155.83473 q -0.41634,-0.71812 -1.1523,-0.85585 -0.73291,-0.13244 -1.58832,0.36348 -0.85013,0.49287 -1.10463,1.19777 -0.24617,0.70712 0.17016,1.42524 0.41634,0.71812 1.14924,0.85057 0.74125,0.13466 1.59138,-0.3582 0.85541,-0.49593 1.10157,-1.20305 0.24923,-0.70184 -0.1671,-1.41996 z m 4.56999,0.17961 -0.97157,0.56327 q -0.0426,-0.51151 -0.18102,-0.98153 -0.13539,-0.46475 -0.36805,-0.86605 -0.61225,-1.05606 -1.64959,-1.2025 -1.03427,-0.14116 -2.52171,0.61536 0.64,0.0452 1.15535,0.37434 0.52062,0.32606 0.84818,0.89106 0.68879,1.18806 0.36335,2.29389 -0.31709,1.10806 -1.55796,1.82746 -1.21447,0.70409 -2.36476,0.41149 -1.1503,-0.29261 -1.84214,-1.48595 -0.79287,-1.3676 -0.16677,-2.69713 0.63138,-1.3326 2.62205,-2.4867 1.86923,-1.08369 3.49238,-0.83947 1.62844,0.24117 2.49478,1.73549 0.23266,0.4013 0.38917,0.8538 0.15958,0.45778 0.25831,0.99317 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4209\" />\n    <path\n       d=\"m 556.18744,161.21612 q -0.45413,-0.83687 -1.51025,-0.81237 -1.04784,0.027 -2.70013,0.92357 -1.64692,0.8937 -2.246,1.76044 -0.5908,0.8692 -0.13667,1.70607 0.45704,0.84223 1.50488,0.81528 1.05612,-0.0245 2.70304,-0.91821 1.65228,-0.89661 2.24309,-1.7658 0.59908,-0.86674 0.14204,-1.70898 z m 0.85833,-0.46577 q 0.73068,1.3465 0.0474,2.63393 -0.67501,1.28988 -2.70282,2.39026 -2.02244,1.09748 -3.47716,0.9633 -1.44644,-0.13174 -2.17712,-1.47824 -0.73068,-1.34651 -0.0557,-2.63639 0.68329,-1.28742 2.70573,-2.3849 2.0278,-1.10038 3.47425,-0.96865 1.45472,0.13418 2.1854,1.48069 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4211\" />\n    <path\n       d=\"m 570.39371,191.42604 q -0.3548,-0.88357 -1.40672,-0.98077 -1.04399,-0.0938 -2.78848,0.60669 -1.73883,0.69822 -2.43368,1.49026 -0.6869,0.79543 -0.33211,1.679 0.35708,0.88924 1.40106,0.98305 1.05192,0.0972 2.79075,-0.60102 1.74449,-0.7005 2.4314,-1.49593 0.69485,-0.79204 0.33778,-1.68128 z m 0.90623,-0.36389 q 0.57086,1.42165 -0.25605,2.62188 -0.81897,1.20363 -2.95994,2.06333 -2.1353,0.85744 -3.56492,0.55673 -1.42167,-0.29732 -1.99254,-1.71897 -0.57086,-1.42165 0.24811,-2.62527 0.82691,-1.20024 2.96222,-2.05767 2.14097,-0.85971 3.56264,-0.56239 1.42961,0.30071 2.00048,1.72236 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4213\" />\n    <path\n       d=\"m 573.08022,196.02564 2.0284,5.49707 -0.49244,0.18171 -9.20186,-0.13067 -0.44583,-1.20821 8.65325,0.12492 -1.51496,-4.10563 0.97344,-0.35919 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4215\" />\n    <path\n       d=\"m 576.06673,206.79905 q -0.30417,-0.90226 -1.34889,-1.05891 -1.03699,-0.15281 -2.81837,0.44772 -1.7756,0.59858 -2.51421,1.34997 -0.73088,0.75523 -0.42671,1.65749 0.30611,0.90804 1.3431,1.06086 1.04473,0.15664 2.82033,-0.44194 1.78138,-0.60053 2.51225,-1.35576 0.73861,-0.75139 0.4325,-1.65943 z m 0.92539,-0.31197 q 0.48939,1.45171 -0.40419,2.60317 -0.88586,1.15529 -3.0721,1.8923 -2.18046,0.73507 -3.59074,0.35384 -1.40254,-0.37739 -1.89193,-1.82911 -0.4894,-1.45171 0.39646,-2.60699 0.89358,-1.15146 3.07404,-1.88652 2.18624,-0.73702 3.58879,-0.35963 1.41028,0.38123 1.89967,1.83294 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4217\" />\n    <path\n       d=\"m 585.48098,241.84677 q -0.18893,-0.93322 -1.20586,-1.2193 -1.00974,-0.28131 -2.85224,0.0917 -1.83652,0.37181 -2.66331,1.02493 -0.81959,0.65789 -0.63066,1.5911 0.19015,0.9392 1.19988,1.22051 1.01693,0.28608 2.85345,-0.0857 1.8425,-0.37302 2.66209,-1.03091 0.82679,-0.65311 0.63665,-1.59231 z m 0.95714,-0.19378 q 0.30399,1.50152 -0.72659,2.53218 -1.02339,1.03542 -3.28465,1.49322 -2.25527,0.45658 -3.60679,-0.098 -1.34433,-0.54985 -1.64832,-2.05137 -0.30399,-1.50152 0.7194,-2.53694 1.03058,-1.03066 3.28586,-1.48724 2.26125,-0.4578 3.60558,0.0921 1.35152,0.55461 1.65551,2.05613 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4219\" />\n    <path\n       d=\"m 583.07847,250.57709 q -0.15008,-0.866 -0.69965,-1.2849 -0.54852,-0.41289 -1.3604,-0.2722 -0.81187,0.14069 -1.18948,0.71408 -0.37657,0.5794 -0.2265,1.4454 0.15008,0.866 0.69965,1.2849 0.55558,0.41786 1.36144,0.27821 0.81187,-0.14069 1.18844,-0.72009 0.37761,-0.57339 0.2265,-1.4454 z m 0.30667,-1.30443 q 0.057,-0.81516 0.51612,-1.34692 0.4602,-0.52576 1.22998,-0.65915 1.07648,-0.18655 1.83428,0.46882 0.75884,0.66139 0.99021,1.99648 0.2324,1.34109 -0.26069,2.21324 -0.49308,0.87215 -1.56957,1.0587 -0.76978,0.1334 -1.38109,-0.21286 -0.61027,-0.34025 -0.93716,-1.08269 -0.0523,0.91346 -0.56327,1.50376 -0.50992,0.59632 -1.3699,0.74535 -1.30501,0.22615 -2.14123,-0.45281 -0.83518,-0.67294 -1.0926,-2.15836 -0.25741,-1.48543 0.30159,-2.40617 0.56004,-0.91473 1.86505,-1.14088 0.85999,-0.14903 1.54082,0.24093 0.68083,0.38997 1.03746,1.23256 z m 1.84131,-0.77748 q -0.69761,0.12089 -1.01348,0.62163 -0.31482,0.50676 -0.1783,1.29457 0.13549,0.78181 0.60247,1.15308 0.46802,0.37729 1.16563,0.25639 0.69761,-0.12089 1.01139,-0.63366 0.31483,-0.50675 0.17934,-1.28856 -0.13652,-0.78781 -0.6035,-1.15909 -0.46594,-0.36525 -1.16355,-0.24436 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4221\" />\n    <path\n       d=\"m 588.27884,257.98873 q -0.13618,-0.94236 -1.13542,-1.28515 -0.99232,-0.33762 -2.85288,-0.0688 -1.85452,0.26798 -2.71671,0.87359 -0.85528,0.61078 -0.7191,1.55314 0.13705,0.9484 1.12937,1.28603 0.99924,0.34279 2.85376,0.0748 1.86056,-0.26886 2.71583,-0.87964 0.8622,-0.60561 0.72515,-1.55401 z m 0.96652,-0.13967 q 0.2191,1.51624 -0.86778,2.48733 -1.07998,0.97626 -3.36339,1.30623 -2.27737,0.32909 -3.59558,-0.30062 -1.3113,-0.62455 -1.5304,-2.14078 -0.21911,-1.51623 0.86087,-2.4925 1.08689,-0.97109 3.36426,-1.30018 2.28341,-0.32996 3.59471,0.29458 1.31821,0.62971 1.53731,2.14594 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4223\" />\n    <path\n       d=\"m 591.169,291.2308 q -0.0288,-0.95171 -0.98289,-1.40524 -0.94782,-0.44761 -2.82684,-0.39074 -1.87292,0.0567 -2.79803,0.56096 -0.91883,0.51021 -0.89002,1.46192 0.029,0.95781 0.97679,1.40542 0.9541,0.45353 2.82702,0.39685 1.87902,-0.0569 2.79785,-0.56707 0.92511,-0.50429 0.89612,-1.4621 z m 0.97612,-0.0295 q 0.0463,1.53128 -1.14333,2.37332 -1.18339,0.84795 -3.48947,0.91773 -2.29997,0.0696 -3.53857,-0.70505 -1.23231,-0.76874 -1.27865,-2.30002 -0.0463,-1.53128 1.13705,-2.37923 1.18967,-0.84204 3.48964,-0.91164 2.30608,-0.0698 3.53839,0.69895 1.2386,0.77466 1.28494,2.30594 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4225\" />\n    <path\n       d=\"m 583.18552,296.83895 1.12304,-0.003 q -0.21852,0.46444 -0.33325,0.94081 -0.11473,0.47638 -0.11354,0.93414 0.003,1.2207 0.82271,1.85944 0.82566,0.64482 2.49825,0.73203 -0.52582,-0.35264 -0.80799,-0.89512 -0.28217,-0.54248 -0.28389,-1.20166 -0.004,-1.36718 0.81834,-2.16888 0.82801,-0.79562 2.26233,-0.79935 1.40381,-0.004 2.25435,0.82422 0.85054,0.82787 0.85413,2.20726 0.004,1.5808 -1.20832,2.41404 -1.20632,0.83932 -3.51344,0.84532 -2.15454,0.006 -3.44504,-1.01643 -1.28438,-1.01595 -1.28888,-2.74324 -0.001,-0.46387 0.0891,-0.94018 0.0903,-0.47631 0.27209,-0.98948 z m 3.86989,2.44356 q 0.002,0.83007 0.57104,1.31077 0.56889,0.48681 1.55766,0.48423 0.98266,-0.003 1.54902,-0.49231 0.57247,-0.48367 0.57031,-1.31374 -0.002,-0.83008 -0.57715,-1.31686 -0.56888,-0.4807 -1.55155,-0.47815 -0.98876,0.003 -1.55513,0.48623 -0.56636,0.48975 -0.5642,1.31983 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4227\" />\n    <path\n       d=\"m 591.21159,307.60674 q 0.024,-0.95184 -0.90351,-1.45755 -0.92155,-0.49945 -2.80083,-0.54682 -1.87319,-0.0472 -2.82482,0.40504 -0.94569,0.45849 -0.96968,1.41034 -0.0242,0.95795 0.8974,1.4574 0.9275,0.5057 2.80068,0.55291 1.87929,0.0474 2.82498,-0.41113 0.95163,-0.45224 0.97578,-1.41019 z m 0.97625,0.0246 q -0.0386,1.53149 -1.27311,2.3063 -1.22857,0.78106 -3.53496,0.72293 -2.3003,-0.058 -3.49406,-0.90008 -1.18781,-0.83586 -1.14922,-2.36736 0.0386,-1.53149 1.26717,-2.31255 1.23451,-0.77481 3.53481,-0.71684 2.30639,0.0581 3.49421,0.89399 1.19376,0.84211 1.15516,2.37361 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4229\" />\n    <path\n       d=\"m 581.32724,339.56975 -0.29535,1.99239 6.87675,1.01943 -0.11339,-2.23192 1.11091,0.16468 0.11518,2.21984 -0.1808,1.21959 -7.98766,-1.18411 -0.29535,1.99238 -1.02638,-0.15215 0.76971,-5.19228 1.02638,0.15215 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4231\" />\n    <path\n       d=\"m 586.84091,351.11864 q 0.16619,-0.93753 -0.67516,-1.57637 -0.83641,-0.63176 -2.68743,-0.95989 -1.84502,-0.32706 -2.85363,-0.0224 -1.00366,0.31178 -1.16985,1.24931 -0.16726,0.94354 0.66914,1.5753 0.84135,0.63884 2.68637,0.9659 1.85102,0.32812 2.85469,0.0163 1.00861,-0.30471 1.17587,-1.24825 z m 0.96157,0.17045 q -0.2674,1.50847 -1.60398,2.08976 -1.33164,0.58837 -3.60335,0.18567 -2.2657,-0.40163 -3.31997,-1.41294 -1.04932,-1.00423 -0.78192,-2.5127 0.2674,-1.50846 1.59904,-2.09683 1.33658,-0.58129 3.60228,-0.17966 2.27171,0.4027 3.32103,1.40693 1.05427,1.01131 0.78687,2.51977 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4233\" />\n    <path\n       d=\"m 585.29687,359.16571 q 0.19266,-0.93245 -0.63027,-1.59485 -0.81819,-0.65518 -2.65918,-1.03557 -1.83502,-0.37916 -2.85185,-0.10312 -1.01209,0.28324 -1.20475,1.21569 -0.1939,0.93843 0.62429,1.59362 0.82293,0.6624 2.65795,1.04155 1.84099,0.38039 2.85308,0.0971 1.01683,-0.27603 1.21073,-1.21446 z m 0.95636,0.19761 q -0.30999,1.50029 -1.66249,2.04352 -1.34776,0.55044 -3.60716,0.0836 -2.25343,-0.4656 -3.27864,-1.50635 -1.02047,-1.03353 -0.71048,-2.53382 0.30999,-1.50029 1.65775,-2.05073 1.35249,-0.54323 3.60592,-0.0776 2.2594,0.46684 3.27988,1.50037 1.02521,1.04075 0.71522,2.54104 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4235\" />\n    <path\n       d=\"m 570.31255,387.51079 -0.63703,1.91077 6.59504,2.19874 0.27612,-2.21767 1.0654,0.35519 -0.27227,2.20609 -0.38994,1.16962 -7.66043,-2.55393 -0.63704,1.91077 -0.98433,-0.32817 1.66015,-4.97958 0.98433,0.32817 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4237\" />\n    <path\n       d=\"m 567.74402,395.07493 -0.69088,1.89197 6.53014,2.38459 0.3388,-2.20896 1.05491,0.38522 -0.33461,2.1975 -0.42291,1.15811 -7.58505,-2.76982 -0.69088,1.89196 -0.97465,-0.35591 1.80049,-4.93057 0.97464,0.35591 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4239\" />\n    <path\n       d=\"m 570.81639,407.49842 q 0.35177,-0.88479 -0.34353,-1.68011 -0.69188,-0.7874 -2.43876,-1.48193 -1.74121,-0.69227 -2.79054,-0.59714 -1.04591,0.10306 -1.39768,0.98784 -0.35403,0.89046 0.33786,1.67786 0.6953,0.79532 2.4365,1.48759 1.74689,0.69453 2.7928,0.59147 1.04932,-0.0951 1.40335,-0.98558 z m 0.90747,0.36079 q -0.56599,1.42359 -1.99231,1.72352 -1.42291,0.30786 -3.56681,-0.54452 -2.13822,-0.85011 -2.96698,-2.05318 -0.82534,-1.19515 -0.25935,-2.61874 0.56599,-1.4236 1.9889,-1.73145 1.42632,-0.29993 3.56454,0.55019 2.1439,0.85237 2.96925,2.04751 0.82875,1.20307 0.26276,2.62667 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4241\" />\n    <path\n       d=\"m 550.80671,433.43704 -0.96287,1.7691 6.10607,3.32337 0.66151,-2.13465 0.98641,0.53688 -0.65567,2.12393 -0.5894,1.0829 -7.09248,-3.86024 -0.96288,1.7691 -0.91135,-0.49603 2.5093,-4.61038 0.91136,0.49602 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4243\" />\n    <path\n       d=\"m 546.52293,441.16562 -2.16249,3.72011 -0.89705,-0.52145 2.90786,-5.00236 0.89705,0.52145 q 0.27519,0.97184 0.7232,2.63012 0.45022,1.66661 0.59984,2.11363 0.27763,0.84619 0.55683,1.27676 0.2814,0.43891 0.66661,0.66283 0.62793,0.36502 1.28135,0.15182 0.65034,-0.20791 1.06137,-0.915 0.2914,-0.50129 0.44241,-1.16185 0.14794,-0.65528 0.16248,-1.49401 l 1.07646,0.62575 q -0.11566,0.79406 -0.30888,1.43008 -0.19322,0.63602 -0.46315,1.10038 -0.71163,1.2242 -1.74703,1.59658 -1.0354,0.37238 -2.05909,-0.22269 -0.48546,-0.2822 -0.81608,-0.72148 -0.3284,-0.43093 -0.64027,-1.25466 -0.0763,-0.22087 -0.39878,-1.35432 -0.31716,-1.13038 -0.88264,-3.18169 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4245\" />\n    <path\n       d=\"m 547.79511,453.20096 q 0.50144,-0.80941 -0.0437,-1.71431 -0.54313,-0.8965 -2.1412,-1.88652 -1.59288,-0.9868 -2.64263,-1.0771 -1.04778,-0.0819 -1.54922,0.72751 -0.50465,0.8146 0.0385,1.7111 0.5451,0.9049 2.13798,1.8917 1.59807,0.99002 2.64585,1.07192 1.04975,0.0903 1.5544,-0.7243 z m 0.83017,0.5143 q -0.8068,1.30232 -2.26361,1.34755 -1.45484,0.0536 -3.41611,-1.16138 -1.95608,-1.21181 -2.56109,-2.54154 -0.60303,-1.32132 0.20376,-2.62365 0.8068,-1.30232 2.26164,-1.35596 1.45681,-0.0452 3.41289,1.16658 1.96127,1.21502 2.56431,2.53634 0.60501,1.32973 -0.20179,2.63206 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4247\" />\n    <path\n       d=\"m 523.55884,475.23686 -1.25677,1.57397 5.43258,4.33775 1.0238,-1.98649 0.8776,0.70074 -1.01618,1.97695 -0.76929,0.96346 -6.31019,-5.03848 -1.25676,1.57396 -0.81084,-0.64742 3.27521,-4.10186 0.81084,0.64742 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4249\" />\n    <path\n       d=\"m 519.22688,486.64331 q -0.71583,0.55373 -1.49179,0.54515 -0.77991,-0.004 -1.45113,-0.57131 -1.03014,-0.87079 -0.99524,-2.05608 0.0349,-1.18528 1.13817,-2.49043 0.37038,-0.43816 0.85297,-0.82942 0.47399,-0.39055 1.06412,-0.73885 l 0.90895,0.76835 q -0.55938,0.19847 -1.06994,0.56609 -0.51056,0.36762 -0.94004,0.8757 -0.74865,0.88564 -0.78914,1.64262 -0.0444,0.76165 0.62214,1.3251 0.61528,0.52012 1.32666,0.37819 0.7121,-0.13331 1.36224,-0.90242 l 0.6856,-0.81106 0.77377,0.65408 -0.71712,0.84835 q -0.5871,0.69453 -0.62336,1.29524 -0.0316,0.60465 0.49046,1.04596 0.53604,0.45313 1.14348,0.31126 0.60816,-0.13327 1.20707,-0.84178 0.32704,-0.38689 0.61746,-0.90063 0.29042,-0.51375 0.56248,-1.19486 l 0.83903,0.70924 q -0.30397,0.66214 -0.62341,1.19131 -0.32339,0.53383 -0.67407,0.94868 -0.90625,1.07209 -1.92368,1.28298 -1.01276,0.21482 -1.84247,-0.48654 -0.57799,-0.48859 -0.69911,-1.1584 -0.11645,-0.66587 0.2459,-1.40652 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4251\" />\n    <path\n       d=\"m 517.14865,494.17202 q 0.63476,-0.70969 0.25561,-1.69571 -0.37866,-0.9774 -1.77985,-2.23065 -1.39665,-1.24917 -2.41462,-1.52095 -1.0175,-0.26315 -1.65226,0.44654 -0.63883,0.71424 -0.26016,1.69165 0.37915,0.98601 1.77579,2.23519 1.40119,1.25324 2.41869,1.5164 1.01797,0.27177 1.6568,-0.44247 z m 0.72789,0.65104 q -1.02131,1.14188 -2.46373,0.93266 -1.44194,-0.2006 -3.16158,-1.73867 -1.7151,-1.534 -2.07924,-2.94879 -0.36366,-1.40616 0.65765,-2.54805 1.02131,-1.14188 2.46325,-0.94128 1.44242,0.20922 3.15752,1.74322 1.71964,1.53807 2.0833,2.94424 0.36415,1.41479 -0.65717,2.55667 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4253\" />\n    <path\n       d=\"m 489.44826,511.65276 -1.51142,1.33134 4.59513,5.21668 1.35376,-1.7781 0.74232,0.84273 -1.3446,1.77003 -0.92517,0.81494 -5.33745,-6.05941 -1.51142,1.33134 -0.68584,-0.77861 3.93885,-3.46955 0.68584,0.77861 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4255\" />\n    <path\n       d=\"m 485.46431,524.31103 -0.71944,-5.73021 -2.3925,1.99133 3.11194,3.73888 z m 0.93584,0.6187 -1.19156,0.99176 -3.79915,-4.56452 -0.99922,0.83167 -0.65597,-0.78812 0.99922,-0.83167 -1.37441,-1.6513 0.94293,-0.78482 1.37441,1.6513 3.16186,-2.63168 0.76139,0.91478 0.7805,6.8626 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4257\" />\n    <path\n       d=\"m 479.84071,529.18411 q 0.7486,-0.58837 0.54687,-1.62533 -0.20275,-1.02839 -1.36441,-2.5064 -1.15788,-1.47322 -2.11301,-1.91803 -0.95616,-0.43625 -1.70476,0.15212 -0.7534,0.59214 -0.55065,1.62053 0.20173,1.03696 1.35962,2.51018 1.16165,1.47801 2.11781,1.91426 0.95513,0.44482 1.70853,-0.14733 z m 0.60346,0.7678 q -1.20448,0.94667 -2.58847,0.48958 -1.38501,-0.44853 -2.81068,-2.26245 -1.42189,-1.80912 -1.53421,-3.26569 -0.11335,-1.44801 1.09113,-2.39468 1.20449,-0.94667 2.5895,-0.49815 1.38398,0.4571 2.80588,2.26622 1.42567,1.81392 1.53901,3.26192 0.11232,1.45658 -1.09216,2.40325 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4259\" />\n    <path\n       d=\"m 450.11838,541.1957 -1.71809,1.0512 3.62821,5.93001 1.63972,-1.51843 0.58613,0.95797 -1.62931,1.51205 -1.05168,0.64346 -4.21434,-6.88797 -1.71809,1.05119 -0.54152,-0.88508 4.47744,-2.73947 0.54153,0.88507 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4261\" />\n    <path\n       d=\"m 447.4747,552.23086 -4.19817,2.40868 -0.51637,-0.89998 3.21878,-1.84676 -1.1117,-1.93762 q -0.18737,0.21305 -0.39905,0.38376 -0.20864,0.176 -0.44158,0.30965 -1.32351,0.75935 -2.51257,0.47754 -1.18906,-0.28182 -1.89981,-1.52063 -0.73203,-1.27587 -0.34493,-2.44088 0.39012,-1.15972 1.8354,-1.98894 0.49764,-0.28552 1.06505,-0.49849 0.56212,-0.20992 1.2099,-0.35641 l 0.6166,1.0747 q -0.6253,0.014 -1.20642,0.17849 -0.58113,0.16454 -1.14759,0.48954 -0.91587,0.52548 -1.17416,1.31402 -0.2583,0.78854 0.21554,1.61441 0.47384,0.82587 1.28495,1.00085 0.8111,0.17497 1.72697,-0.3505 0.42882,-0.24603 0.80296,-0.58736 0.36885,-0.33829 0.69813,-0.7946 l 2.27807,3.97053 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4263\" />\n    <path\n       d=\"m 437.63113,556.80963 q 0.83891,-0.45035 0.81918,-1.50656 -0.0222,-1.04796 -0.91137,-2.70427 -0.88626,-1.65094 -1.75028,-2.25393 -0.86652,-0.59472 -1.70544,-0.14438 -0.84429,0.45324 -0.82206,1.50119 0.0197,1.05622 0.90599,2.70716 0.88914,1.65631 1.75566,2.25103 0.86403,0.60299 1.70832,0.14976 z m 0.46189,0.86042 q -1.34979,0.7246 -2.63412,0.0355 -1.28682,-0.68082 -2.37803,-2.71358 -1.08834,-2.02737 -0.94759,-3.48147 0.13826,-1.44584 1.48805,-2.17043 1.34979,-0.72459 2.63661,-0.0438 1.28433,0.6891 2.37266,2.71647 1.09122,2.03275 0.95296,3.47859 -0.14075,1.4541 -1.49054,2.17869 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4265\" />\n    <path\n       d=\"m 406.9338,563.2342 -1.87248,0.74206 2.56123,6.4629 1.87513,-1.21582 0.41375,1.04405 -1.86378,1.21132 -1.14618,0.45423 -2.97499,-7.50695 -1.87248,0.74206 -0.38228,-0.96461 4.8798,-1.93385 0.38228,0.96461 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4267\" />\n    <path\n       d=\"m 398.44188,570.78501 q 0.78005,-0.28382 1.04481,-0.9842 0.25903,-0.69828 -0.0791,-1.62745 -0.336,-0.92344 -0.98528,-1.29772 -0.65294,-0.36646 -1.43299,-0.0826 -0.78005,0.28382 -1.03907,0.98211 -0.26268,0.7061 0.0733,1.62954 0.33808,0.92917 0.99102,1.29563 0.6472,0.36855 1.42725,0.0847 z m -0.97895,4.46753 -0.384,-1.05536 q 0.51104,0.0479 0.99807,-0.006 0.4813,-0.0517 0.91721,-0.21033 1.14712,-0.41739 1.47336,-1.41292 0.32051,-0.99344 -0.1632,-2.59057 -0.15684,0.62213 -0.57131,1.07171 -0.41238,0.45531 -1.0261,0.67862 -1.29051,0.46956 -2.32206,-0.0449 -1.03519,-0.50665 -1.52563,-1.85453 -0.48,-1.3192 0.01,-2.40027 0.48997,-1.08108 1.78622,-1.55273 1.48553,-0.54053 2.68453,0.30922 1.20108,0.85548 1.98786,3.01781 0.73879,2.03042 0.21346,3.58551 -0.52324,1.56083 -2.14643,2.15144 -0.43591,0.1586 -0.90885,0.23326 -0.47869,0.0767 -1.02309,0.08 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4269\" />\n    <path\n       d=\"m 391.95852,576.48242 q 0.90362,-0.30007 1.065,-1.34407 0.15752,-1.03629 -0.43494,-2.82037 -0.59052,-1.7783 -1.33856,-2.5203 -0.75191,-0.73429 -1.65554,-0.43422 -0.90942,0.302 -1.06693,1.33828 -0.16138,1.04401 0.42915,2.8223 0.59245,1.78408 1.34436,2.51837 0.74804,0.74201 1.65746,0.44001 z m 0.30776,0.9268 q -1.45391,0.48281 -2.6013,-0.41599 -1.15127,-0.89108 -1.87837,-3.08064 -0.72517,-2.18376 -0.33756,-3.5923 0.38375,-1.40082 1.83766,-1.88363 1.45392,-0.48281 2.60518,0.40827 1.14739,0.8988 1.87257,3.08257 0.7271,2.18956 0.34335,3.59038 -0.38761,1.40853 -1.84153,1.89134 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4271\" />\n    <path\n       d=\"m 359.22615,577.85192 -1.97391,0.40065 1.38287,6.81298 2.05996,-0.86654 0.22339,1.10061 -2.04799,0.86411 -1.20827,0.24524 -1.60627,-7.91358 -1.97391,0.40066 -0.2064,-1.01686 5.14413,-1.04413 0.2064,1.01686 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4273\" />\n    <path\n       d=\"m 353.28868,587.26346 -5.77282,1.00338 -0.0899,-0.51715 1.78867,-9.02729 1.26881,-0.22053 -1.68403,8.48872 4.31158,-0.7494 0.17768,1.02227 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4275\" />\n    <path\n       d=\"m 342.15568,588.25793 q 0.9423,-0.13665 1.28459,-1.13606 0.33713,-0.99249 0.0673,-2.85292 -0.26892,-1.85438 -0.87496,-2.71627 -0.6112,-0.85497 -1.55349,-0.71832 -0.94833,0.13752 -1.28546,1.13001 -0.34229,0.99941 -0.0734,2.8538 0.26979,1.86042 0.88099,2.71539 0.60604,0.86189 1.55437,0.72437 z m 0.14015,0.96645 q -1.51612,0.21986 -2.48776,-0.86654 -0.9768,-1.07949 -1.3079,-3.36273 -0.33023,-2.27721 0.29883,-3.59574 0.62388,-1.31161 2.14001,-1.53147 1.51612,-0.21986 2.49292,0.85963 0.97164,1.0864 1.30187,3.36361 0.3311,2.28325 -0.29279,3.59486 -0.62905,1.31852 -2.14518,1.53838 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4277\" />\n    <path\n       d=\"m 309.69551,583.88236 -2.01349,0.0521 0.17964,6.94958 2.17908,-0.49592 0.029,1.12267 -2.16688,0.49561 -1.2325,0.0319 -0.20865,-8.07226 -2.01349,0.0521 -0.0268,-1.03725 5.24727,-0.13564 0.0268,1.03725 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4279\" />\n    <path\n       d=\"m 299.28003,587.33096 q 0.87891,0.002 1.38636,-0.46743 0.50135,-0.46905 0.50286,-1.29302 0.002,-0.82398 -0.49811,-1.29486 -0.50573,-0.4709 -1.38464,-0.47252 -0.8789,-0.002 -1.38635,0.46743 -0.50747,0.47515 -0.50897,1.29302 -0.002,0.82397 0.50422,1.29487 0.49962,0.47089 1.38463,0.47251 z m 1.23195,0.52716 q 0.79309,0.19677 1.23765,0.7408 0.43846,0.54402 0.43703,1.32527 -0.002,1.09252 -0.77832,1.72587 -0.78241,0.63333 -2.13739,0.63084 -1.36108,-0.002 -2.13506,-0.63868 -0.77398,-0.63619 -0.77198,-1.72871 0.001,-0.78125 0.44799,-1.32365 0.44045,-0.5424 1.22816,-0.73627 -0.89073,-0.20916 -1.38401,-0.81431 -0.49938,-0.60516 -0.49778,-1.47797 0.002,-1.32446 0.8155,-2.03097 0.80696,-0.70653 2.31453,-0.70377 1.50756,0.003 2.31803,0.71226 0.80436,0.70949 0.80193,2.03395 -0.002,0.8728 -0.50319,1.47613 -0.5016,0.60333 -1.39309,0.80921 z m 0.44808,1.94785 q 0.001,-0.70801 -0.43742,-1.10554 -0.44483,-0.39755 -1.24439,-0.39901 -0.79345,-0.001 -1.23974,0.39445 -0.45239,0.3959 -0.45368,1.10391 -0.001,0.708 0.44963,1.10556 0.44483,0.39755 1.23828,0.399 0.79956,0.001 1.24585,-0.39444 0.44018,-0.39592 0.44147,-1.10393 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4281\" />\n    <path\n       d=\"m 291.08421,591.17572 q 0.95173,0.0282 1.46157,-0.897 0.50355,-0.91931 0.55929,-2.79837 0.0556,-1.87295 -0.39244,-2.8266 -0.45428,-0.94772 -1.40601,-0.97595 -0.95783,-0.0284 -1.46138,0.8909 -0.50984,0.92523 -0.56539,2.79818 -0.0557,1.87906 0.39853,2.82678 0.448,0.95365 1.40583,0.98206 z m -0.029,0.97613 q -1.53131,-0.0454 -2.30061,-1.28337 -0.77558,-1.23204 -0.70717,-3.53815 0.0682,-2.30002 0.91565,-3.49001 0.84114,-1.18408 2.37245,-1.13866 1.53131,0.0454 2.30689,1.27746 0.76929,1.23795 0.70107,3.53797 -0.0684,2.30611 -0.90955,3.49019 -0.84743,1.19 -2.37873,1.14457 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4283\" />\n    <path\n       d=\"m 259.86838,581.24836 -1.99179,-0.29935 -1.03323,6.87469 2.23214,-0.10891 -0.16691,1.11057 -2.22007,0.11073 -1.21922,-0.18324 1.20014,-7.98527 -1.99179,-0.29935 0.15421,-1.02608 5.19073,0.78014 -0.15421,1.02607 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4285\" />\n    <path\n       d=\"m 252.2994,579.21353 -0.19824,1.10541 q -0.4178,-0.29815 -0.86593,-0.49634 -0.44813,-0.19818 -0.8987,-0.27899 -1.20153,-0.21548 -1.97671,0.47642 -0.78227,0.69683 -1.16759,2.32677 0.4411,-0.45417 1.02534,-0.63464 0.58425,-0.18046 1.23307,-0.0641 1.34572,0.24134 1.98728,1.19352 0.63446,0.95711 0.38127,2.36891 -0.2478,1.38176 -1.21461,2.0703 -0.9668,0.68854 -2.32453,0.44504 -1.55599,-0.27905 -2.15863,-1.6211 -0.60972,-1.33713 -0.20246,-3.60803 0.38033,-2.1207 1.61695,-3.20732 1.22954,-1.08168 2.92971,-0.77677 0.45658,0.0819 0.90902,0.25604 0.45244,0.17415 0.92476,0.44488 z m -3.09709,3.36974 q -0.81704,-0.14653 -1.39185,0.32707 -0.58081,0.47252 -0.75535,1.44576 -0.17346,0.96723 0.20695,1.61214 0.37333,0.64984 1.19037,0.79636 0.81705,0.14653 1.39894,-0.33199 0.5748,-0.4736 0.74827,-1.44084 0.17454,-0.97324 -0.19987,-1.61707 -0.38041,-0.6449 -1.19746,-0.79143 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4287\" />\n    <path\n       d=\"m 240.26448,585.17853 q 0.93206,0.19454 1.59611,-0.62706 0.65683,-0.81687 1.04092,-2.65709 0.38285,-1.83425 0.10886,-2.85164 -0.2812,-1.01265 -1.21327,-1.20719 -0.93803,-0.19579 -1.59486,0.62108 -0.66406,0.82159 -1.0469,2.65585 -0.38409,1.84022 -0.10289,2.85288 0.27399,1.01738 1.21203,1.21317 z m -0.19953,0.95596 q -1.49967,-0.31301 -2.04017,-1.6666 -0.54773,-1.34886 -0.0763,-3.60732 0.47014,-2.25248 1.51294,-3.2756 1.03559,-1.01839 2.53525,-0.70538 1.49967,0.31301 2.04739,1.66187 0.54051,1.35358 0.0704,3.60607 -0.47139,2.25846 -1.50697,3.27685 -1.04281,1.02312 -2.54247,0.71011 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4289\" />\n    <path\n       d=\"m 211.14533,569.86729 -4.07935,-1.36915 0.33015,-0.98367 5.48542,1.84107 -0.33015,0.98367 q -0.89653,0.46524 -2.43063,1.23797 -1.54183,0.77658 -1.94957,1.01314 -0.77295,0.44233 -1.13849,0.8025 -0.37326,0.36402 -0.51503,0.78642 -0.2311,0.68857 0.10929,1.28568 0.33461,0.59516 1.10998,0.8554 0.54969,0.18449 1.22713,0.1994 0.67165,0.013 1.49613,-0.14167 l -0.39618,1.18041 q -0.80109,0.0466 -1.46299,-0.0146 -0.6619,-0.0612 -1.1711,-0.2321 -1.34242,-0.45056 -1.91565,-1.38978 -0.57323,-0.93921 -0.19648,-2.06175 0.17867,-0.53234 0.54239,-0.94464 0.35598,-0.40844 1.10004,-0.87978 0.20098,-0.11925 1.24629,-0.66331 1.04337,-0.53828 2.9388,-1.50521 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4291\" />\n    <path\n       d=\"m 199.61107,573.53521 q 0.89372,0.32839 1.6705,-0.38757 0.76895,-0.71234 1.41732,-2.47687 0.64627,-1.7588 0.52359,-2.80526 -0.13051,-1.04284 -1.02423,-1.37124 -0.89945,-0.3305 -1.6684,0.38183 -0.77677,0.71597 -1.42304,2.47477 -0.64838,1.76453 -0.51787,2.80737 0.12268,1.04646 1.02213,1.37697 z m -0.33682,0.91664 q -1.43798,-0.52839 -1.77529,-1.94633 -0.34514,-1.41432 0.45059,-3.57988 0.79363,-2.15984 1.9745,-3.01993 1.17304,-0.85646 2.61102,-0.32808 1.43798,0.52838 1.78312,1.9427 0.33731,1.41795 -0.45631,3.57778 -0.79574,2.16556 -1.96878,3.02203 -1.18087,0.86009 -2.61885,0.33171 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4293\" />\n    <path\n       d=\"m 191.96102,570.6009 q 0.88408,0.35355 1.6808,-0.34015 0.78879,-0.6903 1.48682,-2.43579 0.69577,-1.73981 0.60274,-2.78933 -0.10095,-1.04611 -0.98503,-1.39966 -0.88974,-0.35582 -1.67853,0.33448 -0.79672,0.6937 -1.49248,2.43352 -0.69804,1.74548 -0.59708,2.7916 0.093,1.04951 0.98276,1.40533 z m -0.36261,0.90674 q -1.42246,-0.56885 -1.71952,-1.99577 -0.305,-1.42352 0.55168,-3.5657 0.85441,-2.13652 2.05914,-2.96286 1.1968,-0.82294 2.61926,-0.25409 1.42245,0.56885 1.72745,1.99237 0.29706,1.42692 -0.55735,3.56344 -0.85668,2.14218 -2.05347,2.96512 -1.20474,0.82634 -2.62719,0.25749 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4295\" />\n    <path\n       d=\"m 165.94313,550.46836 -3.78047,-2.05516 0.49557,-0.9116 5.08353,2.76353 -0.49557,0.9116 q -0.96357,0.30288 -2.60835,0.79817 -1.65304,0.49773 -2.0956,0.66007 -0.8379,0.30174 -1.2603,0.59314 -0.43068,0.29385 -0.64349,0.6853 -0.34689,0.63813 -0.11509,1.28517 0.22645,0.64414 0.945,1.03476 0.50943,0.27694 1.17404,0.40898 0.65925,0.12913 1.49804,0.11966 l -0.59468,1.09393 q -0.79705,-0.0929 -1.43834,-0.26783 -0.64129,-0.17495 -1.11318,-0.43148 -1.24407,-0.6763 -1.64592,-1.70062 -0.40186,-1.02432 0.16368,-2.06462 0.26819,-0.49334 0.69782,-0.83639 0.42136,-0.3406 1.23583,-0.67591 0.2186,-0.0826 1.34236,-0.43738 1.12084,-0.34938 3.15512,-0.97332 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4297\" />\n    <path\n       d=\"m 159.69147,547.01969 -1.74183,-1.01136 -3.49073,6.01197 2.11557,0.7202 -0.56391,0.9712 -2.10501,-0.71407 -1.06622,-0.61907 4.05464,-6.98318 -1.74184,-1.01136 0.52101,-0.89731 4.53933,2.63567 -0.52101,0.89731 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4299\" />\n    <path\n       d=\"m 146.92307,547.87186 q 0.80967,0.50104 1.7143,-0.0445 0.89622,-0.54357 1.88544,-2.14214 0.98601,-1.59337 1.07578,-2.64317 0.0814,-1.04782 -0.72828,-1.54885 -0.81485,-0.50425 -1.71108,0.0393 -0.90463,0.54555 -1.89064,2.13893 -0.98922,1.59856 -1.07059,2.64638 -0.0898,1.0498 0.72507,1.55404 z m -0.51388,0.83043 q -1.30272,-0.80615 -1.34868,-2.26294 -0.0544,-1.45481 1.15967,-3.41669 1.21083,-1.95668 2.54026,-2.56236 1.32102,-0.60369 2.62375,0.20245 1.30272,0.80615 1.35709,2.26096 0.046,1.45679 -1.16487,3.41348 -1.21404,1.96187 -2.53506,2.56557 -1.32943,0.60567 -2.63216,-0.20047 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4301\" />\n    <path\n       d=\"m 124.76973,523.55647 -3.37056,-2.67487 0.645,-0.81276 4.53234,3.59684 -0.64501,0.81276 q -1.00131,0.13261 -2.70676,0.33756 -1.71403,0.20593 -2.17792,0.28973 -0.87731,0.15309 -1.34355,0.36748 -0.47481,0.21538 -0.75178,0.56439 -0.4515,0.56894 -0.33447,1.24621 0.11226,0.67349 0.75291,1.1819 0.45419,0.36045 1.08618,0.60485 0.6272,0.24062 1.45512,0.37559 l -0.774,0.97531 q -0.76919,-0.22862 -1.37082,-0.51127 -0.60164,-0.28266 -1.02236,-0.61654 -1.10918,-0.88024 -1.32883,-1.95842 -0.21965,-1.07818 0.51641,-2.00568 0.34906,-0.43985 0.83131,-0.70387 0.47367,-0.26304 1.33368,-0.45324 0.22955,-0.0438 1.39759,-0.19993 1.16423,-0.15136 3.27552,-0.41604 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4303\" />\n    <path\n       d=\"m 118.55494,518.53823 -3.29447,-2.76806 0.66748,-0.79441 4.43,3.72216 -0.66748,0.79441 q -1.00462,0.10456 -2.71514,0.26174 -1.71912,0.15794 -2.18517,0.22873 -0.88125,0.1285 -1.35329,0.32978 -0.48065,0.20202 -0.76727,0.54315 -0.46724,0.55608 -0.36918,1.23637 0.0934,0.67636 0.71957,1.20249 0.44393,0.373 1.06884,0.63498 0.62023,0.25805 1.44406,0.41612 l -0.80097,0.95329 q -0.7625,-0.25003 -1.356,-0.5494 -0.59349,-0.29936 -1.00471,-0.64488 -1.08414,-0.91091 -1.27356,-1.99481 -0.18942,-1.0839 0.57229,-1.99046 0.36122,-0.42991 0.85066,-0.68035 0.48084,-0.24969 1.34583,-0.41577 0.23069,-0.0374 1.40263,-0.16078 1.16801,-0.11875 3.28588,-0.3243 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4305\" />\n    <path\n       d=\"m 106.48008,517.73011 q 0.71159,0.63265 1.69647,0.25056 0.97627,-0.38158 2.22533,-1.7865 1.24501,-1.40036 1.51374,-2.41914 0.26013,-1.01828 -0.45146,-1.65092 -0.71614,-0.63669 -1.69241,-0.25512 -0.98488,0.38209 -2.22989,1.78245 -1.24906,1.40492 -1.50918,2.4232 -0.26874,1.01878 0.4474,1.65547 z m -0.64886,0.72983 q -1.14492,-1.0179 -0.94001,-2.46094 0.1963,-1.44253 1.72924,-3.16675 1.52888,-1.71966 2.94258,-2.08802 1.40508,-0.36785 2.55,0.65005 1.14492,1.01791 0.94862,2.46044 -0.20492,1.44304 -1.7338,3.1627 -1.53294,1.72422 -2.93802,2.09207 -1.41369,0.36836 -2.55861,-0.64955 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4307\" />\n    <path\n       d=\"m 88.82837,489.97491 -2.86184,-3.21333 0.774846,-0.69009 3.848262,4.3209 -0.774846,0.69009 q -1.009217,-0.0411 -2.724551,-0.13169 -1.723952,-0.0911 -2.195337,-0.0881 -0.89057,3.5e-4 -1.386669,0.1316 -0.504716,0.13075 -0.837444,0.42708 -0.542392,0.48307 -0.54325,1.17038 -0.0049,0.68276 0.539034,1.29352 0.385639,0.433 0.966341,0.78218 0.576642,0.34463 1.369145,0.6196 l -0.929815,0.82811 q -0.718579,-0.35716 -1.262817,-0.73882 -0.544239,-0.38165 -0.901462,-0.78275 -0.941769,-1.05743 -0.97324,-2.15731 -0.03147,-1.09988 0.852763,-1.88739 0.419329,-0.37346 0.939713,-0.55086 0.511767,-0.1779 1.391654,-0.21777 0.233663,-0.004 1.411166,0.0427 1.172945,0.0506 3.298347,0.15193 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4309\" />\n    <path\n       d=\"m 78.879653,484.41542 q -0.425116,-0.79895 -0.285827,-1.56235 0.135358,-0.76808 0.807801,-1.33403 1.032013,-0.86857 2.194441,-0.63432 1.162428,0.23424 2.262882,1.54177 0.369438,0.43896 0.673733,0.9806 0.305033,0.53305 0.548854,1.17346 l -0.9106,0.76639 q -0.101319,-0.58484 -0.377595,-1.15007 -0.276276,-0.56523 -0.704667,-1.07423 -0.746736,-0.88725 -1.486056,-1.05479 -0.74325,-0.17221 -1.411023,0.38981 -0.616406,0.51878 -0.596459,1.2439 0.01135,0.72439 0.659829,1.49489 l 0.683854,0.81254 -0.775177,0.65241 -0.715295,-0.84989 q -0.585599,-0.69579 -1.171599,-0.83282 -0.59067,-0.1331 -1.113681,0.30708 -0.53702,0.45197 -0.499598,1.07463 0.02882,0.62192 0.626211,1.33173 0.326206,0.38758 0.78363,0.76047 0.457424,0.37288 1.082916,0.75588 l -0.840554,0.70744 q -0.601404,-0.41126 -1.069139,-0.81535 -0.471665,-0.40876 -0.821452,-0.82437 -0.903945,-1.07404 -0.940268,-2.11245 -0.04099,-1.03449 0.790221,-1.73406 0.579048,-0.48735 1.259689,-0.49379 0.675972,-0.003 1.344929,0.47952 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4311\" />\n    <path\n       d=\"m 71.808998,481.09705 q 0.592465,0.74537 1.628306,0.53796 1.027266,-0.20839 2.498889,-1.37812 1.466844,-1.16594 1.906423,-2.1235 0.431003,-0.95853 -0.161461,-1.7039 -0.596263,-0.75014 -1.623528,-0.54175 -1.035842,0.2074 -2.502686,1.37334 -1.471623,1.16974 -1.902626,2.12827 -0.439579,0.95756 0.156683,1.7077 z m -0.764479,0.60766 q -0.95326,-1.19928 -0.503755,-2.58575 0.440929,-1.38745 2.247011,-2.82303 1.801304,-1.43179 3.257239,-1.55209 1.44736,-0.12128 2.40062,1.078 0.95326,1.19927 0.512331,2.58672 -0.449505,1.38647 -2.250809,2.81826 -1.806082,1.43559 -3.253441,1.55686 -1.455936,0.1203 -2.409196,-1.07897 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4313\" />\n    <path\n       d=\"m 59.565524,451.3208 -2.275058,-3.65236 0.880711,-0.5486 3.059227,4.91126 -0.880711,0.54859 q -0.987607,-0.21175 -2.66269,-0.59212 -1.683491,-0.38231 -2.148547,-0.45936 -0.877713,-0.15078 -1.38889,-0.10561 -0.519583,0.0432 -0.897771,0.27878 -0.616498,0.38402 -0.733976,1.06122 -0.120705,0.67202 0.311717,1.36623 0.306568,0.49216 0.819595,0.93482 0.5098,0.43747 1.244148,0.84294 l -1.056854,0.65832 q -0.647549,-0.47392 -1.119131,-0.94239 -0.471582,-0.46848 -0.755561,-0.92437 -0.748671,-1.20192 -0.593046,-2.29118 0.155625,-1.08927 1.160672,-1.71531 0.47662,-0.29689 1.01956,-0.38341 0.534533,-0.0885 1.408426,0.0215 0.230915,0.0359 1.383448,0.28158 1.147352,0.24888 3.224731,0.70943 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4315\" />\n    <path\n       d=\"m 48.182382,446.02966 5.770497,0.23286 -1.570691,-2.68745 -4.199806,2.45459 z m -0.764206,0.82132 -0.782266,-1.33845 5.127241,-2.99664 -0.655995,-1.1224 0.885279,-0.51741 0.655995,1.12241 1.85487,-1.08408 0.619037,1.05917 -1.85487,1.08408 2.075776,3.55166 -1.027556,0.60056 -6.897511,-0.3589 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4317\" />\n    <path\n       d=\"m 44.300526,439.67929 q 0.457065,0.83527 1.51309,0.80705 1.047741,-0.0306 2.696867,-0.93305 1.64377,-0.89948 2.239801,-1.76832 0.587745,-0.87126 0.13068,-1.70654 -0.459995,-0.84062 -1.507736,-0.80998 -1.056025,0.0282 -2.699796,0.92769 -1.649125,0.90242 -2.236871,1.77368 -0.59603,0.86884 -0.136035,1.70947 z m -0.856688,0.46878 q -0.735407,-1.34393 -0.05665,-2.63375 0.670475,-1.29224 2.694401,-2.39974 2.018572,-1.10458 3.473756,-0.97551 1.446899,0.12665 2.182306,1.47058 0.735406,1.34393 0.06493,2.63617 -0.678759,1.28982 -2.697331,2.3944 -2.023926,1.1075 -3.470826,0.98085 -1.455183,-0.12907 -2.190589,-1.473 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4319\" />\n    <path\n       d=\"m 36.506419,406.27703 -1.587329,-3.9995 0.964418,-0.38276 2.134452,5.37805 -0.964418,0.38276 q -0.93402,-0.38447 -2.514433,-1.05742 -1.588338,-0.67638 -2.032203,-0.83512 -0.836761,-0.30487 -1.347798,-0.35158 -0.518962,-0.0501 -0.933095,0.11423 -0.675093,0.26793 -0.911443,0.91333 -0.238602,0.63973 0.0631,1.39992 0.213895,0.53894 0.639768,1.06598 0.423622,0.52137 1.0739,1.05129 l -1.157303,0.45931 q -0.552666,-0.58179 -0.933155,-1.12684 -0.380488,-0.54506 -0.578623,-1.04429 -0.522355,-1.31615 -0.174993,-2.3602 0.347363,-1.04406 1.447935,-1.48086 0.52192,-0.20714 1.071587,-0.19546 0.541742,0.008 1.382014,0.27233 0.220806,0.0765 1.311066,0.52376 1.084586,0.44948 3.046549,1.27307 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4321\" />\n    <path\n       d=\"m 26.395944,402.57854 -1.657248,-4.54753 0.974879,-0.35527 1.270627,3.48663 2.098857,-0.76489 q -0.177972,-0.22097 -0.310067,-0.45867 -0.13783,-0.2356 -0.229784,-0.48792 -0.522461,-1.43365 -0.04194,-2.5572 0.48052,-1.12356 1.822413,-1.61259 1.382034,-0.50365 2.463945,0.0765 1.076177,0.58224 1.646705,2.14778 0.196446,0.53905 0.309497,1.13448 0.110962,0.58969 0.1448,1.25296 l -1.164121,0.42424 q 0.09291,-0.61852 0.02991,-1.21919 -0.063,-0.60068 -0.286609,-1.21428 -0.361543,-0.99208 -1.094465,-1.3811 -0.732921,-0.38902 -1.627516,-0.063 -0.894595,0.32602 -1.205368,1.09538 -0.310772,0.76937 0.05077,1.76146 0.169278,0.4645 0.441778,0.89138 0.27041,0.42115 0.663871,0.82344 l -4.300937,1.56739 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4323\" />\n    <path\n       d=\"m 23.563572,392.09694 q 0.300529,0.90348 1.344613,1.06433 1.036366,0.15699 2.820152,-0.43636 1.777995,-0.59143 2.519624,-1.33984 0.73391,-0.75228 0.433381,-1.65576 -0.302455,-0.90926 -1.338821,-1.06625 -1.044084,-0.16086 -2.822078,0.43057 -1.783787,0.59335 -2.517697,1.34563 -0.741629,0.74841 -0.439174,1.65768 z m -0.926642,0.30824 q -0.483543,-1.45367 0.414675,-2.60152 0.890499,-1.15171 3.079691,-1.87992 2.183401,-0.72627 3.592132,-0.33937 1.401013,0.38304 1.884557,1.83671 0.483543,1.45367 -0.406957,2.60538 -0.898218,1.14785 -3.081618,1.87413 -2.189192,0.7282 -3.590206,0.34516 -1.408731,-0.3869 -1.892274,-1.84057 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4325\" />\n    <path\n       d=\"m 22.008414,358.53392 -0.858063,-4.21655 1.016759,-0.20691 1.15382,5.66992 -1.016759,0.20691 q -0.851698,-0.54297 -2.288872,-1.48377 -1.444372,-0.94557 -1.853339,-1.18001 -0.769981,-0.44748 -1.264801,-0.58347 -0.502019,-0.14076 -0.938627,-0.0519 -0.71173,0.14484 -1.058063,0.73852 -0.34755,0.5877 -0.184457,1.38914 0.115625,0.56819 0.44201,1.16201 0.325167,0.58783 0.871942,1.22399 l -1.22011,0.24829 q -0.441553,-0.67003 -0.72009,-1.27358 -0.278537,-0.60355 -0.385642,-1.12987 -0.28237,-1.38758 0.243457,-2.35413 0.525827,-0.96656 1.686128,-1.20268 0.550246,-0.11197 1.089262,-0.004 0.531818,0.10355 1.312439,0.5115 0.203875,0.11423 1.198317,0.74649 0.988462,0.63349 2.774689,1.78977 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4328\" />\n    <path\n       d=\"m 16.235149,349.67999 q 0.142555,0.81775 0.785605,1.20129 0.642001,0.37753 1.61608,0.20772 0.968067,-0.16876 1.450466,-0.7423 0.475337,-0.57851 0.332782,-1.39625 -0.142554,-0.81775 -0.784556,-1.19528 -0.649062,-0.3825 -1.617128,-0.21374 -0.97408,0.16981 -1.449418,0.74832 -0.476386,0.5725 -0.333831,1.39024 z m -4.226452,-1.74764 1.106362,-0.19287 q -0.136799,0.49472 -0.169283,0.98363 -0.03353,0.48291 0.04613,0.93988 0.20964,1.20257 1.132481,1.69842 0.921794,0.48984 2.579021,0.29388 -0.584961,-0.26357 -0.954841,-0.75049 -0.375892,-0.48588 -0.48805,-1.12925 -0.235844,-1.35289 0.451649,-2.27816 0.680431,-0.93024 2.093447,-1.17656 1.382952,-0.24109 2.361291,0.43096 0.978339,0.67204 1.215232,2.03094 0.271483,1.55733 -0.775455,2.58863 -1.052951,1.03235 -3.31979,1.42752 -2.128543,0.37106 -3.567336,-0.41897 -1.444805,-0.78899 -1.741445,-2.49062 -0.07966,-0.45698 -0.07018,-0.93569 0.0084,-0.48472 0.100769,-1.02125 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4330\" />\n    <path\n       d=\"m 11.763053,342.29999 q 0.137116,0.94222 1.136697,1.28402 0.992663,0.33663 2.852951,0.0659 1.854248,-0.26983 2.715834,-0.8763 0.854667,-0.61164 0.717551,-1.55386 -0.137996,-0.94826 -1.130658,-1.2849 -0.999581,-0.34179 -2.853829,-0.072 -1.860288,0.27072 -2.714955,0.88235 -0.861586,0.60647 -0.723591,1.55473 z m -0.966383,0.14063 q -0.220617,-1.51601 0.865301,-2.48819 1.078999,-0.97734 3.36208,-1.30958 2.277041,-0.33136 3.595881,0.29703 1.311921,0.62323 1.532537,2.13925 0.220617,1.51601 -0.858382,2.49335 -1.085918,0.97218 -3.362959,1.30354 -2.283081,0.33225 -3.595002,-0.29099 -1.31884,-0.62839 -1.539456,-2.14441 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4332\" />\n    <path\n       d=\"m 16.123654,309.69864 -0.123848,-4.30119 1.037168,-0.0299 0.166536,5.78374 -1.037168,0.0299 q -0.74622,-0.68071 -2.0012,-1.85357 -1.261257,-1.17878 -1.624073,-1.47974 -0.682048,-0.57265 -1.146297,-0.79131 -0.470527,-0.22459 -0.915899,-0.21177 -0.7260171,0.0209 -1.1688348,0.54656 -0.4429933,0.51956 -0.4194534,1.33709 0.016689,0.5796 0.2366424,1.22051 0.2197779,0.6348 0.6496246,1.35515 l -1.2446014,0.0358 q -0.3203802,-0.73572 -0.491526,-1.37803 -0.1711457,-0.64231 -0.1866048,-1.1792 -0.040756,-1.41543 0.6427164,-2.27774 0.6834719,-0.86231 1.867063,-0.89639 0.561291,-0.0162 1.073822,0.18279 0.506253,0.19303 1.20555,0.72854 0.18132,0.14743 1.052897,0.94054 0.865476,0.79329 2.427486,2.23819 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4334\" />\n    <path\n       d=\"m 7.8869347,303.09537 -0.00659,-5.85938 0.524902,-5.9e-4 8.5913632,3.29845 0.0014,1.28784 -8.0784477,-3.10371 0.00492,4.37622 -1.037597,0.001 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4336\" />\n    <path\n       d=\"m 8.7997246,291.9574 q -0.025401,0.95181 0.9013423,1.45889 0.9208051,0.50082 2.8000191,0.55097 1.873112,0.05 2.825419,-0.40084 0.946369,-0.4571 0.97177,-1.40891 0.02556,-0.95791 -0.89524,-1.45873 -0.926744,-0.50708 -2.799856,-0.55707 -1.879214,-0.0501 -2.825583,0.40695 -0.9523074,0.45083 -0.9778714,1.40874 z m -0.9762149,-0.0261 q 0.04087,-1.53143 1.2765304,-2.30441 1.2297219,-0.77924 3.5360299,-0.71769 2.300206,0.0614 3.492718,0.90527 1.186572,0.83762 1.145702,2.36906 -0.04087,1.53143 -1.270591,2.31067 -1.235661,0.77298 -3.535868,0.71159 -2.306307,-0.0616 -3.49288,-0.89917 -1.1925112,-0.84388 -1.1516413,-2.37532 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4338\" />\n    <path\n       d=\"m 18.757147,259.87275 0.626706,-4.2571 1.026534,0.15112 -0.842719,5.72444 -1.026534,-0.15112 q -0.616345,-0.80021 -1.648021,-2.17361 -1.036825,-1.38032 -1.341718,-1.73984 -0.571962,-0.68262 -0.991064,-0.97876 -0.424253,-0.30305 -0.865058,-0.36795 -0.718574,-0.10578 -1.246128,0.33478 -0.526665,0.43452 -0.645783,1.24367 -0.08445,0.57365 0.02059,1.24306 0.10593,0.66337 0.403831,1.44754 l -1.23184,-0.18135 q -0.187432,-0.78024 -0.244165,-1.44254 -0.05673,-0.6623 0.02149,-1.19368 0.206235,-1.40092 1.029368,-2.1311 0.823133,-0.73019 1.994589,-0.55773 0.555536,0.0818 1.025613,0.36691 0.464927,0.2782 1.060338,0.92725 0.152891,0.17675 0.873115,1.10946 0.714185,0.93182 2.000852,2.62655 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4340\" />\n    <path\n       d=\"m 17.021414,249.85825 q -0.152537,0.86557 0.222381,1.44604 0.375978,0.57445 1.187448,0.71746 0.811471,0.143 1.361171,-0.26833 0.550759,-0.41734 0.703295,-1.28291 0.152537,-0.86557 -0.222382,-1.44603 -0.380929,-0.58153 -1.186388,-0.72348 -0.811471,-0.143 -1.36223,0.27434 -0.5497,0.41133 -0.703295,1.28291 z m -0.730912,1.1231 q -0.330055,0.74752 -0.942352,1.09204 -0.611238,0.33851 -1.380632,0.20292 -1.07595,-0.18961 -1.566554,-1.06316 -0.489545,-0.87956 -0.254384,-2.21398 0.23622,-1.34043 0.995881,-1.99365 0.759662,-0.65321 1.835611,-0.4636 0.769395,0.13559 1.227036,0.66866 0.458702,0.52706 0.514403,1.33636 0.359025,-0.84158 1.039905,-1.22359 0.68194,-0.38802 1.541497,-0.23655 1.304364,0.22987 1.860743,1.15219 0.557439,0.91632 0.295796,2.40101 -0.261642,1.48469 -1.09979,2.16126 -0.837089,0.67056 -2.141453,0.4407 -0.859557,-0.15148 -1.367775,-0.74924 -0.508217,-0.59776 -0.557932,-1.51137 z m -1.995861,0.1069 q 0.697263,0.12287 1.164239,-0.24106 0.468036,-0.36994 0.606802,-1.15737 0.137706,-0.78141 -0.175674,-1.28906 -0.312321,-0.51366 -1.009585,-0.63654 -0.697263,-0.12287 -1.166358,0.25308 -0.468036,0.36994 -0.605742,1.15136 -0.138766,0.78742 0.174614,1.29507 0.31444,0.50164 1.011704,0.62452 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4342\" />\n    <path\n       d=\"m 14.644243,241.12015 q -0.191724,0.93265 0.631875,1.59422 0.818848,0.65436 2.660226,1.03289 1.8354,0.3773 2.851951,0.10024 1.011801,-0.28426 1.203525,-1.21691 0.192953,-0.93862 -0.625896,-1.59298 -0.823598,-0.66157 -2.658998,-1.03887 -1.841378,-0.37853 -2.853179,-0.0943 -1.016551,0.27706 -1.209504,1.21568 z m -0.95656,-0.19664 q 0.308478,-1.5006 1.660428,-2.04519 1.3472,-0.5518 3.607073,-0.0872 2.253894,0.46333 3.280159,1.50304 1.021516,1.03251 0.713037,2.53311 -0.308478,1.5006 -1.655678,2.0524 -1.351949,0.54459 -3.605844,0.0813 -2.259873,-0.46456 -3.281389,-1.49706 -1.026264,-1.03971 -0.717786,-2.54032 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4344\" />\n    <path\n       d=\"m 30.088273,211.28042 1.367092,-4.08003 0.983838,0.32965 -1.838302,5.48634 -0.983838,-0.32965 q -0.465686,-0.8963 -1.239194,-2.43 -0.777355,-1.54144 -1.014122,-1.94906 -0.442717,-0.77273 -0.803076,-1.13809 -0.364207,-0.37308 -0.786679,-0.51463 -0.688687,-0.23076 -1.28562,0.10994 -0.594995,0.33491 -0.85484,1.1104 -0.184218,0.54979 -0.198786,1.22724 -0.01263,0.67165 0.142422,1.49605 L 22.396563,210.203 q -0.047,-0.80107 0.01386,-1.463 0.06087,-0.66193 0.231511,-1.17121 0.44988,-1.34265 1.388806,-1.91636 0.938926,-0.5737 2.061658,-0.19751 0.532431,0.1784 0.944905,0.5419 0.408627,0.35578 0.880341,1.09961 0.119353,0.20091 0.663941,1.24595 0.5388,1.0431 1.506684,2.93804 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4346\" />\n    <path\n       d=\"m 33.134243,204.98289 -1.054331,-0.3868 q 0.366051,-0.35981 0.638896,-0.76681 0.272844,-0.407 0.430511,-0.83676 0.420444,-1.14601 -0.12665,-2.02936 -0.550722,-0.89119 -2.089225,-1.55315 0.370856,0.51313 0.447341,1.11981 0.07649,0.60668 -0.150555,1.22553 -0.470898,1.28353 -1.519847,1.75037 -1.052576,0.459 -2.39914,-0.035 -1.317913,-0.48351 -1.828489,-1.55501 -0.510576,-1.0715 -0.03547,-2.36649 0.544476,-1.48408 1.97066,-1.84503 1.422556,-0.36878 3.588517,0.42586 2.022711,0.74209 2.87858,2.14831 0.852241,1.39838 0.257312,3.01999 -0.159769,0.43548 -0.409693,0.85089 -0.249925,0.41542 -0.598413,0.83367 z M 30.35221,201.3487 q 0.285902,-0.77928 -0.08092,-1.42747 -0.364717,-0.65391 -1.292987,-0.99447 -0.922539,-0.33845 -1.623612,-0.0756 -0.704701,0.25507 -0.990603,1.03436 -0.285903,0.77929 0.08454,1.4353 0.36682,0.64818 1.289359,0.98664 0.928269,0.34056 1.62724,0.0834 0.701074,-0.2629 0.986976,-1.04219 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4348\" />\n    <path\n       d=\"m 29.345009,192.09653 q -0.353104,0.88425 0.340998,1.68063 0.690697,0.78844 2.43653,1.48559 1.740166,0.69489 2.789635,0.60134 1.046064,-0.10148 1.399168,-0.98574 0.355367,-0.88992 -0.33533,-1.67836 -0.694101,-0.79637 -2.434267,-1.49126 -1.745834,-0.69715 -2.791898,-0.59567 -1.049469,0.0936 -1.404836,0.98347 z m -0.906927,-0.36216 q 0.568135,-1.42274 1.994906,-1.72052 1.423365,-0.30571 3.565979,0.54989 2.136947,0.85333 2.963893,2.05765 0.823542,1.19638 0.255407,2.61912 -0.568135,1.42274 -1.991501,1.72846 -1.42677,0.29778 -3.563716,-0.55556 -2.142615,-0.8556 -2.966156,-2.05198 -0.826947,-1.20432 -0.258812,-2.62706 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4350\" />\n    <path\n       d=\"m 48.028518,160.60971 q 0.592009,-0.68452 1.354307,-0.82976 0.765237,-0.15059 1.535522,0.27265 1.182174,0.64956 1.38267,1.81829 0.200495,1.16872 -0.622482,2.6665 -0.276285,0.50282 -0.67184,0.9819 -0.387267,0.47666 -0.896743,0.93493 l -1.043095,-0.57315 q 0.509004,-0.30531 0.936655,-0.76675 0.42765,-0.46144 0.748023,-1.0445 0.558448,-1.01635 0.448239,-1.76636 -0.10727,-0.75536 -0.872207,-1.17567 -0.706095,-0.38797 -1.375282,-0.108 -0.671596,0.27169 -1.156565,1.15431 l -0.511421,0.93076 -0.887968,-0.48791 0.534935,-0.97355 q 0.437941,-0.79704 0.354535,-1.39304 -0.08876,-0.59893 -0.687867,-0.92813 -0.615158,-0.338 -1.182474,-0.0787 -0.569726,0.25105 -1.016485,1.06413 -0.243954,0.44399 -0.426892,1.00507 -0.182939,0.56108 -0.314738,1.28258 l -0.962857,-0.52906 q 0.166834,-0.70921 0.375167,-1.29116 0.211272,-0.5873 0.472861,-1.06338 0.676016,-1.23031 1.631536,-1.63849 0.95017,-0.41112 1.902329,0.11206 0.663301,0.36446 0.914649,0.99703 0.246,0.62962 0.03749,1.42736 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4352\" />\n    <path\n       d=\"m 48.576038,152.81775 q -0.481792,0.82126 0.08495,1.71277 0.564568,0.88315 2.186024,1.83438 1.616192,0.94815 2.667816,1.01313 1.049448,0.0566 1.53124,-0.76462 0.48488,-0.82652 -0.07969,-1.70968 -0.566744,-0.89151 -2.182936,-1.83965 -1.621456,-0.95123 -2.670904,-1.00786 -1.051624,-0.065 -1.536504,0.76153 z m -0.842315,-0.49414 q 0.775191,-1.32138 2.23049,-1.4017 1.453123,-0.0887 3.443092,1.07875 1.984705,1.16433 2.621575,2.4791 0.634695,1.30641 -0.140496,2.6278 -0.775191,1.32138 -2.228315,1.41005 -1.455299,0.0803 -3.440003,-1.08402 -1.989969,-1.16742 -2.624664,-2.47383 -0.63687,-1.31477 0.138321,-2.63615 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4354\" />\n    <path\n       d=\"m 52.819826,145.81086 q -0.504661,0.80741 0.03683,1.71448 0.539549,0.89866 2.133658,1.89504 1.588934,0.99314 2.638318,1.08763 1.047445,0.0861 1.552105,-0.72133 0.507896,-0.81258 -0.03165,-1.71124 -0.541489,-0.90707 -2.130423,-1.90021 -1.594109,-0.99639 -2.641553,-1.08246 -1.049385,-0.0945 -1.55728,0.71809 z m -0.828109,-0.5176 q 0.811986,-1.29909 2.268966,-1.33852 1.45504,-0.0478 3.411447,1.175 1.951231,1.2196 2.550936,2.55173 0.597764,1.32372 -0.214222,2.62281 -0.811986,1.2991 -2.267026,1.34693 -1.456981,0.0394 -3.408212,-1.18017 -1.956406,-1.22283 -2.55417,-2.54655 -0.599705,-1.33213 0.212281,-2.63123 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4356\" />\n    <path\n       d=\"m 75.880253,119.25731 q 0.700926,-0.57249 1.476844,-0.58445 0.779735,-0.0167 1.465741,0.5327 1.052829,0.84322 1.049312,2.02901 -0.0035,1.18579 -1.071851,2.51969 -0.358654,0.44781 -0.830717,0.85171 -0.463483,0.40295 -1.044189,0.76676 l -0.928966,-0.74402 q 0.553932,-0.21321 1.054578,-0.59422 0.500646,-0.381 0.916533,-0.90027 0.724941,-0.90515 0.745378,-1.66294 0.02425,-0.76255 -0.656989,-1.30817 -0.628839,-0.50364 -1.336209,-0.34294 -0.708319,0.15212 -1.337873,0.93817 l -0.663893,0.82892 -0.790812,-0.63336 0.694417,-0.86704 q 0.568506,-0.70983 0.588857,-1.31129 0.01559,-0.60528 -0.517974,-1.03261 -0.547852,-0.43878 -1.151321,-0.28088 -0.604417,0.14931 -1.18437,0.87343 -0.316684,0.39541 -0.593404,0.91666 -0.276719,0.52125 -0.530654,1.20933 l -0.857508,-0.68679 q 0.286334,-0.66994 0.591659,-1.20738 0.30914,-0.54221 0.648718,-0.9662 0.877559,-1.0957 1.889046,-1.33345 1.006723,-0.24155 1.854702,0.4376 0.590728,0.47312 0.729527,1.13949 0.134035,0.66256 -0.208582,1.41254 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4358\" />\n    <path\n       d=\"m 81.731449,118.22153 1.302566,-1.53628 -5.302501,-4.49583 -1.081845,1.95549 -0.856594,-0.72628 1.07395,-1.94618 0.797329,-0.94039 6.159095,5.22211 1.302566,-1.53629 0.791418,0.67102 -3.394565,4.00365 -0.791419,-0.67102 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4360\" />\n    <path\n       d=\"m 83.142201,105.50331 q -0.635814,0.70875 -0.258135,1.69534 0.377213,0.97796 1.776539,2.23328 1.394783,1.25126 2.412353,1.52454 1.017104,0.26467 1.652918,-0.44408 0.639891,-0.71329 0.262679,-1.69125 -0.37768,-0.98658 -1.772463,-2.23783 -1.399326,-1.25533 -2.416429,-1.52 -1.017571,-0.27329 -1.657462,0.44 z m -0.726922,-0.65211 q 1.02301,-1.14036 2.465117,-0.929 1.44164,0.20274 3.158995,1.74337 1.712811,1.53655 2.074848,2.95188 0.36157,1.4067 -0.66144,2.54706 -1.02301,1.14036 -2.46465,0.93762 -1.442107,-0.21136 -3.154919,-1.74791 -1.717354,-1.54063 -2.078924,-2.94734 -0.362037,-1.41532 0.660973,-2.55568 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4362\" />\n    <path\n       d=\"m 110.95733,82.827681 q 0.78983,-0.441823 1.556,-0.318619 0.77076,0.119177 1.35072,0.77957 0.89008,1.013519 0.68033,2.180616 -0.20975,1.167097 -1.49385,2.294804 -0.43108,0.378587 -0.96621,0.694205 -0.52652,0.316176 -1.16166,0.573409 l -0.78537,-0.894281 q 0.58258,-0.113595 1.14187,-0.401697 0.5593,-0.288101 1.05918,-0.727101 0.87135,-0.76523 1.02331,-1.507909 0.15654,-0.746707 -0.4194,-1.402514 -0.53163,-0.60536 -1.25617,-0.570168 -0.72398,0.02658 -1.48068,0.69112 l -0.79798,0.700789 -0.66857,-0.761286 0.83467,-0.73301 q 0.68332,-0.600101 0.80799,-1.188853 0.12065,-0.593338 -0.33043,-1.106977 -0.46317,-0.527396 -1.0849,-0.476889 -0.62118,0.04189 -1.31826,0.654078 -0.38065,0.334284 -0.74383,0.799448 -0.36318,0.465164 -0.73294,1.098572 l -0.72496,-0.82549 q 0.39852,-0.60992 0.79269,-1.086049 0.39875,-0.480157 0.80691,-0.838607 1.05479,-0.926331 2.09221,-0.984483 1.0334,-0.06274 1.7503,0.75358 0.49941,0.568672 0.52017,1.249027 0.0167,0.67577 -0.45114,1.354715 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4364\" />\n    <path\n       d=\"m 117.55244,82.283831 3.31139,-2.747787 0.66258,0.79849 -4.45276,3.694897 -0.66258,-0.79849 q 0.0763,-1.007164 0.22683,-2.718284 0.15129,-1.719714 0.16478,-2.190917 0.0308,-0.890038 -0.0831,-1.390421 -0.11304,-0.508977 -0.39756,-0.851858 -0.46381,-0.558944 -1.15068,-0.583823 -0.68217,-0.02878 -1.31156,0.493498 -0.44622,0.370269 -0.81548,0.938412 -0.36457,0.564246 -0.66707,1.346654 l -0.79511,-0.958188 q 0.38206,-0.705657 0.7825,-1.236225 0.40044,-0.530568 0.81378,-0.873554 1.08971,-0.904236 2.19001,-0.897249 1.10031,0.007 1.85643,0.918207 0.35858,0.432124 0.51768,0.95839 0.15991,0.517672 0.16901,1.398415 -0.004,0.233653 -0.092,1.408811 -0.0915,1.170461 -0.26711,3.291022 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4366\" />\n    <path\n       d=\"m 120.50236,70.546715 q -0.74948,0.587254 -0.5493,1.624516 0.20122,1.028693 1.36067,2.508436 1.15569,1.474938 2.11015,1.921182 0.9555,0.437675 1.70498,-0.149578 0.75429,-0.591018 0.55307,-1.619711 -0.20018,-1.037263 -1.35587,-2.512201 -1.15945,-1.479742 -2.11495,-1.917417 -0.95446,-0.446245 -1.70875,0.144773 z m -0.60231,-0.768697 q 1.20589,-0.944876 2.58919,-0.485715 1.38434,0.450591 2.8073,2.266639 1.4192,1.811242 1.52934,3.267981 0.11119,1.44817 -1.0947,2.393045 -1.2059,0.944876 -2.59024,0.494284 -1.3833,-0.45916 -2.80249,-2.270403 -1.42296,-1.816047 -1.53415,-3.264217 -0.11014,-1.456738 1.09575,-2.401614 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4368\" />\n    <path\n       d=\"m 150.61645,53.810007 q 0.85337,-0.301349 1.5875,-0.04988 0.73935,0.248272 1.1988,0.997524 0.70514,1.149892 0.30033,2.264451 -0.40481,1.11456 -1.86168,2.007945 -0.4891,0.299922 -1.07003,0.520128 -0.57254,0.222219 -1.24213,0.367913 l -0.62218,-1.014611 q 0.59341,-0.01306 1.19349,-0.202049 0.60008,-0.188988 1.16722,-0.53677 0.98859,-0.606225 1.2644,-1.312336 0.28102,-0.709301 -0.17525,-1.453349 -0.42117,-0.686813 -1.14117,-0.775114 -0.71798,-0.09669 -1.5765,0.429765 l -0.90535,0.555175 -0.52964,-0.86372 0.94697,-0.5807 q 0.77526,-0.475409 0.99806,-1.034456 0.21961,-0.56425 -0.13775,-1.147001 -0.36692,-0.59836 -0.98821,-0.654117 -0.61927,-0.06415 -1.41015,0.42083 -0.43186,0.264825 -0.86873,0.661594 -0.43686,0.396769 -0.90877,0.958223 l -0.57432,-0.936564 q 0.49626,-0.533426 0.96552,-0.935742 0.47447,-0.405507 0.93754,-0.689476 1.19673,-0.733852 2.22896,-0.615071 1.02905,0.113577 1.59699,1.039735 0.39564,0.645188 0.30062,1.319195 -0.0982,0.668803 -0.67454,1.258483 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4370\" />\n    <path\n       d=\"m 157.59384,49.701276 q 0.86152,-0.277177 1.58828,-0.0051 0.73205,0.269012 1.1702,1.030915 0.67245,1.169309 0.23639,2.272016 -0.43605,1.102708 -1.91753,1.954678 -0.49735,0.286018 -1.08427,0.489764 -0.57857,0.205994 -1.252,0.332759 l -0.59334,-1.031744 q 0.59354,0.0037 1.19871,-0.168332 0.60517,-0.172 1.18189,-0.503659 1.00528,-0.578123 1.30089,-1.276179 0.30089,-0.701099 -0.13422,-1.457711 -0.40165,-0.698411 -1.11887,-0.806968 -0.71498,-0.116892 -1.58799,0.385161 l -0.92064,0.529439 -0.50509,-0.878305 0.96296,-0.55378 q 0.78836,-0.45337 1.02682,-1.005915 0.23543,-0.557837 -0.10536,-1.150428 -0.34992,-0.608464 -0.96939,-0.681709 -0.61722,-0.08158 -1.42145,0.380919 -0.43915,0.252548 -0.88703,0.636847 -0.44787,0.384299 -0.93542,0.93223 l -0.54769,-0.952378 q 0.51109,-0.519228 0.99151,-0.908159 0.4857,-0.391973 0.9566,-0.662778 1.21693,-0.699832 2.24541,-0.552006 1.02544,0.142535 1.56705,1.084331 0.3773,0.656083 0.26332,1.327143 -0.11703,0.66577 -0.70974,1.238972 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4372\" />\n    <path\n       d=\"m 162.11194,43.328483 q -0.83846,0.451188 -0.81766,1.507385 0.0233,1.04793 0.91409,2.703352 0.88791,1.650048 1.75255,2.252165 0.86711,0.59385 1.70558,0.142662 0.84383,-0.45408 0.82055,-1.502011 -0.0208,-1.056197 -0.90871,-2.706244 -0.89081,-1.655422 -1.75793,-2.249272 -0.86463,-0.602117 -1.70847,-0.148037 z m -0.46275,-0.85996 q 1.34906,-0.72595 2.63408,-0.03815 1.2875,0.679533 2.38077,2.711187 1.09037,2.02628 0.95108,3.480521 -0.13681,1.445975 -1.48587,2.171924 -1.34906,0.72595 -2.63656,0.04642 -1.28502,-0.6878 -2.37539,-2.71408 -1.09327,-2.031654 -0.95646,-3.477629 0.13929,-1.454241 1.48835,-2.180191 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4374\" />\n    <path\n       d=\"m 194.6437,31.970634 q 0.89232,-0.151058 1.57267,0.222183 0.68603,0.370988 1.01066,1.187743 0.49823,1.253493 -0.0911,2.282463 -0.58935,1.028969 -2.17749,1.6602 -0.53316,0.211913 -1.14318,0.329587 -0.6021,0.12109 -1.28674,0.150196 l -0.4396,-1.106024 q 0.5869,0.08855 1.21045,0.0049 0.62355,-0.08364 1.24179,-0.329371 1.07767,-0.428335 1.47011,-1.076914 0.39811,-0.650833 0.0757,-1.461916 -0.29758,-0.748693 -0.99189,-0.958756 -0.6909,-0.217989 -1.62677,0.153986 l -0.98691,0.392265 -0.37423,-0.941537 1.03229,-0.4103 q 0.84512,-0.335905 1.16019,-0.848645 0.31281,-0.518413 0.0603,-1.153667 -0.25925,-0.65227 -0.86187,-0.813396 -0.5992,-0.169053 -1.46133,0.173615 -0.47077,0.187115 -0.96902,0.503377 -0.49825,0.316262 -1.05918,0.788796 l -0.40579,-1.020944 q 0.58013,-0.440757 1.11125,-0.756947 0.53679,-0.318445 1.04159,-0.519086 1.30454,-0.518511 2.30129,-0.225049 0.99449,0.28779 1.39577,1.29739 0.27955,0.703318 0.0707,1.351164 -0.21108,0.642175 -0.87971,1.124674 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4376\" />\n    <path\n       d=\"m 200.82335,26.299182 -1.25619,5.63692 2.9241,-1.067299 -1.66791,-4.569621 z m -0.6722,-0.898185 1.45631,-0.531557 2.03624,5.578722 1.22124,-0.445755 0.35158,0.963233 -1.22124,0.445754 0.73665,2.018202 -1.15244,0.420641 -0.73665,-2.018201 -3.86439,1.410509 -0.40809,-1.118038 1.58079,-6.72351 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4378\" />\n    <path\n       d=\"m 207.76458,23.609692 q -0.90332,0.300985 -1.06365,1.34515 -0.15647,1.036445 0.43779,2.819931 0.59232,1.777696 1.34111,2.518947 0.75265,0.73353 1.65597,0.432545 0.90912,-0.302914 1.06558,-1.33936 0.16033,-1.044165 -0.43199,-2.82186 -0.59426,-1.783487 -1.34691,-2.517017 -0.74879,-0.741251 -1.6579,-0.438336 z m -0.3087,-0.926486 q 1.45342,-0.484278 2.60172,0.41336 1.15216,0.889917 1.88147,3.078741 0.72739,2.183034 0.34119,3.59196 -0.38233,1.401207 -1.83575,1.885484 -1.45343,0.484278 -2.60559,-0.40564 -1.1483,-0.897638 -1.87568,-3.080671 -0.72931,-2.188824 -0.34698,-3.590031 0.38619,-1.408926 1.83962,-1.893203 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4380\" />\n    <path\n       d=\"m 244.58319,17.426931 q 0.90492,0.01301 1.50645,0.503269 0.60751,0.489072 0.77889,1.351107 0.26302,1.322985 -0.5029,2.228236 -0.76592,0.90525 -2.4421,1.238488 -0.56272,0.111873 -1.18396,0.117146 -0.61408,0.01007 -1.29267,-0.08527 l -0.23207,-1.167339 q 0.56117,0.19336 1.18956,0.224005 0.62839,0.03064 1.2809,-0.09908 1.13741,-0.226126 1.6408,-0.792926 0.50937,-0.567991 0.33918,-1.42404 -0.15709,-0.790199 -0.8019,-1.122507 -0.64,-0.339484 -1.62775,-0.143111 l -1.04163,0.207083 -0.19756,-0.993735 1.08952,-0.216605 q 0.89196,-0.17733 1.29467,-0.624546 0.40151,-0.453203 0.26822,-1.123675 -0.13687,-0.688431 -0.70035,-0.956007 -0.55868,-0.274753 -1.46861,-0.09385 -0.49687,0.09878 -1.04415,0.319598 -0.54728,0.220818 -1.1845,0.583975 l -0.21422,-1.077544 q 0.65034,-0.328429 1.22994,-0.543225 0.58558,-0.215985 1.11836,-0.321908 1.37687,-0.273731 2.304,0.195358 0.92595,0.463103 1.13779,1.528674 0.14758,0.742309 -0.1751,1.341635 -0.32387,0.59334 -1.06881,0.946798 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4382\" />\n    <path\n       d=\"m 248.17843,12.473246 4.77187,-0.809776 0.1736,1.022972 -3.65864,0.620863 0.37375,2.2024 q 0.24945,-0.135193 0.50707,-0.222246 0.2566,-0.09307 0.52137,-0.138002 1.50437,-0.255289 2.52282,0.420018 1.01845,0.675307 1.2574,2.083399 0.2461,1.450214 -0.51968,2.409731 -0.76681,0.953499 -2.40959,1.232274 -0.56564,0.09599 -1.17169,0.09978 -0.60004,0.0028 -1.25853,-0.08359 l -0.2073,-1.221549 q 0.59161,0.202953 1.1938,0.249341 0.60218,0.04639 1.24606,-0.06287 1.04102,-0.17666 1.55586,-0.827388 0.51484,-0.650728 0.35554,-1.589456 -0.1593,-0.938728 -0.85999,-1.383182 -0.70069,-0.444455 -1.74172,-0.267795 -0.48741,0.08271 -0.95645,0.273742 -0.46302,0.190008 -0.92968,0.504449 l -0.76587,-4.513115 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4384\" />\n    <path\n       d=\"m 258.99668,11.577312 q -0.94283,0.132893 -1.2891,1.130933 -0.34108,0.991144 -0.0787,2.852626 0.26153,1.855439 0.86413,2.719734 0.6078,0.857399 1.55062,0.724506 0.94888,-0.133745 1.28995,-1.124889 0.34627,-0.99804 0.0848,-2.853478 -0.26238,-1.861483 -0.87018,-2.718882 -0.6026,-0.864295 -1.55147,-0.73055 z m -0.1363,-0.967004 q 1.51698,-0.213821 2.48429,0.876442 0.97249,1.083368 1.2945,3.367914 0.32116,2.278503 -0.31314,3.594514 -0.62911,1.309115 -2.14609,1.522937 -1.51699,0.213821 -2.48949,-0.869547 -0.9673,-1.090263 -1.28846,-3.368766 -0.32201,-2.284546 0.3071,-3.593662 0.6343,-1.31601 2.15129,-1.529832 z\"\n       style=\"font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12.5px;line-height:100%;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:start;writing-mode:lr-tb;text-anchor:start;fill:#41bdb6;fill-opacity:1;stroke:none;stroke-opacity:1\"\n       id=\"path4386\" />\n  </g>\n  <path\n     style=\"fill:none;fill-rule:evenodd;stroke:#41bdb6;stroke-width:1.8;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-start:url(#StopL);marker-end:url(#marker4475);stroke-miterlimit:4;stroke-dasharray:none\"\n     d=\"m 19.5,575 46,0\"\n     id=\"path4164\"\n     inkscape:connector-curvature=\"0\" />\n  <ellipse\n     style=\"fill:none;fill-opacity:1;stroke:#41bdb6;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\"\n     id=\"shipsilhouette\"\n     cx=\"300\"\n     cy=\"300\"\n     rx=\"5.8499999\"\n     ry=\"23.25\" />\n</svg>\n","background_color":[1,0,0],"background_visible":false,"border_color":[1,1,1],"border_radius":0,"border_width":0,"height":600,"owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"visible":true,"width":600},"random":{"c":1,"s0":0.054273,"s1":0.021469,"s2":0.372503},"sequence":0,"source":"/sas/assets/16a479fc","name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aN8808de2a"},"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNc11e3499":{"events":{"pointerClick":{"body":"this.parent.radarRange = this.range;","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Near Range","___assetServerOriginalID":"Nc11e3499","height":23,"left":0,"owner":"ADLteam","range":500,"text":"Near","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1000,1],"visible":true,"width":47},"random":{"c":1,"s0":0.737827,"s1":0.108029,"s2":0.486122},"sequence":0,"name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNc11e3499"},"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNe67a819d":{"children":{"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNc0a0ba97":{"extends":"http://vwf.example.com/image.vwf","properties":{"DisplayName":"terrainOverlay","___assetServerOriginalID":"Nc0a0ba97","height":1100,"left":0,"owner":"ADLteam","src":"/sas/assets/6076863f","style":{"left":"-50%","top":"-50%","transform":"none"},"top":0,"transform":[0.999,0,0,0,0,0.999,0,0,0,0,0.998,0,0,0,0,1],"visible":true,"width":1100},"random":{"c":1,"s0":0.546104,"s1":0.348296,"s2":0.932873},"sequence":0,"name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNc0a0ba97"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"contactMask","___assetServerOriginalID":"Ne67a819d","background_color":[0.639215,0.282352,0.282352],"background_visible":false,"border_color":[1,1,1],"border_radius":50,"border_width":0,"height":552,"left":0,"owner":"ADLteam","style":{"border-radius":"50%","height":"550px","left":"25px","overflow":"hidden","top":"25px","width":"550px"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],"visible":true,"width":550},"random":{"c":1,"s0":0.031682,"s1":0.741143,"s2":0.309962},"sequence":0,"name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNe67a819d"},"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNff2755da":{"events":{"pointerClick":{"body":"this.parent.radarRange = this.range;","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Medium Range","___assetServerOriginalID":"Nff2755da","height":23,"left":0,"owner":"ADLteam","range":2000,"text":"Med","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,8,0,1000,1],"visible":true,"width":43},"random":{"c":1,"s0":0.737827,"s1":0.108029,"s2":0.486122},"sequence":0,"name":"-sas-assets-c77b7465-sas-assets-61c77daf-N8ffd1eecN2b97c1aNff2755da"}},"continues":"/sas/assets/c77b7465","extends":"http://vwf.example.com/panel.vwf","methods":{"initialize":{"body":"","parameters":[]},"tick":{"body":"// update the sweeper arm\n    var sweep = Date.now() % 1000 / 1000;\n    var sweepTerminal = [275 * Math.sin(2 * Math.PI * sweep), -275 * Math.cos(2 * Math.PI * sweep)];\n    $('#sweepline', this.children_by_name.bgImage.getHtml()).attr('d', 'm 300,300 ' + sweepTerminal.join(','));\n\n    // update range-based stuff\n    this.children_by_name.scale.text = Math.round(this.radarRange / 6) + 'm';\n    $('#shipsilhouette', this.children_by_name.bgImage.getHtml())\n        .attr('ry', 155 * 225 / this.radarRange)\n        .attr('rx', 155 * 255 / this.radarRange / 7);\n\n    // start computing contact locations\n    var radar = this.Scene.findNodeByID(this.radarOrigin);\n    if (!radar) return;\n\n    var radarPos = new THREE.Vector3().fromArray(radar.transformAPI.getWorldPosition());\n\n    var terrain = this.Scene.findNodeByID(this.terrainOrigin);\n    var terrainOverlay = this.children_by_name.contactMask.children_by_name.terrainOverlay;\n\n    // get terrain origin in radar space\n    if (terrain)\n    {\n        var terrainPos = terrain.transformAPI.getWorldPosition();\n        var terrainOffset = new THREE.Vector3(terrainPos[0] - radarPos.x, terrainPos[1] - radarPos.y, 0);\n        terrainOffset.multiplyScalar(550 / (2 * this.radarRange));\n\n        var terrainRotation = terrain.transformAPI.localToGlobal([1, 0, 0]);\n        terrainRotation = radar.transformAPI.globalToLocal(terrainRotation);\n        terrainRotation = Math.atan2(terrainRotation[1], terrainRotation[0]);\n\n        // resize terrain based on range\n        terrainOverlay.visible = true;\n\n        // update radar terrain display\n        terrainOverlay.style.transform = 'rotate(' + (-terrainRotation - Math.PI / 2) + 'rad)' +\n            ' translate(' + terrainOffset.x + 'px,' + (-terrainOffset.y) + 'px)' +\n            ' scale(' + (1500 / this.radarRange) + ')';\n\n    }\n    else\n    {\n        terrainOverlay.visible = false;\n    }\n\n    var radarToUI = new THREE.Matrix4(\n        0, -50 / this.radarRange, 0, 50, -50 / this.radarRange, 0, 0, 50,\n        0, 0, 50 / this.radarRange, 0,\n        0, 0, 0, 1);\n\n    // check contacts\n\n    for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        if (this.Scene.children[i].radarTracked)\n        {\n            // compute range\n            var node = this.Scene.children[i];\n            var nodePos = new THREE.Vector3().fromArray(node.transformAPI.getWorldPosition());\n            if (nodePos.clone().sub(radarPos).length() < 1.2 * this.radarRange)\n            {\n                // compute relative position\n                var blipPosition = radar.transformAPI.globalToLocal(nodePos.toArray())\n                blipPosition = new THREE.Vector4(blipPosition[0], blipPosition[1], 0, 1);\n                blipPosition.applyMatrix4(radarToUI);\n\n                // compute relative velocity\n                var blipVelocity = radar.transformAPI.globalToLocalRotation(node.physicsAPI.getLinearVelocity());\n                blipVelocity = [blipVelocity[0], -blipVelocity[1]];\n\n                var index = this.contacts.indexOf(node.id);\n                if (index === -1)\n                {\n                    // create contact\n                    this.contacts.push(node.id);\n                    var blipId = (\"00\" + this.contacts.length.toString()).slice(-2);\n\n                    this.children_by_name.contactMask.createChild(GUID(),\n                    {\n                        continues: '/sas/assets/e2176a7a',\n                        properties:\n                        {\n                            DisplayName: \"Contact\" + blipId,\n                            actualPos: [blipPosition.x, blipPosition.y],\n                            movementVector: blipVelocity,\n                            targetId: blipId\n                        }\n                    });\n                }\n                else\n                {\n                    // update contact\n                    var label = \"Contact\" + (\"00\" + (index + 1).toString()).slice(-2);\n                    var blip = this.children_by_name.contactMask.children_by_name[label];\n                    try\n                    {\n                        blip.actualPos = [blipPosition.x, blipPosition.y];\n                        blip.movementVector = blipVelocity;\n                    }\n                    catch (e)\n                    {\n                        console.error('Failed to update radar blip', label);\n                    }\n                }\n            }\n            // else it's already offscreen, just stop updating it\n        }\n    }","parameters":[]}},"properties":{"DisplayName":"RadarUI","EditorData":{"radarOrigin":{"displayname":"Radar Origin","property":"radarOrigin","type":"nodeid"},"radarRange":{"displayname":"Radar Range","max":3000,"min":500,"property":"radarRange","step":50,"type":"slider"},"terrainOrigin":{"displayname":"Terrain Origin","property":"terrainOrigin","type":"nodeid"}},"___assetServerOriginalID":"N2b97c1a","___sourceAssetTimestamp":"Tue Nov 24 2015 13:29:19 GMT-0500 (Eastern Standard Time)","background_color":[0.156862,0.168627,0.17647],"background_visible":true,"border_color":[1,1,1],"border_radius":4,"contacts":[],"height":600,"left":0,"owner":"ADLteam","radarOrigin":"-sas-assets-874eb90b-N37ac1079","radarRange":1500,"sourceAssetId":"c77b7465","style":{"border":"outset grey 3px"},"terrainOrigin":"asset-vwf-N1e068df3","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,40,5,1,1],"visible":true,"visibleToAncestor":true,"visibleToCamera":"","width":600},"random":{"c":1,"s0":0.781192,"s1":0.545635,"s2":0.678826},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecN2b97c1a"},"-sas-assets-61c77daf-N8ffd1eecN3935327e":{"children":{"-sas-assets-61c77daf-N8ffd1eecNa380734b":{"children":{"-sas-assets-61c77daf-N8ffd1eecN2a15fa7f":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"N2a15fa7f","transform":[1,0,0,0,0,1,0,0,0,0,1,0,50.852275,26.11033,0,1]},"random":{"c":1,"s0":0.341548,"s1":0.535354,"s2":0.864973},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecN2a15fa7f"},"-sas-assets-61c77daf-N8ffd1eecN3c9baf57":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"N3c9baf57","transform":[1,0,0,0,0,1,0,0,0,0,1,0,3.139694,63.670616,0,1]},"random":{"c":1,"s0":0.171653,"s1":0.753448,"s2":0.272681},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecN3c9baf57"},"-sas-assets-61c77daf-N8ffd1eecN83b3add9":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"N83b3add9","font_color":[0.45098,1,0]},"random":{"c":1,"s0":0.693036,"s1":0.437454,"s2":0.963852},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecN83b3add9"},"-sas-assets-61c77daf-N8ffd1eecNede37984":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"Nede37984","transform":[1,0,0,0,0,1,0,0,0,0,1,0,50.852275,64.052452,0,1]},"random":{"c":1,"s0":0.543109,"s1":0.783984,"s2":0.995283},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecNede37984"},"-sas-assets-61c77daf-N8ffd1eecNf207f295":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"Nf207f295","transform":[1,0,0,0,0,1,0,0,0,0,1,0,3.20337,26.753416,0,1]},"random":{"c":1,"s0":0.68603,"s1":0.495947,"s2":0.480925},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecNf207f295"}},"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"Na380734b","transform":[1,0,0,0,0,1,0,0,0,0,1,0,2.286,4.642,0,1]},"random":{"c":1,"s0":0.779754,"s1":0.828842,"s2":0.477964},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecNa380734b"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN3cbf8024":{"children":{"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN4b915f22":{"events":{"pointerClick":{"body":"// Play the SCAT 5 In Disengage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/f1e2e0c1\", false, 100);\n    \n    //this.broadcast(\"command\", [\"5 inch Disengage\"], 0);\n    this.broadcast(\"TAOCommand5In\", [\"5 Inch Disengage\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"disengaged\", \"5 Inch Gun\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"5InDisengageButton","___assetServerOriginalID":"N4b915f22","height":35,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, #cb60b3 0%,#ad1283 50%,#de47ac 100%)","border":"outset grey 3px","border-style":"outset"},"text":"5 In Disengage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,13,52,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.132235,"s1":0.382819,"s2":0.841407},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN4b915f22"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eNb4da5997":{"events":{"pointerClick":{"body":"// Play the SCAT 5 In engage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/90749a39\", false, 100);\n    \n    //this.broadcast(\"command\", [\"5 inch engage\"], 0);\n    this.broadcast(\"TAOCommand5In\", [\"5 Inch Engage\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"5 Inch Gun\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"5InEngageButton","___assetServerOriginalID":"Nb4da5997","height":35,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, #b4e391 0%,#61c419 50%,#b4e391 100%)","border":"outset grey 3px","border-style":"outset"},"text":"5 In Engage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,13,7,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.037626,"s1":0.436847,"s2":0.204421},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eNb4da5997"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"ScatOodTopPanel","___assetServerOriginalID":"N3cbf8024","background_color":[0,0,0],"background_visible":true,"border_color":[1,1,1],"height":100,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"inset gray 3px","border-style":"inset"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50.852275,26.11033,0,1],"visible":true,"width":135},"random":{"c":1,"s0":0.081454,"s1":0.24961,"s2":0.43457},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN3cbf8024"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN3ea7b658":{"children":{"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN1debf91":{"events":{"pointerClick":{"body":"// Play the SCAT 50 Cal Disengage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/239efe2b\", false, 100);\n    \n    // this.broadcast(\"command\", [\"SCAT disengage\"], 0);\n    this.broadcast(\"TAOCommand50Cal\", [\"50 Cal Disengage\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"disengaged\", \"5 Inch Gun\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"ScatDisengageButton","___assetServerOriginalID":"N1debf91","height":35,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, #cb60b3 0%,#ad1283 50%,#de47ac 100%)","border":"outset grey 3px","border-style":"outset"},"text":"Disengage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,13,55,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.17257,"s1":0.17141,"s2":0.455334},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN1debf91"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN31c0e583":{"events":{"pointerClick":{"body":"// Play the SCAT 50 Cal engage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/e40d4b80\", false, 100);\n    \n    //this.broadcast(\"command\", [\"SCAT engage\"], 0);\n    this.broadcast(\"TAOCommand50Cal\", [\"50 Cal Engage\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"SCAT/OOD\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"ScatEngageButton","___assetServerOriginalID":"N31c0e583","height":35,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, #b4e391 0%,#61c419 50%,#b4e391 100%)","border":"outset grey 3px","border-style":"outset"},"text":"Engage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,12,10,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.011567,"s1":0.978064,"s2":0.543363},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN31c0e583"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"ScatOodBottomPanel","___assetServerOriginalID":"N3ea7b658","background_color":[0,0,0],"background_visible":false,"border_color":[1,1,1],"height":100,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"inset gray 3px","border-style":"inset"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50.852275,64.052452,0,1],"visible":true,"width":135},"random":{"c":1,"s0":0.984803,"s1":0.924281,"s2":0.293187},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN3ea7b658"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN7a9c83ba":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"ScatOodLabel","___assetServerOriginalID":"N7a9c83ba","font_size":14,"height":18,"left":0,"owner":"ADLteam","style":{"font-weight":"bold"},"text":"SCAT / OOD","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,57,6,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.140073,"s1":0.047081,"s2":0.570698},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN7a9c83ba"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN7befa27b":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"OodWarnLight","___assetServerOriginalID":"N7befa27b","height":20,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, yellow, white)","border":"outset gray 3px","border-style":"outset"},"text":"","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,55,16,1,1],"visible":true,"width":30},"random":{"c":1,"s0":0.052621,"s1":0.871348,"s2":0.569057},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN7befa27b"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN7cd7975c":{"events":{"pointerClick":{"body":"// Play the helo warning script\n    this.Scene.audioAPI.playSound(\"/sas/assets/1dbce9a7\", false, 100);\n    \n    //this.broadcast(\"command\", [\"Seahawk warn\"], 0);\n    this.broadcast(\"TAOCommand\", [\"Seahawk Warning\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"warned\", \"Seahawk Helicopter\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"SeaHawkWarnButton","___assetServerOriginalID":"N7cd7975c","height":20,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%)","border":"outset gray 3px","border-style":"outset","foreground":"blue"},"text":"Warning","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,19,16,1,1],"visible":true,"width":75},"random":{"c":1,"s0":0.177814,"s1":0.631648,"s2":0.215841},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN7cd7975c"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN8fb168d3":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"SeaHawkLabel","___assetServerOriginalID":"N8fb168d3","font_size":14,"height":18,"left":0,"owner":"ADLteam","style":{"font-weight":"bold"},"text":"SeaHawk","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,13,6,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.766992,"s1":0.114075,"s2":0.676234},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN8fb168d3"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN962cabf7":{"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"SeaHawkTopPanel","___assetServerOriginalID":"N962cabf7","background_color":[0.8,0.749019,0],"background_visible":true,"border_color":[0,0,0],"height":100,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"inset gray 3px","border-style":"inset"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3.20337,26.753416,0,1],"visible":true,"width":135},"random":{"c":1,"s0":0.13615,"s1":0.721612,"s2":0.672958},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN962cabf7"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN9e054bee":{"events":{"pointerClick":{"body":"// Play the OOD warning script\n    this.Scene.audioAPI.playSound(\"/sas/assets/71ac0bd2\", false, 100);\n    \n    //this.broadcast(\"command\", [\"Radio Warn\"], 0);\n    this.broadcast(\"TAOCommandRadioWarn\", [\"Issue Radio Warning\"], 0);\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"warned\", \"SCAT/OOD\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"OodWarnButton","___assetServerOriginalID":"N9e054bee","height":20,"left":500,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(0,0,0,0.65) 0%,rgba(0,0,0,0) 100%)","border":"outset gray 3px","border-style":"outset","foreground":"blue"},"text":"Warning","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,67,16,1,1],"visible":true,"width":75},"random":{"c":1,"s0":0.527964,"s1":0.827221,"s2":0.373129},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN9e054bee"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eNd55914cc":{"children":{"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN175c6665":{"events":{"pointerClick":{"body":"// Play the helo engage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/aee0d5c6\", false, 100);\n\n    //this.broadcast(\"command\", [\"Seahawk engage\"], 0);\n    this.broadcast(\"TAOCommand\", [\"Seahawk Engage\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"Seahawk Helicopter\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"SeaHawkEngageButton","___assetServerOriginalID":"N175c6665","height":35,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, #b4e391 0%,#61c419 50%,#b4e391 100%)","border":"outset grey 3px","border-style":"outset"},"text":"Engage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,12,8,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.350135,"s1":0.308428,"s2":0.002731},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN175c6665"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN266d5cc4":{"events":{"pointerClick":{"body":"// Play the helo disengage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/6b2a9203\", false, 100);\n    \n    // this.broadcast(\"command\", [\"Seahawk disengage\"], 0);\n    this.broadcast(\"TAOCommand\", [\"Seahawk Disengage\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"disengaged\", \"Seahawk Helicopter\", \"Tactical Action Officer\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"SeaHawkDisengageButton","___assetServerOriginalID":"N266d5cc4","height":35,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, #cb60b3 0%,#ad1283 50%,#de47ac 100%)","border":"outset grey 3px","border-style":"outset"},"text":"Disengage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,12,53,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.756967,"s1":0.188245,"s2":0.286354},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eN266d5cc4"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"SeaHawkBottomPanel","___assetServerOriginalID":"Nd55914cc","background_color":[0,0,0],"background_visible":true,"border_color":[1,1,1],"height":100,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"inset gray 3px","border-style":"inset"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3.139694,63.670616,0,1],"visible":true,"width":135},"random":{"c":1,"s0":0.897164,"s1":0.984557,"s2":0.154376},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eNd55914cc"},"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eNfe32e6f7":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"SeaHawkWarnLight","___assetServerOriginalID":"Nfe32e6f7","font_color":[0.45098,1,0],"height":20,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, yellow, white)","border":"outset gray 3px","border-style":"outset"},"text":"","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,7,16,1,1],"visible":true,"width":30},"random":{"c":1,"s0":0.38418,"s1":0.520888,"s2":0.590818},"sequence":0,"name":"-sas-assets-875ad8c9-sas-assets-61c77daf-N8ffd1eecN3935327eNfe32e6f7"}},"continues":"/sas/assets/875ad8c9","extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"MainPanel","___assetServerOriginalID":"N3935327e","___sourceAssetTimestamp":"Thu Nov 05 2015 11:50:35 GMT-0500 (Eastern Standard Time)","background_color":[0.521568,0.470588,0.270588],"background_visible":true,"border_color":[1,1,1],"border_radius":4,"border_width":1,"height":311,"left":0,"owner":"ADLteam","sourceAssetId":"875ad8c9","style":{"background":"linear-gradient(to bottom, rgba(171,189,115,1) 0%,rgba(228,239,192,1) 100%,rgba(228,239,192,1) 100%);","border":"outset grey 3px"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1.6875,2.644489,0.017745,1],"visible":true,"visibleToAncestor":true,"visibleToCamera":"","width":319},"random":{"c":1,"s0":0.574985,"s1":0.580919,"s2":0.421721},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecN3935327e"},"-sas-assets-61c77daf-N8ffd1eecNf8eae5f":{"extends":"http://vwf.example.com/image.vwf","properties":{"DisplayName":"Image1","___assetServerOriginalID":"Nf8eae5f","height":100,"left":0,"owner":"ADLteam","src":"/sas/assets/2c75455f","style":{"height":"inherit","width":"100%"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1,1],"visible":true,"visibleToAncestor":true,"visibleToCamera":"","width":100},"random":{"c":1,"s0":0.075206,"s1":0.956179,"s2":0.831156},"sequence":0,"name":"-sas-assets-61c77daf-N8ffd1eecNf8eae5f"}},"extends":"SandboxCamera.vwf","methods":{"activateState":{"body":"var oldState = this.states[this.activeState];\n    if (oldState)\n    {\n        if (oldState.outFunc && this[oldState.outFunc])\n            this[oldState.outFunc]();\n    }\n    var newState = this.states[state];\n    if (newState && this[newState.inFunc])\n        this[newState.inFunc]()\n    this.activeState = state;","parameters":["state"]},"console.log()":{"parameters":""},"engageLevel1":{"body":"if (this.hostileWithin(300))\n    {\n        this.activateState(\"engageLevel2\");\n    }","parameters":[]},"engageLevel2":{"body":"if (this.hostileWithin(750) && !this.hostileWithin(300))\n    {\n        this.activateState(\"engageLevel1\");\n    }","parameters":[]},"hostileWithin":{"body":"for(var i = 0; i < this.Scene.children.length; i++)\n    {\n        var node = this.Scene.children[i];\n        if(node.hostile)\n        {\n            var pos = this.parent.transformAPI.getWorldPosition();\n            var hostilePos = node.transformAPI.getWorldPosition();\n            if(Vec3.distance(pos,hostilePos) < meters)\n                return true;\n        }\n    }\n    return false;","parameters":["meters"]},"idle":{"body":"if (this.hostileWithin(1500))\n    {\n        this.activateState(\"warn\");\n    }","parameters":[]},"inEngageLevel1":{"body":"// Play the SCAT 5 In engage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/90749a39\", false, 100);\n\n    //this.broadcast(\"command\", [\"5 inch engage\"], 0);\n    this.broadcast(\"TAOCommand5In\", [\"5 Inch Engage\"], 0);\n\n    window.setTimeout(function()\n    {\n        // Play the helo engage script\n        this.Scene.audioAPI.playSound(\"/sas/assets/aee0d5c6\", false, 100);\n    }.bind(this), 3000);\n\n    //this.broadcast(\"command\", [\"Seahawk engage\"], 0);\n    this.broadcast(\"TAOCommand\", [\"Seahawk Engage\"], 0);","parameters":[]},"inEngageLevel2":{"body":"// Play the SCAT 5 In Disengage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/f1e2e0c1\", false, 100);\n\n    //this.broadcast(\"command\", [\"5 inch Disengage\"], 0);\n    //this.broadcast(\"TAOCommand5In\", [\"5 Inch Disengage\"], 0);\n    //this.broadcast(\"TAOCommand\", [\"Seahawk Disengage\"], 0);\n\n    // Play the SCAT 50 Cal engage script\n    this.Scene.audioAPI.playSound(\"/sas/assets/e40d4b80\", false, 100);\n\n    //this.broadcast(\"command\", [\"SCAT engage\"], 0);\n    this.broadcast(\"TAOCommand50Cal\", [\"50 Cal Engage\"], 0);","parameters":[]},"inWarn":{"body":"// this.broadcast(\"command\", [\"Seahawk disengage\"], 0);\n    this.broadcast(\"TAOCommand\", [\"Seahawk Warning\"], 0);","parameters":[]},"tick":{"body":"if (this.userControlled())\n    {\n        \n        return;\n    }\n    \n\n    var state = this.states[this.activeState];\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"userControlled":{"body":"if(this.Scene.clientAPI.getClientForCamera(this.id).length > 0)\n    return true;\n    return false;","parameters":[]},"warn":{"body":"if (this.hostileWithin(750))\n    {\n        this.activateState(\"engageLevel1\");\n    }","parameters":[]}},"properties":{"DisplayName":"TAO","___assetServerOriginalID":"Na138c25e","___sourceAssetTimestamp":"Sun Nov 08 2015 20:43:58 GMT-0500 (Eastern Standard Time)","activeState":"idle","owner":"ADLteam","sourceAssetId":"13a0f08e","states":{"engageLevel1":{"inFunc":"inEngageLevel1","outFunc":null,"updateFunc":"engageLevel1"},"engageLevel2":{"inFunc":"inEngageLevel2","outFunc":null,"updateFunc":"engageLevel2"},"idle":{"inFunc":null,"outFunc":null,"updateFunc":"idle"},"warn":{"inFunc":"inWarn","outFunc":null,"updateFunc":"warn"}},"transform":[-0.999966979026794,0.00815400015562773,0.00185500003863126,0,-0.00836499966681004,-0.97503799200058,-0.221884995698929,0,0,-0.22189299762249,0.975071012973785,0,-0.175420001149178,3.0280179977417,0.671280026435852,1]},"random":{"c":1,"s0":0.252087,"s1":0.732919,"s2":0.607417},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"-sas-assets-61c77daf-N8ffd1eecNa138c25e"}},"continues":"/sas/assets/61c77daf","extends":"sandboxGroup.vwf","properties":{"DisplayName":"CICModel","EditorData":{"open":{"displayname":"Open","property":"open","type":"check"}},"___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Mon Nov 09 2015 16:09:59 GMT-0500 (Eastern Standard Time)","open":true,"owner":"ADLteam","showGlyph":false,"sourceAssetId":"61c77daf","transform":[1,0,0,0,0,1,-9.99999997475243e-7,0,0,-9.99999997475243e-7,1,0,26.7666110992432,-0.384438991546631,5.88438415527344,1],"type":"Group"},"random":{"c":1,"s0":0.340581,"s1":0.179447,"s2":0.356423},"sequence":0,"name":"N8ffd1eec"},"Nbb3feca0":{"children":{"-sas-assets-06f4f9c2-Nbb3feca0N95451019":{"children":{"-sas-assets-06f4f9c2-Nbb3feca0Nc63b7c4e":{"children":{"-sas-assets-06f4f9c2-Nbb3feca0N1c1b0e9":{"events":{"pointerClick":{"body":"this.broadcast(\"TAOCommand50Cal\", [\"toggleControl\"], 0);","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Button1","___assetServerOriginalID":"N1c1b0e9","height":38,"left":0,"owner":"ADLteam","text":"Take Control","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3,90,0,1],"visible":false,"visibleToAncestor":true,"width":100},"random":{"c":1,"s0":0.896834,"s1":0.558635,"s2":0.598735},"sequence":0,"name":"-sas-assets-06f4f9c2-Nbb3feca0N1c1b0e9"},"-sas-assets-06f4f9c2-Nbb3feca0N97599420":{"extends":"sphere2.vwf","properties":{"DisplayName":"sphere1","___assetServerOriginalID":"N97599420","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-0.994077980518341,-0.139039993286133,0.0222169999033213,0,0.139707997441292,-0.993709027767181,0.032260000705719,0,0.0175039991736412,0.0349979996681213,1.0022360086441,0,0,0,0,1],"type":"Primitive","visible":false},"random":{"c":1,"s0":0.149597,"s1":0.002604,"s2":0.888775},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-Nbb3feca0N97599420"},"-sas-assets-06f4f9c2-Nbb3feca0Na1019187":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"CommandDisplayLabel","___assetServerOriginalID":"Na1019187","font_size":24,"height":51,"left":0,"owner":"ADLteam","style":{"background-color":"red","border":"outset white 3px","font-weight":"bold","vertical-align":"middle"},"text":"Command","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,70,12,0,1],"visible":false,"visibleToAncestor":true,"width":294},"random":{"c":1,"s0":0.21545,"s1":0.828244,"s2":0.371171},"sequence":0,"name":"-sas-assets-06f4f9c2-Nbb3feca0Na1019187"}},"extends":"SandboxCamera.vwf","methods":{"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                      // The tick function is called 20 times every second.\n                  // Write code here to animate over time\n                  this.fov += (this.fovGoal - this.fov) / 5;                        \n\n\n\n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"50 Cal Camera","___assetServerOriginalID":"Nc63b7c4e","far":10000,"fov":60,"fovGoal":60,"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[0,0.999000012874603,0,0,0,-9.99999997475243e-7,0.999000012874603,0,0.999000012874603,0,-9.99999997475243e-7,0,0.199993997812271,0,-2.00000190734863,1]},"random":{"c":1,"s0":0.881991,"s1":0.977037,"s2":0.315142},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-Nbb3feca0Nc63b7c4e"},"-sas-assets-06f4f9c2-Nbb3feca0Nf113456":{"extends":"asset.vwf","properties":{"___assetServerOriginalID":"Nf113456","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 14:15:57 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/96493a7c"}],"metal":false,"reflect":0,"shadeless":false,"shading":true,"shadow":true,"shininess":0,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.0174690000712872,0,-1.00084900856018,0,0,1.00100004673004,0,0,1.00084602832794,0,0.0174690000712872,0,-0.300999999046326,-0.00999999977648258,0.0500000007450581,1]},"random":{"c":1,"s0":0.096464,"s1":0.534941,"s2":0.233227},"sequence":0,"source":"/sas/assets/744f77e3","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-06f4f9c2-Nbb3feca0Nf113456"},"-sas-assets-06f4f9c2-Nbb3feca0Nf40d8dc8":{"extends":"box2.vwf","properties":{"DisplayName":"Barrel","___assetServerOriginalID":"Nf40d8dc8","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.2,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/96493a7c"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[1,0,-9.99999997475243e-7,0,0,1,0,0,0,0,1,0,0,0,0.75,1],"type":"Primitive","visible":false,"width":0.28,"worldTransform":[-0.000752283143810928,0.0173828713595867,0.996845424175262,0,-0.996074736118317,-0.0429419614374638,1.44180006600436e-7,0,0.0429370887577534,-0.995922088623047,0.0174030344933271,0,69.7835311889648,9.24610996246338,30.7719345092773,0.999997973442078]},"random":{"c":1,"s0":0.809604,"s1":0.25392,"s2":0.654554},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-Nbb3feca0Nf40d8dc8"}},"extends":"box2.vwf","properties":{"DisplayName":"50CalPivot","___assetServerOriginalID":"N95451019","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.33,"height":0.39,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/96493a7c"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":0,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[0.017400000244379,-9.99999997475243e-7,0.996846973896027,0,0,0.996999025344849,0,0,-0.99685001373291,0,0.017400000244379,0,-0.00696399994194508,-0.00122900004498661,0.75900000333786,0.999997973442078],"type":"Primitive","visible":false,"width":0.33},"random":{"c":1,"s0":0.570447,"s1":0.810183,"s2":0.997119},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-06f4f9c2-Nbb3feca0N95451019"},"N52b0dfc0":{"children":{"N4827bf1e":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.021857,-0.000001,-0.99076,0,-0.000001,0.990999,0,0,0.990759,-0.000001,0.021857,0,-0.299817,-0.009032,0.050076,1]},"random":{"c":1,"s0":0.469421,"s1":0.536146,"s2":0.120138},"sequence":0,"name":"N4827bf1e"},"N66bd7ca":{"extends":"http://vwf.example.com/node.vwf","properties":{"fov":59.999999,"transform":[0,0.999999,0,0,0,-0.000001,1,0,1,-0.000001,-0.000001,0,0.5,0.000001,-2.000002,1]},"random":{"c":1,"s0":0.962126,"s1":0.130862,"s2":0.80036},"sequence":0,"name":"N66bd7ca"},"N6c6ecc02":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,-0.000001,0,0,1,0,0,0,0,1,0,0,0,0.75,1],"worldTransform":[0.005145,-0.119343,0.992839,0,-0.999073,-0.043072,0,0,0.042762,-0.991918,-0.119454,0,0.032069,8.50606,31.910409,1]},"random":{"c":1,"s0":0.078018,"s1":0.344881,"s2":0.018158},"sequence":0,"name":"N6c6ecc02"},"Nb1107704":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.017469,0,-1.000848,0,0,1.000999,0,0,1.000847,0,0.017469,0,-0.301,-0.01,0.05,1]},"random":{"c":1,"s0":0.59538,"s1":0.93178,"s2":0.166886},"sequence":0,"name":"Nb1107704"}},"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.119454,0,0.992839,0,0,1,0,0,-0.99284,0,-0.119454,0,-0.000002,-0.000001,0.749999,1]},"random":{"c":1,"s0":0.999659,"s1":0.521418,"s2":0.212955},"sequence":0,"name":"N52b0dfc0"}},"continues":"/sas/assets/06f4f9c2","extends":"box2.vwf","methods":{"TAOCommand50Cal":{"body":"var command = args[0];\n    var label = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].children_by_name.CommandDisplayLabel;\n\n    \n    if (command === \"toggleControl\")\n    {\n        this.toggleControl();\n        return;\n    }\n    \n    label.text = command;\n    label.visible = true;\n    \n    if (command == \"50 Cal Engage\")\n    {\n        this.activateState(\"targeting\");\n    }\n    if (command == \"50 Cal disengage\")\n    {\n        this.activateState(\"idle\");\n    }","parameters":["args"]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    this.keysDown.push(e.key.char);\n    if (e.key.char == ' ')\n    {\n        //do xapi\n    }","parameters":["e"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    this.keysDown.splice(this.keysDown.indexOf(' '), 1)\n    if (e.key.char == ' ' && (this.activeState != 'reloading'))\n    {\n        this.playSound(\"/sas/assets/8eb34370\", false, 10);\n        this.xAPISend([]);\n    }","parameters":["e"]},"_pointerDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = true;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].fovGoal = 10;\n    }","parameters":["e","d"]},"_pointerMove":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (!this.mouseDown) return;\n    var relx = e.position[0] - this.lastx;\n    var rely = e.position[1] - this.lasty;\n\n    this.lastx = e.position[0];\n    this.lasty = e.position[1];\n    this.transformAPI.rotateZ(-relx * 160);\n    this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(rely * 60);","parameters":["e","d"]},"_pointerUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = false;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].fovGoal = 60;\n    }","parameters":["e","d"]},"activateState":{"body":"if (this.states[newState] && this.states[newState].transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        console.log(\"transition to \" + newState);\n    }\n    else\n    {\n        console.log(\"invalid transition\");\n    }","parameters":["newState"]},"collectXAPIData":{"body":"//1 - Burst Statement\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender && this.userControlled())\n    {\n        //2 - Info from bullets - still inside the if sender and user control\n        if (!this.started)\n        {\n            // console.log(\"Starting Burst\");\n            this.startT = this.Scene.time;\n            this.hits = [];\n            this.started = true;\n            this.roundsFired = 0;\n            this.numHits = 0;\n            this.burstCount++; //make this a property\n        }\n        this.roundsFired++;\n        // console.error(hit);\n        if (hit && hit.node /*we have hit something significant*/ )\n        {\n           this.verifyHit(hit.node.DisplayName);\n        }\n        // console.error(this.hits);\n        // console.log(this.roundsFired, this.numHits);\n    }","parameters":["hit"]},"engaging":{"body":"this.tracking();\n    this.playBurst();\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target || target.activeState == \"defeated\")\n    {\n        this.stopBurst();\n        this.audioAPI.stopSound(this.fireSound);\n        this.activateState(\"targeting\");\n        return;\n    }\n\n    if (this.Ammo > 0)\n    {\n        this.shake();\n\n        if (this.firecounter >= 2)\n        {\n            this.firecounter = 0;\n            this.fire();\n        }\n    }","parameters":[]},"fire":{"body":"var origin = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.getWorldPosition();\n    var dir = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.localToGlobalRotation([0, 0, 1]);\n    var shake = [this.random() / this.accuracy - 1 / this.accuracy, this.random() / this.accuracy - 1 / this.accuracy, this.random() / this.accuracy - 1 / this.accuracy];\n    if (!this.userControlled())\n    {\n        shake = MATH.scaleVec3(shake, 1.5);\n    }\n\n    dir = Vec3.normalize(Vec3.add(shake, dir, []), []);\n    var hit = this.Scene.traceAPI.rayCast(origin, dir,\n    {\n        ignore: [findviewnode(this.id)]\n    });\n\n    if (hit && hit.node)\n    {\n        // if (Engine.ancestors(hit.node.id).indexOf(this.targetID) != -1)\n        {\n\n            if (hit.node.hit)\n                hit.node.hit([hit.point, 5]);\n\n        }\n        if (!this.userControlled())\n        {\n            // this.stopBurst();\n\n            //    this.activateState(\"targeting\");\n        }\n    }\n\n    this.collectXAPIData(hit);\n    this.Ammo -= 2;\n    console.log(this.Ammo);\n    if (this.Ammo <= 0)\n    {\n        this.startReloading();\n    }","parameters":[]},"firing":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                       return (this.keysDown.indexOf(' ') !== -1)                         \n\n\n\n\n\n\n\n","parameters":[]},"playBurst":{"body":"var sound = vwf.callMethod(this.id, \"getSound\", [this.fireSound]);\n    if (sound && !sound.isPlaying())\n    {\n        sound.play();\n    }\n    else if (!sound)\n    {\n        this.audioAPI.playSound(this.fireSound, true, 200);\n    }","parameters":[]},"ready":{"body":"this.Scene.unbind(\"pointerMove\", this._pv,this);\n    this.Scene.unbind(\"pointerDown\", this._pd,this);\n    this.Scene.unbind(\"pointerUp\", this._pu,this);\n\n    this.Scene.unbind(\"keyDown\", this._kd,this);\n    this.Scene.unbind(\"keyUp\", this._ku,this);\n    var self = this;\n    this._pv = function(e, d)\n    {\n        self._pointerMove(e, d);\n    }\n    this._pd = function(e, d)\n    {\n        self._pointerDown(e, d);\n    }\n    this._pu = function(e, d)\n    {\n        self._pointerUp(e, d);\n    }\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d);\n    }\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d);\n    }\n    this.Scene.bind(\"pointerMove\", this._pv,this);\n    this.Scene.bind(\"pointerDown\", this._pd,this);\n    this.Scene.bind(\"pointerUp\", this._pu,this);\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"reloading":{"body":"if (this.firecounter == 0)\n    {\n\n        console.log('reloading, so stopping sound and sending xapi statement');\n        this.Ammo = 1000;\n        // this.xAPISend();\n        this.state = 'ready';\n\n        this.activateState('targeting');\n    }","parameters":[]},"returnFromShakeOffsets":{"body":"this.userControlCounter--;\n    var pos = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].transformAPI.getPosition();\n    var goal = [0.1, -0.01, -2];\n    var move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);\n\n    pos = this.children_by_name[\"50CalPivot\"].transformAPI.getPosition();\n    goal = [0.0, 0, 0.75];\n    move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"50CalPivot\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);","parameters":[]},"shake":{"body":"var shake = [this.random() / 10 - .05, this.random() / 10 - .05, this.random() / 10 - .05]\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].transformAPI.move(shake);\n        shake = [this.random() / 10 - .05, this.random() / 10 - .05, this.random() / 10 - .05]\n        this.children_by_name[\"50CalPivot\"].transformAPI.move(shake);","parameters":[]},"startReloading":{"body":"this.stopBurst();\n    this.audioAPI.playSound(this.reloadSound, false, 100);\n    this.activateState(\"reloading\");\n    this.firecounter = -130;","parameters":[]},"stopBurst":{"body":"this.audioAPI.stopSound(this.fireSound);","parameters":[]},"targeting":{"body":"var near = Infinity;\n    var target = null;\n    var thispos = this.transformAPI.getPosition();\n    var list = [];\n    for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var child = this.Scene.children[i];\n        if (child.id == this.id) continue;\n        if (child.parent.id == this.id) continue;\n        if (!child.transformAPI) continue;\n\n        var childpos = child.transformAPI.getPosition();\n        var dist = MATH.distanceVec3(thispos, childpos);\n        if (dist < (this.maxRange || 100) && child.hostile && child.activeState !== 'disabled')\n        {\n            list.push(\n            {\n                near: dist,\n                target: child,\n            });\n        }\n    }\n\n    list.sort(function(a, b)\n    {\n        return a.near - b.near;\n    });\n\n    for (var i = 0; i < list.length; i++)\n    {\n        target = list[i].target;\n        if (target)\n        {\n            var origin = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.getWorldPosition();\n            var b = Vec3.subtract(target.transformAPI.getWorldPosition(), origin, []);\n            var dir = Vec3.normalize(b, []);\n\n            var hit = this.Scene.traceAPI.rayCast(origin, dir,\n            {\n                ignore: [findviewnode(this.id), findviewnode(target.id)]\n            });\n            if (hit && hit.distance < Vec3.distance(target.transformAPI.getWorldPosition(), origin))\n                target = null; //something is between us and the target\n        }\n\n        if (target)\n        {\n            this.targetID = target.id;\n            this.activateState(\"tracking\");\n            return;\n        }\n    }","parameters":[]},"tick":{"body":"this.returnFromShakeOffsets();\n    this.firecounter++;\n\n    if (!this.userControlled())\n    {\n        var state = this.states[this.activeState];\n        if (state)\n        {\n            if (state.updateFunc && this[state.updateFunc])\n                this[state.updateFunc]();\n        }\n\n    }\n    else\n    {\n\n        if (this.firing() && this.Ammo > 0)\n        {\n            this.playBurst();\n            this.shake();\n\n            if (this.firecounter >= 2)\n            {\n                this.firecounter = 0;\n                this.fire();\n            }\n\n        }\n        else\n        {\n            this.stopBurst();\n            if (this.Ammo <= 0)\n                this.reloading();\n        }\n    }","parameters":[]},"toggleControl":{"body":"if (disable) this.isUserControlled = false;\n    else this.isUserControlled = !this.isUserControlled;\n\n    var button = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].children_by_name[\"Button1\"];\n    button.text = this.isUserControlled ? \"Enable AI\" : \"Take Control\";","parameters":["disable"]},"tracking":{"body":"console.log(\"tracking\");\n    if (!this.targetID)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n\n    var thispos = this.transformAPI.getPosition();\n\n    var thisPivotpos = this.children[0].transformAPI.getWorldPosition();\n    thisPivotpos = this.transformAPI.globalToLocal(thisPivotpos);\n    var targetpos = target.transformAPI.getWorldPosition();\n\n    if (this.parent.transformAPI)\n    {\n        targetpos = this.parent.transformAPI.globalToLocal(targetpos);\n    }\n    if (!this.lastTargetPos)\n        this.lastTargetPos = targetpos;\n\n    var targetSpeed = MATH.subVec3(targetpos, this.lastTargetPos);\n    // targetSpeed = MATH.scaleVec3(targetSpeed, 20); //now in m/s\n\n    var vec = MATH.subVec3(thispos, targetpos);\n    var dist = MATH.lengthVec3(vec);\n    //vec = MATH.subVec3(thispos, [0, 0, 0]);\n    this.fuse = MATH.lengthVec3(vec) / 1000; //the 50 cal does not need to lead the target nearly so much\n    vec = MATH.toUnitVec3(vec);\n    var targetangle = Math.atan2(vec[0], vec[1]);\n    var thisvec = this.transformAPI.localToGlobalRotation(1, 0, vec[2]);\n    thisvec = MATH.toUnitVec3(thisvec);\n    if (this.parent.transformAPI)\n    {\n        thisvec = this.parent.transformAPI.globalToLocalRotation(thisvec);\n    }\n    var thisangle = Math.atan2(thisvec[0], thisvec[1]);\n    var angle = targetangle - thisangle;\n\n    if (angle < -Math.PI)\n        angle *= -1;\n    else if (angle > Math.PI)\n    {\n        angle *= -1;\n    }\n    angle *= 10;\n    if (angle > 1) angle = 1;\n    if (angle < -1) angle = -1;\n    this.transformAPI.rotateZ(-angle * 1.7);\n\n    var upvec = this.children_by_name[\"50CalPivot\"].transformAPI.localToGlobalRotation(1, 0, 0);\n\n    if (this.parent.transformAPI)\n    {\n        upvec = this.parent.transformAPI.globalToLocalRotation(upvec);\n    }\n\n    var targetvec = MATH.subVec3(thispos, targetpos);\n    targetvec = MATH.toUnitVec3(targetvec);\n\n    var dot = MATH.dotVec3(upvec, targetvec)\n    if (dot > .001)\n    {\n        this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(Math.min(-0.5, -dot));\n    }\n    if (dot < -.001)\n    {\n        this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(Math.max(0.5, -dot));\n    }\n\n    if (Math.abs(angle) < .06 && Math.abs(dot) < .02)\n    {\n        this.activateState(\"engaging\");\n    }\n    this.lastTargetPos = targetpos;","parameters":[]},"userControlled":{"body":"var thisCam = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].id;\n    var isUserControlled = (this.userControlCounter > 0) && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0;\n\n   \n\n    return isUserControlled;","parameters":[]},"verifyCamera":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n                  var thisCam = this.children_by_name[\"50CalPivot\"].children_by_name[\"50 Cal Camera\"].id;\n                  if (!cam || cam.id != thisCam) return false;\n                  return true;  \n\n\n\n\n\n\n\n","parameters":[]},"verifyHit":{"body":"console.log(\"verifyHit method\");\n\n    // console.error('We have hit', hit);\n    if (name != \"Ocean-Collision\" && name != \"Terrain\")\n    {\n        this.numHits++;\n        var newObj = true;\n        for (var i in this.hits)\n        {\n            if (this.hits[i] === name)\n                newObj = false;\n        }\n        if (newObj)\n            this.hits.push(name); //or hit.node, or hit.node.DisplayName\n    }","parameters":["name"]},"xAPISend":{"body":"// console.log(\"Ending burst and sending xapi statement\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        this.started = false;\n        var dur = this.Scene.time - this.startT;\n\n        //3 - build objects for statement\n        var result = {\n            score:\n            {\n                max: this.roundsFired, // || 140,\n                raw: this.numHits, // || 45,\n                min: 0,\n                scaled: this.numHits / this.roundsFired, // || 0.321 //remove or 0.321 when in place\n            },\n            success: (this.hits.length > 0),\n            duration: \"PT\" + Math.floor(dur * 1000) / 1000 + \"S\", //a real end - start number of the burst\n            response: \"scaled is the hit/fired ratio\"\n        };\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n            \"https://sandbox.adlnet.gov/context/extensions/objectHit\": this.hits.toString() || \"broadside of barn\", //hit.node.DisplayName/hit.node.id\n            \"https://sandbox.adlnet.gov/context/extensions/userControlled\": \"\" + (this.isUserControlled || true),\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.targetID || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/shipStatus\": this.Scene.children_by_name[\"DDG51\"].engine || \"status error\",\n        };\n        // console.error(result);\n        var burstObject = {\n            id: sender.baseURL + \"objects/\" + (encodeURI(\"burst\" + (this.burstCount || 0))),\n            definition:\n            {\n                name:\n                {\n                    \"en-US\": encodeURI(\"burst\" + (this.burstCount || 0)),\n                },\n                type: sender.baseURL + \"activity/types/50CalBurst\",\n            },\n        };\n\n        //4 - Send it - inside if(ended),  inside if(sender)\n        sender.xAPISend(\"fired\", burstObject, \"Small Craft Action Team\", result, conExt);\n    } //if(sender)","parameters":["hits"]}},"properties":{"Ammo":390,"DisplayName":"Object4","EditorData":{"accuracy":{"displayname":"Accuracy","max":100,"min":0,"property":"accuracy","type":"slider"},"aiState":{"displayname":"AI Behavior","labels":["attack","wait"],"property":"activeState","type":"choice","values":["targeting","idle"]},"ammo":{"displayname":"Ammo","max":2500,"min":0,"property":"Ammo","type":"slider"}},"EditorDate":"","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Nov 24 2015 13:28:28 GMT-0500 (Eastern Standard Time)","_length":0.23,"accuracy":24,"activeState":"idle","burstCount":0,"controllingCamera":"SandboxCamera-vwf-sas-assets-06f4f9c2-N81a0a4b8Nc63b7c4e","fireSound":"/sas/assets/bdd66107","firecounter":1,"fuse":0,"hasSentStatement":false,"height":1.16,"isUserControlled":false,"keysDown":[],"lastTargetPos":null,"lastx":0.613684,"lasty":0.382741,"materialDef":{"alpha":0.993506,"ambient":{"b":0.51948,"g":0.51948,"r":0.51948},"blendMode":1,"color":{"a":0.993506,"b":0.51948,"g":0.51948,"r":0.51948},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"maxRange":400,"mouseDown":false,"owner":"ADLteam","playFireSound":"","reloadSound":"/sas/assets/ee04dc80","sourceAssetId":"06f4f9c2","started":false,"state":"ready","states":{"engaging":{"transitions":["tracking","idle","targeting"],"updateFunc":"engaging"},"idle":{"transitions":["targeting","idle"],"updateFunc":null},"reloading":{"transitions":["engaging","idle","targeting"],"updateFunc":"reloading"},"targeting":{"transitions":["tracking","idle","engaging"],"updateFunc":"targeting"},"tracking":{"transitions":["targeting","idle","engaging"],"updateFunc":"tracking"}},"targetID":null,"tracerDef":{"extends":"sphere2.vwf","methods":{"tick":{"body":" // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.life++;\n    if(this.life > 20)\n         vwf.deleteNode(this.id); ","parameters":[]}},"properties":{"DisplayName":"sphere1","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"isSelectable":false,"life":0,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"Anonymous_wpez3LO-WphZ6WWjAAAA","radius":0.2,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-13.75,-0.25,0,1],"type":"Primitive","visible":true},"random":{"c":1,"s0":0.206418,"s1":0.937666,"s2":0.393718},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs"},"transform":[-0.0430749990046024,0.998974025249481,-0.0138839995488524,0,-0.999072015285492,-0.0430979989469051,-0.00134700001217425,0,-0.00194400001782924,0.0138100003823638,0.999902009963989,0,33.7593383789063,-8.33167171478271,9.75810718536377,1],"type":"Primitive","userControlCounter":0,"visible":true,"width":0.14},"random":{"c":1545511,"s0":0.98945,"s1":0.754151,"s2":0.881259},"sequence":0,"name":"Nbb3feca0"},"Nc738f691":{"children":{"-sas-assets-895ba941-Nc738f691N36272026":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.995,0,0,0,0,0.995,0,0,0,0,0.995,0,0,0,-0.75,1]},"random":{"c":1,"s0":0.260434,"s1":0.348616,"s2":0.946274},"sequence":0,"name":"-sas-assets-895ba941-Nc738f691N36272026"},"-sas-assets-895ba941-Nc738f691N965930da":{"extends":"asset.vwf","properties":{"___assetServerOriginalID":"N965930da","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Thu Oct 29 2015 09:09:32 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/26a3ceb7"}],"metal":false,"reflect":0,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.995000004768372,0,0,0,0,0.995000004768372,0,0,0,0,0.995000004768372,0,0,0,-0.75,1]},"random":{"c":1,"s0":0.861636,"s1":0.335862,"s2":0.763019},"sequence":0,"source":"/sas/assets/eaa55fce","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-895ba941-Nc738f691N965930da"},"-sas-assets-895ba941-Nc738f691Naa7829c8":{"children":{"-sas-assets-895ba941-Nc738f691N67ae5f4f":{"children":{"-sas-assets-895ba941-Nc738f691N151b9a87":{"extends":"asset.vwf","properties":{"___assetServerOriginalID":"N151b9a87","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/26a3ceb7"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.57,"g":0.57,"r":0.57},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.017400000244379,0,-0.996849000453949,0,0,0.996999025344849,0,0,0.996847987174988,0,0.017400000244379,0,1,0,-2,1]},"random":{"c":1,"s0":0.448671,"s1":0.332659,"s2":0.490023},"sequence":0,"source":"/sas/assets/1872b62f","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-895ba941-Nc738f691N151b9a87"},"-sas-assets-895ba941-Nc738f691Ne6302cad":{"children":{"-sas-assets-895ba941-Nc738f691N1f45830d":{"extends":"SandboxParticleSystem.vwf","methods":{"explode":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                          this.counter = 40;\n                    this.visible = true;\n                    if (this.explodeSount)\n                        this.audioAPI.playSound(this.explodeSount);\n\n                    vwf.callMethod(this.id, \"reset\");                          \n\n\n\n\n\n\n\n\n","parameters":[]},"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                                 // The tick function is called 20 times every second.\n                    // Write code here to animate over time\n                    this.counter--\n                    if(this.counter < 0)\n                    {\n                        this.visible = false;   \n                    }                                 \n\n\n\n\n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"ParticleSystem2","___assetServerOriginalID":"N1f45830d","additive":false,"alphaTest":1,"counter":30,"damping":0.25,"depthTest":false,"endColor":[1,1,1,0],"endSize":4,"explodeSount":"","image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":-0.8,"maxAcceleration":[0,0,0],"maxLifeTime":137,"maxOrientation":11.4,"maxRate":10,"maxVelocity":[-0.022,1,0],"minLifeTime":137,"minOrientation":-20.3,"minSpin":-2.7,"minVelocity":[0.026,0,0],"owner":"ADLteam","particleCount":100,"renderDepth":0,"solver":"Euler","startColor":[0.639215,0.639215,0.639215,0.08],"startSize":0.76,"textureTiles":4,"transform":null,"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":1,"s0":0.981667,"s1":0.595058,"s2":0.67668},"sequence":0,"name":"-sas-assets-895ba941-Nc738f691N1f45830d"}},"extends":"sandboxGroup.vwf","methods":{"explode":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                      this.children_by_name.ParticleSystem2.explode();                      \n\n\n\n\n\n\n\n\n","parameters":[]},"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"Explosion","___assetServerOriginalID":"Ne6302cad","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"explodeSound":"/sas/assets/3c6b353e","explodeSound2":"/sas/assets/d714ebe1","fuse":10000000,"open":true,"owner":"ADLteam","transform":[0.00999999977648258,0.818332016468048,-0.572915971279144,0,-0.0142820002511144,0.573001980781555,0.818207979202271,0,0.999846994876862,0,0.0174519997090101,0,1.23424899578094,-0.018996000289917,4.84947776794434,1],"type":"Group"},"random":{"c":1248939,"s0":0.463987,"s1":0.046294,"s2":0.294398},"sequence":0,"name":"-sas-assets-895ba941-Nc738f691Ne6302cad"}},"extends":"box2.vwf","properties":{"DisplayName":"Barrel","___assetServerOriginalID":"N67ae5f4f","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.23,"height":3.19,"materialDef":{"alpha":1,"ambient":{"b":0.493506,"g":0.493506,"r":0.493506},"blendMode":1,"color":{"a":1,"b":0.493506,"g":0.493506,"r":0.493506},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1.5,1],"type":"Primitive","visible":false,"width":0.28},"random":{"c":1,"s0":0.809604,"s1":0.25392,"s2":0.654554},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-895ba941-Nc738f691N67ae5f4f"},"-sas-assets-895ba941-Nc738f691Nbfaae356":{"children":{"-sas-assets-895ba941-Nc738f691N3766c21c":{"extends":"http://vwf.example.com/node.vwf","properties":{"text":27151.658399},"random":{"c":1,"s0":0.891287,"s1":0.032647,"s2":0.443627},"sequence":0,"name":"-sas-assets-895ba941-Nc738f691N3766c21c"},"-sas-assets-895ba941-Nc738f691N96169b33":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"CommandDisplayLabel","___assetServerOriginalID":"N96169b33","font_size":24,"height":51,"left":0,"owner":"ADLteam","style":{"background-color":"red","border":"outset white 3px","font-weight":"bold","vertical-align":"middle"},"text":["5 Inch Engage"],"text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,70,4.522549,0,1],"visible":true,"visibleToAncestor":true,"width":294},"random":{"c":1,"s0":0.143934,"s1":0.316251,"s2":0.606364},"sequence":0,"name":"-sas-assets-895ba941-Nc738f691N96169b33"},"-sas-assets-895ba941-Nc738f691Nc2f33b2e":{"extends":"http://vwf.example.com/node.vwf","properties":{"text":19},"random":{"c":1,"s0":0.794515,"s1":0.246968,"s2":0.091277},"sequence":0,"name":"-sas-assets-895ba941-Nc738f691Nc2f33b2e"}},"extends":"SandboxCamera.vwf","methods":{"TAOCommand5In":{"body":"this.children_by_name.CommandDisplayLabel.visible = true;\n    if(data != \"toggleControl\") this.children_by_name.CommandDisplayLabel.text = data;","parameters":["data"]},"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                                 // The tick function is called 20 times every second.\n                    // Write code here to animate over time\n                    this.fov += (this.fovGoal - this.fov) / 5;                                 \n\n\n\n\n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"5 inch camera","___assetServerOriginalID":"Nbfaae356","far":10000,"fov":60,"fovGoal":60,"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[0,0.999997973442078,0,0,0,-9.99999997475243e-7,1,0,1,-9.99999997475243e-7,-9.99999997475243e-7,0,0.5,-0.00000199999999495049,-2.00000095367432,1]},"random":{"c":1,"s0":0.881991,"s1":0.977037,"s2":0.315142},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"-sas-assets-895ba941-Nc738f691Nbfaae356"}},"extends":"box2.vwf","properties":{"DisplayName":"5InPivot","___assetServerOriginalID":"Naa7829c8","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.55,"height":0.61,"materialDef":{"alpha":1,"ambient":{"b":0.493506,"g":0.493506,"r":0.493506},"blendMode":1,"color":{"a":1,"b":0.493506,"g":0.493506,"r":0.493506},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[-0.0896850004792213,0,0.995967984199524,0,0,1,0,0,-0.995971024036407,0,-0.0896850004792213,0,-9.99999997475243e-7,0,0.749997019767761,1],"type":"Primitive","visible":false,"width":1},"random":{"c":1,"s0":0.570447,"s1":0.810183,"s2":0.997119},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-895ba941-Nc738f691Naa7829c8"}},"continues":"/sas/assets/895ba941","extends":"box2.vwf","methods":{"TAOCommand5In":{"body":"//\", [\"5 Inch Engage\"], 0);\n    var command = args[0];\n\n    if (command == \"5 Inch Engage\")\n        this.activateState(\"targeting\");\n\n    if (command == \"5 Inch Disengage\")\n        this.activateState(\"idle\");\n\n    else if (command === \"toggleControl\")\n    {\n        this.toggleControl();\n    }","parameters":["args"]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.key.char == ' ') this.manualFiring = true;","parameters":["e"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.key.char == ' ') this.manualFiring = false;\n    if (e.key.char == 'T') this.activateState(\"targeting\");","parameters":["e"]},"_pointerDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = true;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].fovGoal = 10;\n    }","parameters":["e","d"]},"_pointerMove":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (!this.mouseDown) return;\n    var relx = e.position[0] - this.lastx;\n    var rely = e.position[1] - this.lasty;\n\n    this.lastx = e.position[0];\n    this.lasty = e.position[1];\n    this.transformAPI.rotateZ(-relx * 80);\n    this.children_by_name[\"5InPivot\"].transformAPI.rotateY(rely * 30);","parameters":["e","d"]},"_pointerUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = false;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].fovGoal = 60;\n    }","parameters":["e","d"]},"_pointerWheel":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    this.fuse += e.wheelDelta;","parameters":["e"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                         if (this.states[newState] && this.states[newState].transitions.indexOf(newState))\n                    {\n                        this.activeState = newState;\n                        console.log(\"transition to \" + newState);\n                    }\n                    else\n                    {\n                        console.log(\"invalid transition\");\n                    }         \n\n\n\n\n\n\n\n\n","parameters":["newState"]},"explode":{"body":"var def = this.explosionDef;\n    if (def.internal_val)\n        def = def.internal_val;\n    def = JSON.parse(JSON.stringify(def));\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = dist / 10;\n    // console.profile(\"launch\");\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":["pos","dist"]},"fire":{"body":"var origin = this.children_by_name[\"5InPivot\"].children_by_name[\"Barrel\"].transformAPI.getWorldPosition();\n    var dir = this.children_by_name[\"5InPivot\"].children_by_name[\"Barrel\"].transformAPI.localToGlobalRotation([0, 0, 1]);\n    var shake = [(this.random() - .5) / this.accuracy, (this.random() - .5) / this.accuracy, (this.random() - .5) / this.accuracy];\n    dir = Vec3.normalize(Vec3.add(shake, dir, []), []);\n    var hit = this.Scene.traceAPI.rayCast(origin, dir,\n    {\n        ignore: [findviewnode(this.id)]\n    });\n    this.audioAPI.playSound(this.fireSound, false, 700.0);\n    var dist = this.fuse + ((this.random() - .5) / this.accuracy);\n    if (hit && hit.distance < dist)\n    {\n        dist = hit.distance;\n    }\n\n    console.log(hit || \"miss\");\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var boom, objHit;\n        if (hit)\n        {\n            boom = true;\n            objHit = hit.node.DisplayName;\n        }\n        else\n        {\n            boom = false;\n            objHit = \"miss\";\n        }\n        var result = {\n            success: boom,\n            response: \"success = hit - t, or miss - f\"\n        };\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n            \"https://sandbox.adlnet.gov/context/extensions/position/\": origin || \"this is where the position goes\",\n            \"https://sandbox.adlnet.gov/context/extensions/target/\": this.targetID || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/objectHit/\": objHit,\n            \"https://sandbox.adlnet.gov/context/extensions/userControlled/\": this.isUserControlled,\n            \"https://sandbox.adlnet.gov/context/extensions/shipstatus/\": this.Scene.children_by_name['DDG51'].engine || 'status error',\n            \"https://sandbox.adlnet.gov/context/extensions/maxRounds/\": this.Ammo || 'one of these',\n            \"https://sandbox.adlnet.gov/context/extensions/roundNum/\": this.Ammo || 'will be right',\n        };\n        sender.xAPISend('fired', 'shell', this.DisplayName || \"TAO 5 Inch Gun\", result, conExt, null);\n    }\n\n    var point = Vec3.add(origin, Vec3.scale(dir, dist, []), []);\n    this.explode(point, dist);\n    this.children_by_name[\"5InPivot\"].children_by_name[\"Barrel\"].children_by_name[\"Explosion\"].explode();\n\n    var shake = [this.random() / 1 - .5, this.random() / 1 - .5, this.random() / 1 - .5]\n    this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].transformAPI.move(shake);\n    shake = [this.random() / 1 - .5, this.random() / 1 - .5, this.random() / 1 - .5]\n    this.children_by_name[\"5InPivot\"].transformAPI.move(shake);","parameters":[]},"firing":{"body":"if (this.Ammo > 0 && this.activeState == \"firing\")\n    {\n        var target = this.Scene.findNodeByID(this.targetID);\n        if (!target)\n        {\n            this.activateState(\"targeting\");\n            return;\n        }\n\n        if (this.firecounter < 0)\n        {\n            this.firecounter = 120;\n            this.Ammo -= 1;\n            this.fire();\n            this.activateState(\"targeting\");\n            return;\n        }\n\n        if (this.Ammo == 0)\n        {\n            this.activeState = \"reloading\";\n            this.firecounter = 170;\n            this.playSound(this.reloadSound, false, 10);\n        }\n    }\n    this.firecounter--;","parameters":[]},"manuelFire":{"body":"if (this.Ammo > 0 )\n    {\n       \n\n        if (this.firecounter < 0)\n        {\n            this.firecounter = 30;\n            this.Ammo -= 1;\n            this.fire();\n           \n            return;\n        }\n\n        if (this.Ammo == 0)\n        {\n            this.activeState = \"reloading\";\n            this.firecounter = 170;\n            this.playSound(this.reloadSound, false, 10);\n        }\n    }\n    this.firecounter--;","parameters":[]},"ready":{"body":"this.Scene.unbind(\"pointerMove\", this._pv,this);\n    this.Scene.unbind(\"pointerDown\", this._pd,this);\n    this.Scene.unbind(\"pointerUp\", this._pu,this);\n    this.Scene.unbind(\"pointerWheel\", this._pw,this);\n\n    this.Scene.unbind(\"keyDown\", this._kd,this);\n    this.Scene.unbind(\"keyUp\", this._ku,this);\n    var self = this;\n    this._pv = function(e, d)\n    {\n        self._pointerMove(e, d);\n    }\n    this._pd = function(e, d)\n    {\n        self._pointerDown(e, d);\n    }\n    this._pu = function(e, d)\n    {\n        self._pointerUp(e, d);\n    }\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d);\n    }\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d);\n    }\n    this._pw = function(e, d)\n    {\n        self._pointerWheel(e, d);\n    }\n    this.Scene.bind(\"pointerMove\", this._pv,this);\n    this.Scene.bind(\"pointerDown\", this._pd,this);\n    this.Scene.bind(\"pointerUp\", this._pu,this);\n    this.Scene.bind(\"pointerWheel\", this._pw,this);\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"reloading":{"body":"if (this.activeState == 'reloading')\n    {\n        this.firecounter--;\n        if (this.firecounter == 0)\n        {\n            this.Ammo = 30;\n            if(!this.userControlled())\n                this.activeState = 'firing';\n        }\n\n    }","parameters":[]},"targeting":{"body":"var near = Infinity;\n    var target = null;\n    var thispos = this.transformAPI.getPosition();\n   \n    for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var child = this.Scene.children[i];\n        if (child.id == this.id) continue;\n        if (child.parent.id == this.id) continue;\n        if (!child.transformAPI) continue;\n\n        var childpos = child.transformAPI.getPosition();\n        var dist = MATH.distanceVec3(thispos, childpos);\n        if (dist > 75 && dist < near && child.hostile && child.activeState !== 'defeated')\n        {\n            near = dist;\n            target = child;\n        }\n    }\n    if (target && near < (this.maxRange || 15000))\n    {\n        this.targetID = target.id;\n        this.activateState(\"tracking\");\n    }","parameters":[]},"tick":{"body":"this.userControlCounter--;\n    \n    var pos = this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].transformAPI.getPosition();\n    var goal = [2, 0, 0];\n    var move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);\n\n    var pos = this.children_by_name[\"5InPivot\"].transformAPI.getPosition();\n    var goal = [.0, 0, .75];\n    var move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"5InPivot\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);\n\n    if (this.userControlled())\n    {\n        if (this.manualFiring)\n            this.manuelFire();\n        return;\n    }\n\n    var state = this.states[this.activeState];\n    if (state)\n    {\n        if (state.updateFunc && this[state.updateFunc])\n            this[state.updateFunc]();\n\n    }","parameters":[]},"toggleControl":{"body":"if (disable) this.isUserControlled = false;\n    else this.isUserControlled = !this.isUserControlled;\n\n    var button = this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].children_by_name[\"Button1\"];\n    button.text = this.isUserControlled ? \"Enable AI\" : \"Take Control\";","parameters":["disable"]},"tracking":{"body":"this.firecounter--;\n    if (!this.targetID)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target || target.activeState == 'defeated')\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n\n    var thispos = this.transformAPI.getPosition();\n    var targetpos = target.transformAPI.getWorldPosition();\n\n    if (this.parent.transformAPI)\n    {\n        targetpos = this.parent.transformAPI.globalToLocal(targetpos);\n    }\n    if (!this.lastTargetPos)\n        this.lastTargetPos = targetpos;\n\n    var targetSpeed = MATH.subVec3(targetpos, this.lastTargetPos);\n    // targetSpeed = MATH.scaleVec3(targetSpeed, 20); //now in m/s\n\n    var vec = MATH.subVec3(thispos, targetpos);\n    var dist = MATH.lengthVec3(vec);\n    if (dist < .075)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    vec = MATH.subVec3(thispos, MATH.addVec3(targetpos, MATH.scaleVec3(targetSpeed, (dist / 10) + 1)));\n    this.fuse = MATH.lengthVec3(vec);\n    vec = MATH.toUnitVec3(vec);\n    var targetangle = Math.atan2(vec[0], vec[1]);\n    var thisvec = this.transformAPI.localToGlobalRotation(1, 0, vec[2]);\n    thisvec = MATH.toUnitVec3(thisvec);\n    if (this.parent.transformAPI)\n    {\n        thisvec = this.parent.transformAPI.globalToLocalRotation(thisvec);\n    }\n    var thisangle = Math.atan2(thisvec[0], thisvec[1]);\n    var angle = targetangle - thisangle;\n\n    if (angle < -Math.PI)\n        angle *= -1;\n    else if (angle > Math.PI)\n    {\n        angle *= -1;\n    }\n    angle *= 10;\n    if (angle > 1) angle = 1;\n    if (angle < -1) angle = -1;\n    this.transformAPI.rotateZ(-angle * .7);\n\n    var upvec = this.children_by_name[\"5InPivot\"].transformAPI.localToGlobalRotation(1, 0, 0);\n\n    if (this.parent.transformAPI)\n    {\n        upvec = this.parent.transformAPI.globalToLocalRotation(upvec);\n    }\n\n    var targetvec = MATH.subVec3(thispos, targetpos);\n    targetvec = MATH.toUnitVec3(targetvec);\n\n    var dot = MATH.dotVec3(upvec, targetvec)\n    if (dot > .01)\n    {\n        this.children_by_name[\"5InPivot\"].transformAPI.rotateY(Math.min(-0.2, -dot));\n    }\n    if (dot < -.01)\n    {\n        this.children_by_name[\"5InPivot\"].transformAPI.rotateY(Math.max(0.2, -dot));\n    }\n\n    if (Math.abs(angle) < .06 && Math.abs(dot) < .02 && this.firecounter < 1)\n    {\n        this.activateState(\"firing\");\n    }\n    this.lastTargetPos = targetpos;","parameters":[]},"userControlled":{"body":"var thisCam = this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].id;\n    return (this.userControlCounter > 0) && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0;","parameters":[]},"verifyCamera":{"body":"var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n    var thisCam = this.children_by_name[\"5InPivot\"].children_by_name[\"5 inch camera\"].id;\n    if (!cam || cam.id != thisCam) return false;\n    return true;","parameters":[]}},"properties":{"Ammo":19,"DisplayName":"5 inch gun base","EditorData":{"accuracy":{"displayname":"Accuracy","max":50,"min":0,"property":"accuracy","type":"slider"},"aiState":{"displayname":"AI Behavior","labels":["attack","wait"],"property":"activeState","type":"choice","values":["targeting","idle"]},"ammo":{"displayname":"Ammo","max":100,"min":0,"property":"Ammo","type":"slider"},"fuse":{"displayname":"Fuse","max":300,"min":1,"property":"fuse","type":"slider"}},"EditorDate":"","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:52:20 GMT-0500 (Eastern Standard Time)","_length":1.78,"accuracy":22,"activeState":"idle","controllingCamera":"SandboxCamera-vwf-sas-assets-895ba941-Nc738f691Nbfaae356","explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"fireSound":"/sas/assets/36481324","firecounter":-55,"fuse":172,"height":1.25,"isUserControlled":false,"keysDown":[],"lastTargetPos":[94.412538,-553.221242,3.674684],"lastx":0.533157,"lasty":0.496081,"manualFiring":false,"materialDef":{"alpha":1,"ambient":{"b":0.493506,"g":0.493506,"r":0.493506},"blendMode":1,"color":{"a":1,"b":0.493506,"g":0.493506,"r":0.493506},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"mouseDown":false,"owner":"ADLteam","reloadSound":"/sas/assets/ee04dc80","sourceAssetId":"895ba941","state":"ready","states":{"engaging":{"transitions":["tracking","idle","targeting"],"updateFunc":"firing"},"firing":{"transitions":["tracking","idle","targeting"],"updateFunc":"firing"},"idle":{"transitions":["targeting","idle"],"updateFunc":null},"targeting":{"transitions":["tracking","idle","engaging"],"updateFunc":"targeting"},"tracking":{"transitions":["targeting","idle","engaging"],"updateFunc":"tracking"}},"targetID":"-sas-assets-1ad6adad-N560f3127","tracerDef":{"extends":"sphere2.vwf","methods":{"tick":{"body":" // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.life++;\n    if(this.life > 20)\n         vwf.deleteNode(this.id); ","parameters":[]}},"properties":{"DisplayName":"sphere1","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"isSelectable":false,"life":0,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"Anonymous_wpez3LO-WphZ6WWjAAAA","radius":0.2,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-13.75,-0.25,0,1],"type":"Primitive","visible":true},"random":{"c":1,"s0":0.206418,"s1":0.937666,"s2":0.393718},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs"},"transform":[-0.0606129989027977,1.19677603244781,-0.0166500005871058,0,-1.19689297676086,-0.060639999806881,-0.00148900004569441,0,-0.00232900003902614,0.016550999134779,1.19831001758575,0,53.0107307434082,1.40761303901672,8.91089725494385,1],"type":"Primitive","userControlCounter":0,"visible":true,"width":1.31},"random":{"c":275477,"s0":0.525739,"s1":0.157601,"s2":0.932},"sequence":0,"name":"Nc738f691"},"Nfeb91833":{"children":{"-sas-assets-13a0f08e-Nfeb91833N6db4971e":{"extends":"sphere2.vwf","properties":{"DisplayName":"sphere1","___assetServerOriginalID":"N6db4971e","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-1,0,0,0,-9.99999997475243e-7,-0.973396003246307,-0.224727004766464,0,0,-0.224727004766464,0.973394989967346,0,0,0,0,1],"type":"Primitive","visible":false},"random":{"c":1,"s0":0.37912,"s1":0.887289,"s2":0.743462},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"-sas-assets-13a0f08e-Nfeb91833N6db4971e"},"-sas-assets-13a0f08e-Nfeb91833N70033554":{"children":{"-sas-assets-13a0f08e-Nfeb91833N3229eadc":{"children":{"-sas-assets-13a0f08e-Nfeb91833N2b6240a":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"N2b6240a","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0.949754,1.5625,0,1]},"random":{"c":1,"s0":0.48207,"s1":0.547828,"s2":0.777587},"sequence":0,"name":"-sas-assets-13a0f08e-Nfeb91833N2b6240a"}},"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"N3229eadc","transform":[1,0,0,0,0,1,0,0,0,0,1,0,1.603125,4.291735,0,1]},"random":{"c":1,"s0":0.311829,"s1":0.478527,"s2":0.922744},"sequence":0,"name":"-sas-assets-13a0f08e-Nfeb91833N3229eadc"},"-sas-assets-13a0f08e-Nfeb91833N390b8ea4":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"N390b8ea4","transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,55.900001,1,1]},"random":{"c":1,"s0":0.083561,"s1":0.189919,"s2":0.077091},"sequence":0,"name":"-sas-assets-13a0f08e-Nfeb91833N390b8ea4"},"-sas-assets-13a0f08e-Nfeb91833Na64f00c":{"extends":"http://vwf.example.com/node.vwf","properties":{"___assetServerOriginalID":"Na64f00c","transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,28.45,1,1]},"random":{"c":1,"s0":0.910514,"s1":0.739163,"s2":0.65413},"sequence":0,"name":"-sas-assets-13a0f08e-Nfeb91833Na64f00c"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N5111c16a":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"backFull\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"Engine Back Full\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"BackButton","___assetServerOriginalID":"N5111c16a","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset grey 3px","border-style":"outset","color":"red","font-size":"12px","font-weight":"bold"},"text":"Back","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,55.900001,1,1],"visible":true,"width":90},"random":{"c":1,"s0":0.114834,"s1":0.635383,"s2":0.534727},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N5111c16a"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N58f296e0":{"children":{"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N35c0d585":{"extends":"http://vwf.example.com/image.vwf","properties":{"DisplayName":"SteeringWheelImage","___assetServerOriginalID":"N35c0d585","height":271,"left":0,"owner":"ADLteam","src":"/sas/assets/26a16a9e","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0.949754,1.5625,0,1],"visible":true,"width":400},"random":{"c":1,"s0":0.36371,"s1":0.142131,"s2":0.41288},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N35c0d585"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"MainPanel","___assetServerOriginalID":"N58f296e0","background_color":[1,0,0],"background_visible":false,"border_color":[1,1,1],"border_width":0,"height":278,"left":0,"owner":"ADLteam","style":{"border":"inset grey 1px"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1.603125,4.291735,0,1],"visible":true,"width":408},"random":{"c":1,"s0":0.846163,"s1":0.873832,"s2":0.822529},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N58f296e0"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N6444e6eb":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"rudderCenter\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"disengaged\", \"Rudder Idle\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Rudder Idle","___assetServerOriginalID":"N6444e6eb","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset white 3px","border-radius":"50%","border-style":"outset","color":"black","font-size":"12px","font-weight":"bold"},"text":"Rudder Idle","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,11,43,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.024439,"s1":0.67252,"s2":0.67696},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N6444e6eb"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N762225da":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"hardRight\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"Rudder Right\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"RudderRightButton","___assetServerOriginalID":"N762225da","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset grey 3px","border-radius":"50%","border-style":"outset","color":"green","font-size":"12px","font-weight":"bold"},"text":"Rudder Right","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,32,85,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.229955,"s1":0.75252,"s2":0.03151},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N762225da"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N7dbb5d5b":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"engineIdle\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"disengaged\", \"Engine Idle\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"IdleButton","___assetServerOriginalID":"N7dbb5d5b","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset grey 3px","border-style":"outset","color":"black","font-size":"12px","font-weight":"bold"},"text":"Idle","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,47,1,1],"visible":true,"width":90},"random":{"c":1,"s0":0.687573,"s1":0.287905,"s2":0.875678},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554N7dbb5d5b"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554Ne63ee92c":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"hardLeft\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"Rudder Left\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"RudderLeftButton","___assetServerOriginalID":"Ne63ee92c","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset grey 3px","border-radius":"50%","border-style":"outset","color":"red","font-size":"12px","font-weight":"bold"},"text":"Rudder Left","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,2,85,1,1],"visible":true,"width":100},"random":{"c":1,"s0":0.816802,"s1":0.103907,"s2":0.174802},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554Ne63ee92c"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554Ne73b9040":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"aheadHalf\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"Engine Ahead Half\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"AheadHalfButton","___assetServerOriginalID":"Ne73b9040","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset grey 3px","border-style":"outset","color":"green","font-size":"12px","font-weight":"bold"},"text":"Ahead Half","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,38,1,1],"visible":true,"width":90},"random":{"c":1,"s0":0.578653,"s1":0.534544,"s2":0.070698},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554Ne73b9040"},"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554Nef06867c":{"events":{"pointerClick":{"body":"this.broadcast(\"command\", [\"aheadFull\"], 0);\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"engaged\", \"Engine Ahead Full\", \"Officer Of The Deck\", null);\n    }","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"AheadFullButton","___assetServerOriginalID":"Nef06867c","height":25,"left":0,"owner":"ADLteam","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border":"outset grey 3px","border-style":"outset","color":"blue","font-size":"12px","font-weight":"bold"},"text":"Ahead Full","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,28.45,1,1],"visible":true,"width":90},"random":{"c":1,"s0":0.407993,"s1":0.704333,"s2":0.377229},"sequence":0,"name":"-sas-assets-546b7d66-sas-assets-13a0f08e-Nfeb91833N70033554Nef06867c"}},"continues":"/sas/assets/546b7d66","extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"OodControlPanel","___assetServerOriginalID":"N70033554","___sourceAssetTimestamp":"Fri Nov 06 2015 12:54:10 GMT-0500 (Eastern Standard Time)","background_color":[0.4,0.4,0.4],"background_visible":true,"border_color":[1,1,1],"height":304,"left":0,"owner":"ADLteam","sourceAssetId":"546b7d66","style":{"background":"linear-gradient(to bottom, rgba(255,255,255,0) -1%,rgba(255,255,255,0) 0%,rgba(255,255,255,0.99) 90%,rgba(255,255,255,0.99) 100%)","border-style":"outset"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,66.8125,64.82691,0,1],"visible":true,"visibleToAncestor":true,"visibleToCamera":"-sas-assets-13a0f08e-Nfeb91833","width":500},"random":{"c":1,"s0":0.831386,"s1":0.519273,"s2":0.246618},"sequence":0,"name":"-sas-assets-13a0f08e-Nfeb91833N70033554"},"-sas-assets-13a0f08e-Nfeb91833Nc18c840f":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"CommandDisplayLabel","___assetServerOriginalID":"Nc18c840f","font_size":24,"height":51,"left":0,"owner":"ADLteam","style":{"background-color":"yellow","border":"outset white 3px","font-weight":"bold","vertical-align":"middle"},"text":"Command","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,70.074073,18.675682,0,1],"visible":false,"visibleToAncestor":true,"width":294},"random":{"c":1,"s0":0.791792,"s1":0.423837,"s2":0.640438},"sequence":0,"name":"-sas-assets-13a0f08e-Nfeb91833Nc18c840f"}},"continues":"/sas/assets/13a0f08e","extends":"SandboxCamera.vwf","methods":{"TAOCommandRadioWarn":{"body":"\n\n\n   this.children_by_name.CommandDisplayLabel.visible = true;\n      this.children_by_name.CommandDisplayLabel.text = data; \n\n","parameters":["data"]},"activateState":{"body":"var oldState = this.states[this.activeState];\n    if (oldState)\n    {\n        if (oldState.outFunc && this[oldState.outFunc])\n            this[oldState.outFunc]();\n    }\n    var newState = this.states[state];\n    if (newState && this[newState.inFunc])\n        this[newState.inFunc]()\n    this.activeState = state;","parameters":["state"]},"deinitialize":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                     this.Scene.unbind('pointerMove', this.mousemove);\n                    this.Scene.unbind('pointerDown', this.mousepress);\n                    this.Scene.unbind('pointerUp', this.mouseup);\n                    this.Scene.unbind('pointerWheel', this.mousewheel);\n                    this.Scene.unbind('keyDown', this.keydown);\n                    this.Scene.unbind('keyUp', this.keyup);     \n\n\n\n\n\n\n\n\n","parameters":[]},"hostileWithin":{"body":"for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var node = this.Scene.children[i];\n        if (node.hostile)\n        {\n            var pos = this.parent.transformAPI.getWorldPosition();\n            var hostilePos = node.transformAPI.getWorldPosition();\n            if (Vec3.distance(pos, hostilePos) < meters)\n                return true;\n        }\n    }\n    return false;","parameters":["meters"]},"idle":{"body":"if (this.hostileWithin(1000))\n    {\n        \n        this.activateState(\"outRun\");\n    }","parameters":[]},"outRun":{"body":"this.broadcast(\"command\", [\"aheadFull\"], 0);\n    this.broadcast(\"command\", [\"rudderCenter\"], 0);\n    if (this.hostileWithin(500))\n    {\n\n        this.activateState(\"targeting\");\n    }","parameters":[]},"ready":{"body":"this.Scene.unbind('pointerMove', this.mousemove,this);\n    this.Scene.unbind('pointerDown', this.mousepress,this);\n    this.Scene.unbind('pointerUp', this.mouseup,this);\n    this.Scene.unbind('pointerWheel', this.mousewheel,this);\n    this.Scene.unbind('keyDown', this.keydown,this);\n    this.Scene.unbind('keyUp', this.keyup,this);\n    var self = this;\n    this.mousemove = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        var rel_x = self.last_x - e.position[0];\n        var rel_y = self.last_y - e.position[1];\n        self.rotateCam(rel_x * 3, rel_y * 3);\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mousewheel = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        self.zoom += e.wheelDelta;\n    }\n    this.mousepress = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        self.mousedown = true;\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mouseup = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        self.mousedown = false;\n    }\n    this.keydown = function(e, d)\n    {\n        return;\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement, [0, 1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement, [0, -1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement, [1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement, [-1, 0, 0], []);\n    }\n    this.keyup = function(e, d)\n    {\n        return;\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement, [0, -1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement, [0, 1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement, [-1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement, [1, 0, 0], []);\n    }\n\n    this.Scene.bind('pointerMove', this.mousemove,this);\n    this.Scene.bind('pointerDown', this.mousepress,this);\n    this.Scene.bind('pointerUp', this.mouseup,this);\n    this.Scene.bind('pointerWheel', this.mousewheel,this);\n    this.Scene.bind('keyDown', this.keydown,this);\n    this.Scene.bind('keyUp', this.keyup,this);","parameters":[]},"rotateCam":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n             var xrot = Quaternion.fromAngleAxis(rel_x, [0, 0, 1], []);\n                var offset = this.offset;\n                offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(xrot, []), offset, []);\n\n                var side = Vec3.cross(offset, [0, 0, 1], []);\n                var yrot = Quaternion.fromAngleAxis(rel_y, side, []);\n                offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(yrot, []), offset, []);\n                this.offset = offset; \n\n\n\n\n\n\n","parameters":["rel_x","rel_y"]},"targeting":{"body":"this.broadcast(\"command\", [\"aheadHalf\"], 0);\n    this.broadcast(\"command\", [\"hardRight\"], 0);","parameters":[]},"tick":{"body":"if (this.userControlled())\n    {\n\n   \n    \n    var pos = Vec3.add(this.transformAPI.getPosition(), this.offset, []);\n\n    //this.transformAPI.setPosition(MATH.addVec3(pos, offset));\n    this.transformAPI.lookat(pos, '', '-Y', 'Z');\n    var movement = this.movement;\n    movement = this.transformAPI.localToGlobalRotation(movement);\n    movement[2] = 0;\n    if (MATH.lengthVec3(movement) == 0) return;\n    movement = Vec3.normalize(movement, []);\n    this.transformAPI.move(movement[0] / 10, movement[1] / 10, 0);\n         return;\n    }\n    else\n    {\n    var state = this.states[this.activeState];\n     if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }\n    }","parameters":[]},"userControlled":{"body":"if (this.Scene.clientAPI.getClientForCamera(this.id).length > 0)\n        return true;\n    return false;","parameters":[]},"verifyCamera":{"body":"var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.id) return false;\n    return true;","parameters":[]}},"properties":{"":null,"DisplayName":"OOD","EditorData":{"movement":{"displayname":"Movement","property":"movement","type":"vector"},"offset":{"displayname":"Offset","property":"offset","type":"vector"}},"___assetServerOriginalID":"Na138c25e","___sourceAssetTimestamp":"Tue Nov 24 2015 13:25:46 GMT-0500 (Eastern Standard Time)","activeState":"idle","far":10000,"last_x":0.641578,"last_y":0.346633,"mouseDown":0,"mousedown":0,"movement":[0,0,0],"offset":[0.068618,-0.981888,-0.176602],"owner":"ADLteam","sourceAssetId":"13a0f08e","states":{"idle":{"inFunc":null,"outFunc":null,"updateFunc":"idle"},"outRun":{"inFunc":null,"outFunc":null,"updateFunc":"outRun"},"targeting":{"inFunc":null,"outFunc":null,"updateFunc":"targeting"}},"transform":[-0.999966979026794,0.00815400015562773,0.00185600004624575,0,-0.00836499966681004,-0.97503799200058,-0.221884995698929,0,0,-0.22189299762249,0.975071012973785,0,27.2442932128906,-6.22501707077026,17.4671077728271,1],"worldTransform":[-0.99996018409729,0.00813157390803099,0.00391236087307334,0,-0.0088237076997757,-0.971878707408905,-0.235312268137932,0,0.00188520282972604,-0.235339164733887,0.971911132335663,0,63.2499389648438,11.9999771118164,37.7499504089355,1],"zoom":"333333333333333333333333-3-3-3-3-333333-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3-3"},"random":{"c":1,"s0":0.252087,"s1":0.732919,"s2":0.607417},"sequence":0,"name":"Nfeb91833"}},"continues":"/sas/assets/874eb90b","extends":"box2.vwf","methods":{"activateState":{"body":"\n    var currentState = this.states[this.activeState];\n    if (currentState.transitions && currentState.transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        newState = this.states[newState];\n        if (!newState)\n        {\n            console.log('state does not exist');\n        }\n        if (newState.transitionFunc && this[newState.transitionFunc])\n        {\n            this[newState.transitionFunc]();\n        }\n\n    }\n    else\n    {\n        console.log('invalid transition');\n    }    \n","parameters":["newState"]},"buoyancy":{"body":"\n        var waterDepth = 20;\n    var hullThick = 2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 2;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n        //this.physicsAPI.addForceAtCenter(this.transformAPI.localToGlobal(0, 100, 0));\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 10;\n        vel[1] *= 1.0 - depth / 3;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }        \n","parameters":[]},"command":{"body":"\n    var command = args[0];\n    if (command == \"aheadFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadFull\";\n    }\n    if (command == \"backFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"backFull\";\n    }\n    if (command == \"aheadHalf\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadHalf\";\n    }\n    if (command == \"engineIdle\")\n    {\n        this.activateState('navigating');\n        this.engine = \"idle\";\n    }\n    if (command == \"hardRight\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardRight\";\n    }\n    if (command == \"hardLeft\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardLeft\";\n    }\n    if (command == \"rudderCenter\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"center\";\n    }    \n","parameters":["args"]},"hit":{"body":"if (force > 5) //cannot be hurt by 50 cal\n    {\n\n        this.children_by_name.Barry1.materialDef.layers[0].src = this.damageTexture;\n        this.broadcast(\"shiphit\",[],0);\n        var sender = this.Scene.children_by_name.xAPISender;\n        if (sender)\n        {\n            sender.xAPISend(\"is-damaged\", this.DisplayName, \"TacticalActionOfficer\", null);\n        }\n    }","parameters":["pos","force"]},"movement":{"body":"var torque = [0, 0, 0];\n    var force = [0, 0, 0];\n    if (this.rudder == 'hardLeft')\n    {\n        torque[2] = .0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'hardRight')\n    {\n        torque[2] = -.0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'center')\n    {\n\n    }\n    if (this.engine == \"aheadFull\")\n    {\n        force[0] = 25 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"aheadHalf\")\n    {\n        force[0] = 12 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"idle\")\n    {\n\n    }\n    if (this.engine == 'backFull')\n    {\n        force[0] = -12 * this.physicsAPI.getMass();\n    }\n    torque[2] *= force[0];\n    force = this.transformAPI.localToGlobalRotation(force);\n    this.physicsAPI.addForceAtCenter(force);\n    this.physicsAPI.addTorque(torque);","parameters":[]},"tick":{"body":"this.audioAPI.playSound(\"/sas/assets/c46fb970\", true, 200, false);\n    this.audioAPI.playSound(\"/sas/assets/50af929c\", true, 200, false);\n    var state = this.states[this.activeState];\n    if (state)\n    {\n\n        if (state.movement)\n            this.movement();\n        if (state.buoyancy)\n            this.buoyancy();\n        if (state.updateFunc && this[state.updateFunc])\n            this[state.updateFunc]()\n\n    }","parameters":[]}},"properties":{"DisplayName":"DDG51","EditorData":{"engine":{"displayname":"engine","labels":["Ahead Full","Ahead Half","Back","Idle"],"property":"engine","type":"choice","values":["aheadFull","aheadHalf","back","idle"]},"hullThick":{"displayname":"Hull Thickness","max":25,"min":0,"property":"hullThick","type":"slider"},"rudder":{"displayname":"rudder","labels":["Hard Right","Hard Left","center"],"property":"rudder","type":"choice","values":["hardRight","hardLeft","back"]},"state":{"displayname":"state","labels":["idle","navigating"],"property":"activeState","type":"choice","values":["idle","navigating"]}},"___physics_activation_state":4,"___physics_angular_velocity":[0.007863,-0.002195,0.000012],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[0,-0.000041,-0.002857],"___physics_mass":80051.2,"___physics_velocity_angular":[0.009149,0.001847,0.000011],"___physics_velocity_linear":[0,0,-0.000011],"___sourceAssetTimestamp":"Wed Nov 18 2015 11:58:33 GMT-0500 (Eastern Standard Time)","_length":135,"activeState":"navigating","counter":15002,"damageTexture":"/sas/assets/dde67e10","ditorData":"","engine":"idle","height":10,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":0,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":true,"wireframe":false},"owner":"ADLteam","physicsAPI":{},"rudder":"back","sourceAssetId":"874eb90b","states":{"idle":{"buoyancy":true,"movement":false,"transitionFunc":null,"transitions":["navigating"],"updateFunc":null},"navigating":{"buoyancy":true,"movement":true,"transitionFunc":null,"transitions":["idle"],"updateFunc":null}},"transform":[0.999997019767761,-0.00000399999998990097,-0.00194400001782924,0,0.0000290000007225899,0.99990302324295,0.0138100003823638,0,0.00193999998737127,-0.0138119999319315,0.999902009963989,0,35.9720230102539,18.4657554626465,20.4234828948975,1],"type":"Primitive","visible":false,"width":20,"worldPosition":[35.9720230102539,18.4657554626465,20.4234828948975],"worldTransform":[0.999997019767761,-0.00000399999998990097,-0.00194400001782924,0,0.0000290000007225899,0.99990302324295,0.0138100003823638,0,0.00193999998737127,-0.0138119999319315,0.999902009963989,0,35.9720230102539,18.4657554626465,20.4234828948975,1]},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"name":"N37ac1079"},{"children":{"-sas-assets-1ad6adad-N560f3127N83e3ec00":{"extends":"box2.vwf","properties":{"DisplayName":"WaterBlocker","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":0.18,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":0,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":11,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1],"type":"Primitive","visible":false,"width":2.18},"random":{"c":1,"s0":0.198099,"s1":0.027581,"s2":0.352169},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N560f3127N83e3ec00"},"-sas-assets-1ad6adad-N560f3127N8c4837dd":{"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.0861850008368492,-0.0225579999387264,0.996020019054413,0,0.00100100005511194,-0.999741971492767,-0.022732000797987,0,0.996276021003723,0.00295499991625547,-0.0861409977078438,0,1,0,1.5,1],"type":"Primitive","visible":false,"width":1.36,"worldTransform":[-0.0438292808830738,-0.0900124162435532,0.994971752166748,0,-0.980116665363312,-0.189041957259178,-0.0602777674794197,0,0.193517342209816,-0.977832496166229,-0.0799390375614166,0,263.380981445313,-2051.23388671875,22.2549629211426,1]},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N560f3127N8c4837dd"},"-sas-assets-1ad6adad-N560f3127N8cf5a8e2":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.99999997475243e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380481854081154,-0.00112601777072996,0.999275028705597,0,263.842651367188,-2053.19555664063,20.0186958312988,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"-sas-assets-1ad6adad-N560f3127N8cf5a8e2"},"-sas-assets-1ad6adad-N560f3127N958e2662":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,1,-0.000001,0,-1.000001,-0.000001,-0.000001,0,-0.000001,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.961765,"s1":0.72625,"s2":0.118456},"sequence":0,"name":"-sas-assets-1ad6adad-N560f3127N958e2662"},"-sas-assets-1ad6adad-N560f3127Ned0c4c0a":{"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(args);","parameters":["args"]}},"properties":{"DisplayName":"3D_model","___assetServerOriginalID":"Ned0c4c0a","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 13:10:22 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-9.99999997475243e-7,100.399002075195,0,0,-100.301002502441,-9.99999997475243e-7,0,0,0,0,100.294998168945,0,0.5,0,-0.5,1],"worldPosition":[263.363037109375,-2050.74047851563,20.2533874511719]},"random":{"c":1,"s0":0.434828,"s1":0.189991,"s2":0.484111},"sequence":0,"source":"/sas/assets/a31ba113","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-1ad6adad-N560f3127Ned0c4c0a"}},"continues":"/sas/assets/1ad6adad","extends":"box2.vwf","methods":{"FACMovementDirection":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                // set equal to \"\" after adding calculations:\n                                var movement = \"closing\";\n                                // Perform calculations to determine approaching or moving away states:\n                                //     movement = \"closing\" if distance to target is getting smaller\n                                //     movement = \"none\" if distance to target hasn't changed\n                                //     movement = \"increasing\" if distance to target is getting larger\n                                switch (movement)\n                                {\n                                    case \"closing\":\n                                        this.currentState = this.states[\"approaching\"];\n                                        return \"approaching\";\n                                    case \"none\":\n                                        this.currentState = this.states[\"idle\"];\n                                        return \"idle\";\n                                    case \"increasing\":\n                                        this.currentState = this.states[\"moving_away\"];\n                                        return \"moving_away\";\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this.currentState === null)\n    {\n        console.log(\"Set initial state\");\n        this.currentState = this.states[\"approaching\"];\n    }\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }","parameters":["e","d"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        if (this.rockets > 0)\n        {\n            this.activateState(\"fire_rocket\");\n            console.log(\"rockets: \" + this.rockets);\n\n            console.log(\"Broadcasting leader fire...\");\n            // this.broadcast(\"facLeaderFire\", [], 500);\n        }\n    }","parameters":["e","d"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                //console.log(\"activateState\");\n                                var state = this.states[statename];\n\n                                if (this.currentState.transitions.indexOf(statename) == -1)\n                                {\n                                    console.log(\"invalid transition!\");\n                                    return;\n                                }\n\n                                if (state.transitionFunction)\n                                    this[state.transitionFunction](this.currentState);\n\n                                this.currentState = state;\n\n                                for (var i in state.properties)\n                                {\n                                    console.log(state.properties[i]);\n                                    this[i] = state.properties[i];\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"aiAttack":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n        if (MATH.lengthVec3(targetPos) > attackRange)\n        {\n            if (targetPos[1] > 10)\n                this.doTurn('right')\n            else if (targetPos[1] < -10)\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n    }","parameters":[]},"aiCircle":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] > 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circlecc\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n    }","parameters":[]},"aiCirclecc":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circle\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n\n    }","parameters":[]},"aiDefeated":{"body":"console.log(\"aiDefeated\");","parameters":[]},"aiFire":{"body":"var attachRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n\n        if (targetPos[1] > 0)\n            this.doTurn('right')\n        else\n            this.doTurn('left');\n\n        if (Math.abs(targetPos[1]) < .2)\n        {\n            console.log(\"FIRE!\");\n            this.launchMissile();\n            this.playMissileLaunch();\n            this.rockets = this.rockets - 1;\n            if(this.rockets <= 0)\n            {\n                this.aiActiveState = \"flee\";\n            }\n            else if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiFlee":{"body":"var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n\n        if (targetPos[1] < 10)\n            this.doTurn('right')\n        else if (targetPos[1] > -10)\n            this.doTurn('left');\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiMoveAway":{"body":"var attackRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[1] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n       \n        this.doMoveForward();\n        \n    }","parameters":[]},"aiWait":{"body":"console.log(\"aiWait\");","parameters":[]},"approachingTransition":{"body":"//console.log(\"approachingTransition\");\n    this.approachingUpdate(this.currentState);","parameters":[]},"approachingUpdate":{"body":"//console.log(\"approachingUpdate\");\n    this.currentState = this.states[\"approaching\"];","parameters":["statename"]},"collidingTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingTransition\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"collidingUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingUpdate\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"consumeFuel":{"body":"if (this.fuel <= 0.0)\n    {\n        this.currentState = this.states[\"out_of_gas\"];\n    }\n    else\n    {\n        this.fuel = this.fuel - this.fuelConsumptionRate;\n        //console.log(\"fuel: \" + this.fuel);\n    }","parameters":[]},"createExplosion":{"body":"console.log(\"explosion!!\");\n    var def = this.explosionDef;\n    var pos = this.transformAPI.getWorldPosition();\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = 1;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":[]},"defeatedTransition":{"body":"console.log(\"defeatedTransition\");\n    this.currentState = this.states[\"defeated\"];","parameters":[]},"defeatedUpdate":{"body":"console.log(\"defeatedUpdate\");\n    this.currentState = this.states[\"defeated\"];\n    this.audioAPI.stopSound(\"/sas/assets/c253157d\", true, 200);","parameters":["statename"]},"destroyFAC":{"body":"var def = this.destroyedFACDef;\n    var val1 = this.randomIntFromInterval(1, 360);\n    var val2 = this.randomIntFromInterval(1, 90);\n    var val3 = this.randomIntFromInterval(1, 360);\n    console.log(\"FAC blown up\");\n    this.currentState = this.states[\"defeated\"];\n    this.activeState = \"defeated\";\n    this.aiActiveState = \"defeated\";\n    vwf.createChild(this.id, GUID(), _DataManager.getCleanNodePrototype(def), null);\n    if (this.isSlave)\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(val1, val2, val3);\n    else\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(180, 45, 90);\n    this.children_by_name.WaterBlocker.visible = false;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-defeated\", this.DisplayName + this.id, \"FastAttackCraft\", null);\n    }","parameters":[]},"doAIBehaviors":{"body":"var pos = this.transformAPI.getWorldPosition();\n    //dont' do the AI code if it's not at the water surface\n    if (Math.abs(pos[2] - 20) > 2)\n        return;\n    var state = this.aiStates[this.aiActiveState];\n    console.log(this.aiActiveState);\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doBuoyancy":{"body":"var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }","parameters":[]},"doMoveBackward":{"body":"var mass = this.physicsAPI.getMass();\n    this.consumeFuel();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doMoveForward":{"body":"this.consumeFuel();\n    var mass = this.physicsAPI.getMass();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doTurn":{"body":"var direction = 1;\n    var mass = this.physicsAPI.getMass();\n    if (dir == 'left')\n    {\n        direction = 1;\n    }\n    if (dir == 'right')\n    {\n        direction = -1;\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0]) / 7);\n\n    this.physicsAPI.addTorque(0, 0, direction * speedTorqueFactor * mass * 3);\n    var force = this.transformAPI.localToGlobal(direction * speedTorqueFactor * mass, 0, 0);\n    this.physicsAPI.addTorque(force);","parameters":["dir"]},"doUserInput":{"body":"if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        this.doMoveForward();\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        this.doMoveBackward();\n    }\n\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n        this.doTurn('left');\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n         this.doTurn('right');\n    }\n    if (this._keysDown.indexOf(\" \") !== -1)\n    {\n        if (this.rockets > 0)\n        {\n            this.currentState = this.states[\"fire_rocket\"];\n        }\n        else\n        {\n            this.currentState = this.states[\"moving_away\"];\n        }\n    }","parameters":[]},"facPeerInput":{"body":"//console.log(\"facPeerInput Received: \" + args);\n   \n    if (args[1] == this.id) return;\n\n    /*if (this.facPeerMovementCandidate.length > 0)\n    {\n        var current_pos = this.transformAPI.getPosition();\n        var last_pos = this.facPeerMovementCandidate;\n        var incoming_pos = args[0];\n\n        if (MATH.distanceVec3(current_pos, incoming_pos) < MATH.distanceVec3(current_pos, last_pos))\n        {\n            this.facPeerMovementCandidate = args;\n        }\n    }\n    else\n    {*/\n    this.facPeerMovementCandidate = args;\n    //}","parameters":["args"]},"fire_rocketTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketTransition\");\n                                this.fire_rocketUpdate(this.currentState);    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"fire_rocketUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketUpdate\");\n                                this.launchMissile();\n                                this.playMissileLaunch();\n                                this.rockets = this.rockets - 1;\n                                if (this.rockets > 0)\n                                {\n                                    this.currentState = this.states[\"fire_rocket\"];\n                                    console.log(\"rocketUpdate state fire \");\n                                }\n                                else\n                                {\n                                    this.currentState = this.states[\"idle\"];\n                                    console.log(\"rocketUpdate state idle\");\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"hit":{"body":"this.audioAPI.playSound(\"/sas/assets/bc13daa3\", false, 200, true);\n    if (this.currentState.name == \"defeated\") return;\n\n    var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n    {\n        this.health -= force;\n\n    }\n    else\n    {\n        this.health -= 101;\n    }\n    if (this.health < 0)\n    {\n        this.hostile = false;\n        this.createExplosion();\n        this.destroyFAC();\n    }","parameters":["args"]},"idleTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleTransition\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"idleUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleUpdate\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"isUserControlled":{"body":"var thisCam = this.controllingCamera;\n\n    return this._keysDown.length !== 0 ||( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"launchMissile":{"body":"var def = this.missileDef;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'FAC Missile', 'Fast Attack Craft', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"moveToAvoidPeer":{"body":"var peer_info = this.facPeerMovementCandidate;\n    if (!peer_info) return false;\n\n    if (peer_info[1] == this.id) return;\n\n    var safe_distance = peer_info[3] || 50;\n    var mass = this.physicsAPI.getMass();\n\n    // Get peer world position\n    var peer_pos = peer_info[0];\n\n    // Get my world position\n    var my_pos = this.transformAPI.getWorldPosition();\n\n    // Get the distance between me and the leader\n    var distance = MATH.distanceVec3(peer_pos, my_pos);\n    //console.log(\"facFollowBehavior: distance: \" + distance);\n\n    if (distance < safe_distance)\n    {\n        //console.log(\"Move to Avoid Peer (\" + this.id + \")\");\n        var direction = MATH.subVec3(my_pos, peer_pos);\n        //console.log(\"diff: \" + direction);\n\n        direction[2] = 0;\n\n        var norm_direction = MATH.toUnitVec3(direction);\n\n        norm_direction = this.transformAPI.globalToLocalRotation(norm_direction);\n\n        var x = norm_direction[0];\n        var y = norm_direction[1];\n\n        //console.log(\"x: \" + x);\n        //console.log(\"y: \" + y);\n\n        var peer_heading = this.transformAPI.globalToLocalRotation(peer_info[2]);\n\n        //console.log(peer_heading);\n\n        // if the peer is headed right at me, then I should turn right\n        //      if (peer_heading[0] > 0 && Math.abs(peer_heading[1]) < .25)\n        //        {\n        //console.log(\"peer heading at me, turn right!\");\n        //          this.doTurn('right');\n        //    }\n        //  else\n        {\n            if (y >= 0)\n            {\n                if (x > 0) // 1st quadrant\n                {\n                    this.doTurn('right');\n                }\n                else // 2nd quadrant\n                {\n\n                    //this.doTurn('left');\n                }\n            }\n            else\n            {\n                if (x > 0) // 4th quardrant\n                {\n                    this.doTurn('left');\n                }\n                else // 3rd quadrant\n                {\n\n                    //this.doTurn('right');\n                }\n            }\n        }\n    }\n    else\n    {\n        this.facPeerMovementCandidate = null;\n    }\n\n    this.doMoveForward();\n\n    return true;","parameters":[]},"moving_awayTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayTransition\");\n                                this.moving_awayUpdate(this.currentState);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"moving_awayUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayUpdate\");\n                                this.currentState = this.states[\"moving_away\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"notifyPeers":{"body":"var my_position = this.transformAPI.getPosition();\n    this.tickCount++;\n    if (this.tickCount == 4 || this.tickCount == 8)\n    {\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward], 50);\n    }\n\n    if (this.tickCount > 10)\n    {\n        var leader_projection = this.transformAPI.localToGlobal(-150, 0, 0);\n\n        this.broadcast(\"facLeaderInput\", [leader_projection], 500);\n        this.tickCount = 0;\n    }","parameters":[]},"out_of_gasTransition":{"body":"console.log(\"out_of_gasTransition\");\n    //this.currentState = this.states[\"out_of_gas\"];\n    this.out_of_gasUpdate(this.currentState);\n\n    // var sender = this.Scene.children_by_name.xAPISender;\n    // if (sender)\n    // {\n    //     sender.xAPISend(\"ran-out-of-gas\", this.DisplayName, \"FastAttackCraft\", null);\n    // }","parameters":[]},"out_of_gasUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"out_of_gasUpdate\");\n                                console.log(statename);\n                                if (this.fuel <= 0)\n                                {\n                                    this.currentState = this.states[\"out_of_gas\"];\n                                    console.log(\"out_of_gasUpdate now out_of_gas state\");\n                                }\n                                else if (this.hullStrength <= 0)\n                                {\n                                    this.currentState = this.states[\"defeated\"];\n                                    console.log(\"out_of_gasUpdate now defaeted state\");\n                                }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"playBulletHittingMetal":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingMetal\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletHittingWater":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingWater\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletWhizzingBy":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletWhizzingBy\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playExplosion":{"body":"console.log(\"playExplosion\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/8d358349\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/d714ebe1\", false, 100);\n    // #3:\n    this.audioAPI.playSound(\"/sas/assets/3c6b353e\", false, 1000);","parameters":[]},"playHelicopter":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               //console.log(\"playHelicopter\");\n                                // #1:\n                                //this.audioAPI.playSound(\"/sas/assets/af90534a\", false, 100);\n                                //#2:\n                                this.audioAPI.playSound(\"/sas/assets/dc81768a\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMissileLaunch":{"body":"console.log(\"playMissileLaunch\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/744acf2e\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);\n    // #3:\n    //this.audioAPI.playSound(\"/sas/assets/10b027bd\", false, 100);\n    // #4:\n    //this.audioAPI.playSound(\"/sas/assets/94d508e3\", false, 100);\n    // #5:\n    this.audioAPI.playSound(\"/sas/assets/263beb86\", false, 400);","parameters":[]},"playMotorIdle":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorIdle\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMotorRunning":{"body":"//console.log(\"playMotorRunning\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/2cb9fef9\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/994ee0c8\", false, 100);\n    // #3:\n    var sound = vwf.callMethod(this.id, \"getSound\", [\"/sas/assets/c253157d\"]);\n\n    // if (sound == null || !sound.isPlaying())\n    {\n        this.audioAPI.playSound(\"/sas/assets/c253157d\", true, 200, false);\n    }","parameters":[]},"playMotorSputtering":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorSputtering\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playWarning":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playWarning\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"randomIntFromInterval":{"body":"return Math.floor(Math.random()*(max-min+1)+min);","parameters":["min","max"]},"ready":{"body":"// The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\", this._kd, this);\n    this.Scene.unbind(\"keyUp\", this._ku, this);\n    var self = this;\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d)\n    };\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d)\n    };\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"tick":{"body":"console.log(this.facPeerMovementCandidate);\n    this.userControlCounter--;\n    this.doBuoyancy();\n    this.notifyPeers();\n    if (this.facPeerMovementCandidate && !this.isUserControlled())\n    {\n        this.moveToAvoidPeer();\n        \n        return;\n\n    }\n    this.facPeerMovementCandidate = null;\n\n    if (this.isUserControlled())\n    {\n        this.isSlave = false;\n        this.doUserInput();\n    }\n    else\n    {\n        this.isSlave = true;\n        this.doAIBehaviors();\n    }","parameters":[]},"verifyCamera":{"body":"if(!this.controllingCamera)\n        return true;\n    var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;","parameters":[]}},"properties":{"DisplayName":"FAC_MASTER2","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"aiState":{"displayname":"AI Behavior","labels":["attack","flee","wait"],"property":"aiActiveState","type":"choice","values":["attack","flee","wait"]},"aiTargetID":{"displayname":"Target Object","property":"aiTargetID","type":"nodeid"},"bullets_50_cal":{"displayname":"Bullets (50 cal)","max":100000,"min":1,"property":"bullets_50_cal","type":"slider"},"fuel":{"displayname":"Fuel","max":1000,"min":1,"property":"fuel","type":"slider"},"fuelConsumptionRate":{"displayname":"Fuel Consumption Rate","max":1,"min":0,"property":"fuelConsumptionRate","step":0.01,"type":"slider"},"health":{"displayname":"Health","max":1000,"min":1,"property":"health","type":"slider"},"hostile":{"displayname":"Hostile","property":"hostile","type":"check"},"hullStrength":{"displayname":"Hull Strength","max":1000,"min":1,"property":"hullStrength","type":"slider"},"rangeToTarget":{"displayname":"Range to Target","max":5000,"min":0,"property":"rangeToTarget","step":100,"type":"slider"},"rockets":{"displayname":"Rockets","max":25,"min":0,"property":"rockets","type":"slider"}},"___physics_activation_state":4,"___physics_angular_velocity":[0.02608,-0.136371,0.000363],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.01887,0.10297,-0.002883],"___physics_mass":8051.2,"___physics_velocity_angular":[-0.006486,-0.029204,0.000064],"___physics_velocity_linear":[-0.000001,-0.000001,-0.000011],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:43:10 GMT-0500 (Eastern Standard Time)","_keysDown":[],"_length":7,"activeState":"active","aiActiveState":"attack","aiStates":{"attack":{"updateFunc":"aiAttack"},"circle":{"updateFunc":"aiCircle"},"circlecc":{"updateFunc":"aiCirclecc"},"defeated":{"updateFunc":"aiDefeated"},"fire":{"updateFunc":"aiFire"},"flee":{"updateFunc":"aiFlee"},"moveAway":{"updateFunc":"aiMoveAway"},"shoot":{"updateFunc":"aiShoot"},"wait":{"updateFunc":"aiWait"}},"aiTargetID":"-sas-assets-874eb90b-N37ac1079","bullets_50_cal":987,"controllingCamera":"SandboxCamera-vwf-N7ce6c503","counter":15544,"currentState":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"destroyedFACDef":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","alphaRange":0,"alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterSize":[2,2,2],"emitterType":"box","endAlpha":0.04,"endColor":[0,0,0,0.04],"endSize":5,"gravity":0.77,"image":"../vwfDataManager.svc/texture?UID=water.png","maxAcceleration":[0,0,9.82],"maxLifeTime":2,"maxRate":0.614,"maxSpin":1,"maxVelocity":[1,1,1],"minAcceleration":[0,0,9.82],"minLifeTime":1,"minSpin":-1,"minVelocity":[-1,-1,1],"owner":"ADLteam","particleCount":200,"rotation":[1,0,0,0],"sizeRange":0.02,"solver":"AnalyticShader","startAlpha":1,"startColor":[1,1,1,1],"startSize":1,"textureTiles":4,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","velocityMode":"cartesian"},"random":{"c":1,"s0":0.069964,"s1":0.034293,"s2":0.282638},"sequence":0},"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"facPeerMovementCandidate":null,"fuel":84.209999,"fuelConsumptionRate":0.01,"health":45,"height":1.2,"hostile":true,"hullStrength":100,"isSlave":false,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"hostile":true,"launchedBy":"","transform":[-0.024,-0.092306,0.995439,0,-0.981998,-0.184443,-0.04078,0,0.187365,-0.978498,-0.086218,0,229.96614,-822.763489,22.168992,1]}},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rangeToTarget":1000,"rockets":6,"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Na1da5cfd","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"1ad6adad","states":{"approaching":{"name":"approaching","properties":{},"transitionFunction":"approachingTransition","transitions":["approaching","moving_away","idle","out_of_gas","fire_rocket","colliding","defeated"],"updateFunction":"approachingUpdate"},"colliding":{"name":"colliding","properties":{},"transitionFunction":"collidingTransition","transitions":["colliding","defeated"],"updateFunction":"collidingUpdate"},"defeated":{"name":"defeated","properties":{},"transitionFunction":"defeatedTransition","transitions":["defeated"],"updateFunction":"defeatedUpdate"},"fire_rocket":{"name":"fire_rocket","properties":{},"transitionFunction":"fire_rocketTransition","transitions":["approaching","fire_rocket","moving_away","idle","colliding","defeated"],"updateFunction":"fire_rocketUpdate"},"idle":{"name":"idle","properties":{},"transitionFunction":"idleTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"idleUpdate"},"moving_away":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"out_of_gas":{"name":"out_of_gas","properties":{},"transitionFunction":"out_of_gasTransition","transitions":["out_of_gas","colliding","defeated"],"updateFunction":"out_of_gasUpdate"}},"tickCount":10,"transform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,263.25,-2050.25,20.75,1],"type":"Primitive","userControlCounter":0,"visible":false,"warningsReceived":0,"width":2.5,"worldPosition":[263.25,-2050.25,20.75],"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,263.25,-2050.25,20.75,1]},"random":{"c":630540,"s0":0.100115,"s1":0.552919,"s2":0.238348},"sequence":0,"name":"N560f3127"},{"children":{"-sas-assets-1ad6adad-N72463fd7N83e3ec00":{"extends":"box2.vwf","properties":{"DisplayName":"WaterBlocker","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":0.18,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":0,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":11,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1],"type":"Primitive","visible":false,"width":2.18},"random":{"c":1,"s0":0.198099,"s1":0.027581,"s2":0.352169},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N72463fd7N83e3ec00"},"-sas-assets-1ad6adad-N72463fd7N8c4837dd":{"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.240602999925613,-0.0218209996819496,0.970376014709473,0,0.00100100005511194,-0.999741971492767,-0.0227310005575418,0,0.970619022846222,0.00644000014290214,-0.240521997213364,0,1,0,1.49999904632568,1],"type":"Primitive","visible":false,"width":1.36,"worldTransform":[-0.0130935087800026,-0.241505414247513,0.970308423042297,0,-0.980116665363312,-0.189041972160339,-0.0602767691016197,0,0.197986945509911,-0.951804041862488,-0.234232410788536,0,361.380981445313,-2042.48388671875,22.2549629211426,1]},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N72463fd7N8c4837dd"},"-sas-assets-1ad6adad-N72463fd7N8cf5a8e2":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.99999997475243e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380481854081154,-0.00112601777072996,0.999275028705597,0,361.842651367188,-2044.44555664063,20.0186958312988,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"-sas-assets-1ad6adad-N72463fd7N8cf5a8e2"},"-sas-assets-1ad6adad-N72463fd7Ned0c4c0a":{"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(args);","parameters":["args"]}},"properties":{"DisplayName":"3D_model","___assetServerOriginalID":"Ned0c4c0a","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 13:10:22 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-9.99999997475243e-7,100.399002075195,0,0,-100.301002502441,-9.99999997475243e-7,0,0,0,0,100.294998168945,0,0.5,0,-0.5,1],"worldPosition":[361.363037109375,-2041.99047851563,20.2533874511719]},"random":{"c":1,"s0":0.434828,"s1":0.189991,"s2":0.484111},"sequence":0,"source":"/sas/assets/a31ba113","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-1ad6adad-N72463fd7Ned0c4c0a"},"N9a3e699":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,1,-0.000001,0,-1.000001,-0.000001,-0.000001,0,-0.000001,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.961765,"s1":0.72625,"s2":0.118456},"sequence":0,"name":"N9a3e699"},"Na352d177":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.086185,-0.022558,0.996021,0,0.001,-0.999742,-0.022731,0,0.996276,0.002956,-0.086141,0,1,0,1.5,1],"worldTransform":[-0.043828,-0.090013,0.994974,0,-0.980118,-0.189045,-0.060277,0,0.193519,-0.977833,-0.079938,0,242.630966,-890.483826,22.254964,1]},"random":{"c":1,"s0":0.174441,"s1":0.597858,"s2":0.025507},"sequence":0,"name":"Na352d177"},"Nb578cc65":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.306256,"s1":0.285063,"s2":0.043495},"sequence":0,"name":"Nb578cc65"},"Nb810b080":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,243.092651,-892.445557,20.018699,1]},"random":{"c":1,"s0":0.673742,"s1":0.465842,"s2":0.200551},"sequence":0,"name":"Nb810b080"},"Nee64668":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[242.613037,-889.990479,20.253389]},"random":{"c":1,"s0":0.210725,"s1":0.008965,"s2":0.419656},"sequence":0,"name":"Nee64668"}},"continues":"/sas/assets/1ad6adad","extends":"box2.vwf","methods":{"FACMovementDirection":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                // set equal to \"\" after adding calculations:\n                                var movement = \"closing\";\n                                // Perform calculations to determine approaching or moving away states:\n                                //     movement = \"closing\" if distance to target is getting smaller\n                                //     movement = \"none\" if distance to target hasn't changed\n                                //     movement = \"increasing\" if distance to target is getting larger\n                                switch (movement)\n                                {\n                                    case \"closing\":\n                                        this.currentState = this.states[\"approaching\"];\n                                        return \"approaching\";\n                                    case \"none\":\n                                        this.currentState = this.states[\"idle\"];\n                                        return \"idle\";\n                                    case \"increasing\":\n                                        this.currentState = this.states[\"moving_away\"];\n                                        return \"moving_away\";\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this.currentState === null)\n    {\n        console.log(\"Set initial state\");\n        this.currentState = this.states[\"approaching\"];\n    }\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }","parameters":["e","d"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        if (this.rockets > 0)\n        {\n            this.activateState(\"fire_rocket\");\n            console.log(\"rockets: \" + this.rockets);\n\n            console.log(\"Broadcasting leader fire...\");\n            // this.broadcast(\"facLeaderFire\", [], 500);\n        }\n    }","parameters":["e","d"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                //console.log(\"activateState\");\n                                var state = this.states[statename];\n\n                                if (this.currentState.transitions.indexOf(statename) == -1)\n                                {\n                                    console.log(\"invalid transition!\");\n                                    return;\n                                }\n\n                                if (state.transitionFunction)\n                                    this[state.transitionFunction](this.currentState);\n\n                                this.currentState = state;\n\n                                for (var i in state.properties)\n                                {\n                                    console.log(state.properties[i]);\n                                    this[i] = state.properties[i];\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"aiAttack":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n        if (MATH.lengthVec3(targetPos) > attackRange)\n        {\n            if (targetPos[1] > 10)\n                this.doTurn('right')\n            else if (targetPos[1] < -10)\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n    }","parameters":[]},"aiCircle":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] > 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circlecc\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n    }","parameters":[]},"aiCirclecc":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circle\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n\n    }","parameters":[]},"aiDefeated":{"body":"console.log(\"aiDefeated\");","parameters":[]},"aiFire":{"body":"var attachRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n\n        if (targetPos[1] > 0)\n            this.doTurn('right')\n        else\n            this.doTurn('left');\n\n        if (Math.abs(targetPos[1]) < .2)\n        {\n            console.log(\"FIRE!\");\n            this.launchMissile();\n            this.playMissileLaunch();\n            this.rockets = this.rockets - 1;\n            if(this.rockets <= 0)\n            {\n                this.aiActiveState = \"flee\";\n            }\n            else if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiFlee":{"body":"var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n\n        if (targetPos[1] < 10)\n            this.doTurn('right')\n        else if (targetPos[1] > -10)\n            this.doTurn('left');\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiMoveAway":{"body":"var attackRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[1] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n       \n        this.doMoveForward();\n        \n    }","parameters":[]},"aiWait":{"body":"console.log(\"aiWait\");","parameters":[]},"approachingTransition":{"body":"//console.log(\"approachingTransition\");\n    this.approachingUpdate(this.currentState);","parameters":[]},"approachingUpdate":{"body":"//console.log(\"approachingUpdate\");\n    this.currentState = this.states[\"approaching\"];","parameters":["statename"]},"collidingTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingTransition\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"collidingUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingUpdate\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"consumeFuel":{"body":"if (this.fuel <= 0.0)\n    {\n        this.currentState = this.states[\"out_of_gas\"];\n    }\n    else\n    {\n        this.fuel = this.fuel - this.fuelConsumptionRate;\n        //console.log(\"fuel: \" + this.fuel);\n    }","parameters":[]},"createExplosion":{"body":"console.log(\"explosion!!\");\n    var def = this.explosionDef;\n    var pos = this.transformAPI.getWorldPosition();\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = 1;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":[]},"defeatedTransition":{"body":"console.log(\"defeatedTransition\");\n    this.currentState = this.states[\"defeated\"];","parameters":[]},"defeatedUpdate":{"body":"console.log(\"defeatedUpdate\");\n    this.currentState = this.states[\"defeated\"];\n    this.audioAPI.stopSound(\"/sas/assets/c253157d\", true, 200);","parameters":["statename"]},"destroyFAC":{"body":"var def = this.destroyedFACDef;\n    var val1 = this.randomIntFromInterval(1, 360);\n    var val2 = this.randomIntFromInterval(1, 90);\n    var val3 = this.randomIntFromInterval(1, 360);\n    console.log(\"FAC blown up\");\n    this.currentState = this.states[\"defeated\"];\n    this.activeState = \"defeated\";\n    this.aiActiveState = \"defeated\";\n    vwf.createChild(this.id, GUID(), _DataManager.getCleanNodePrototype(def), null);\n    if (this.isSlave)\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(val1, val2, val3);\n    else\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(180, 45, 90);\n    this.children_by_name.WaterBlocker.visible = false;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-defeated\", this.DisplayName + this.id, \"FastAttackCraft\", null);\n    }","parameters":[]},"doAIBehaviors":{"body":"var pos = this.transformAPI.getWorldPosition();\n    //dont' do the AI code if it's not at the water surface\n    if (Math.abs(pos[2] - 20) > 2)\n        return;\n    var state = this.aiStates[this.aiActiveState];\n    console.log(this.aiActiveState);\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doBuoyancy":{"body":"var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }","parameters":[]},"doMoveBackward":{"body":"var mass = this.physicsAPI.getMass();\n    this.consumeFuel();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doMoveForward":{"body":"this.consumeFuel();\n    var mass = this.physicsAPI.getMass();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doTurn":{"body":"var direction = 1;\n    var mass = this.physicsAPI.getMass();\n    if (dir == 'left')\n    {\n        direction = 1;\n    }\n    if (dir == 'right')\n    {\n        direction = -1;\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0]) / 7);\n\n    this.physicsAPI.addTorque(0, 0, direction * speedTorqueFactor * mass * 3);\n    var force = this.transformAPI.localToGlobal(direction * speedTorqueFactor * mass, 0, 0);\n    this.physicsAPI.addTorque(force);","parameters":["dir"]},"doUserInput":{"body":"if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        this.doMoveForward();\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        this.doMoveBackward();\n    }\n\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n        this.doTurn('left');\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n         this.doTurn('right');\n    }\n    if (this._keysDown.indexOf(\" \") !== -1)\n    {\n        if (this.rockets > 0)\n        {\n            this.currentState = this.states[\"fire_rocket\"];\n        }\n        else\n        {\n            this.currentState = this.states[\"moving_away\"];\n        }\n    }","parameters":[]},"facPeerInput":{"body":"//console.log(\"facPeerInput Received: \" + args);\n   \n    if (args[1] == this.id) return;\n\n    /*if (this.facPeerMovementCandidate.length > 0)\n    {\n        var current_pos = this.transformAPI.getPosition();\n        var last_pos = this.facPeerMovementCandidate;\n        var incoming_pos = args[0];\n\n        if (MATH.distanceVec3(current_pos, incoming_pos) < MATH.distanceVec3(current_pos, last_pos))\n        {\n            this.facPeerMovementCandidate = args;\n        }\n    }\n    else\n    {*/\n    this.facPeerMovementCandidate = args;\n    //}","parameters":["args"]},"fire_rocketTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketTransition\");\n                                this.fire_rocketUpdate(this.currentState);    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"fire_rocketUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketUpdate\");\n                                this.launchMissile();\n                                this.playMissileLaunch();\n                                this.rockets = this.rockets - 1;\n                                if (this.rockets > 0)\n                                {\n                                    this.currentState = this.states[\"fire_rocket\"];\n                                    console.log(\"rocketUpdate state fire \");\n                                }\n                                else\n                                {\n                                    this.currentState = this.states[\"idle\"];\n                                    console.log(\"rocketUpdate state idle\");\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"hit":{"body":"this.audioAPI.playSound(\"/sas/assets/bc13daa3\", false, 200, true);\n    if (this.currentState.name == \"defeated\") return;\n\n    var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n    {\n        this.health -= force;\n\n    }\n    else\n    {\n        this.health -= 101;\n    }\n    if (this.health < 0)\n    {\n        this.hostile = false;\n        this.createExplosion();\n        this.destroyFAC();\n    }","parameters":["args"]},"idleTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleTransition\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"idleUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleUpdate\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"isUserControlled":{"body":"var thisCam = this.controllingCamera;\n\n    return this._keysDown.length !== 0 ||( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"launchMissile":{"body":"var def = this.missileDef;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'FAC Missile', 'Fast Attack Craft', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"moveToAvoidPeer":{"body":"var peer_info = this.facPeerMovementCandidate;\n    if (!peer_info) return false;\n\n    if (peer_info[1] == this.id) return;\n\n    var safe_distance = peer_info[3] || 50;\n    var mass = this.physicsAPI.getMass();\n\n    // Get peer world position\n    var peer_pos = peer_info[0];\n\n    // Get my world position\n    var my_pos = this.transformAPI.getWorldPosition();\n\n    // Get the distance between me and the leader\n    var distance = MATH.distanceVec3(peer_pos, my_pos);\n    //console.log(\"facFollowBehavior: distance: \" + distance);\n\n    if (distance < safe_distance)\n    {\n        //console.log(\"Move to Avoid Peer (\" + this.id + \")\");\n        var direction = MATH.subVec3(my_pos, peer_pos);\n        //console.log(\"diff: \" + direction);\n\n        direction[2] = 0;\n\n        var norm_direction = MATH.toUnitVec3(direction);\n\n        norm_direction = this.transformAPI.globalToLocalRotation(norm_direction);\n\n        var x = norm_direction[0];\n        var y = norm_direction[1];\n\n        //console.log(\"x: \" + x);\n        //console.log(\"y: \" + y);\n\n        var peer_heading = this.transformAPI.globalToLocalRotation(peer_info[2]);\n\n        //console.log(peer_heading);\n\n        // if the peer is headed right at me, then I should turn right\n        //      if (peer_heading[0] > 0 && Math.abs(peer_heading[1]) < .25)\n        //        {\n        //console.log(\"peer heading at me, turn right!\");\n        //          this.doTurn('right');\n        //    }\n        //  else\n        {\n            if (y >= 0)\n            {\n                if (x > 0) // 1st quadrant\n                {\n                    this.doTurn('right');\n                }\n                else // 2nd quadrant\n                {\n\n                    //this.doTurn('left');\n                }\n            }\n            else\n            {\n                if (x > 0) // 4th quardrant\n                {\n                    this.doTurn('left');\n                }\n                else // 3rd quadrant\n                {\n\n                    //this.doTurn('right');\n                }\n            }\n        }\n    }\n    else\n    {\n        this.facPeerMovementCandidate = null;\n    }\n\n    this.doMoveForward();\n\n    return true;","parameters":[]},"moving_awayTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayTransition\");\n                                this.moving_awayUpdate(this.currentState);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"moving_awayUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayUpdate\");\n                                this.currentState = this.states[\"moving_away\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"notifyPeers":{"body":"var my_position = this.transformAPI.getPosition();\n    this.tickCount++;\n    if (this.tickCount == 4 || this.tickCount == 8)\n    {\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward], 50);\n    }\n\n    if (this.tickCount > 10)\n    {\n        var leader_projection = this.transformAPI.localToGlobal(-150, 0, 0);\n\n        this.broadcast(\"facLeaderInput\", [leader_projection], 500);\n        this.tickCount = 0;\n    }","parameters":[]},"out_of_gasTransition":{"body":"console.log(\"out_of_gasTransition\");\n    //this.currentState = this.states[\"out_of_gas\"];\n    this.out_of_gasUpdate(this.currentState);\n\n    // var sender = this.Scene.children_by_name.xAPISender;\n    // if (sender)\n    // {\n    //     sender.xAPISend(\"ran-out-of-gas\", this.DisplayName, \"FastAttackCraft\", null);\n    // }","parameters":[]},"out_of_gasUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"out_of_gasUpdate\");\n                                console.log(statename);\n                                if (this.fuel <= 0)\n                                {\n                                    this.currentState = this.states[\"out_of_gas\"];\n                                    console.log(\"out_of_gasUpdate now out_of_gas state\");\n                                }\n                                else if (this.hullStrength <= 0)\n                                {\n                                    this.currentState = this.states[\"defeated\"];\n                                    console.log(\"out_of_gasUpdate now defaeted state\");\n                                }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"playBulletHittingMetal":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingMetal\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletHittingWater":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingWater\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletWhizzingBy":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletWhizzingBy\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playExplosion":{"body":"console.log(\"playExplosion\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/8d358349\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/d714ebe1\", false, 100);\n    // #3:\n    this.audioAPI.playSound(\"/sas/assets/3c6b353e\", false, 1000);","parameters":[]},"playHelicopter":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               //console.log(\"playHelicopter\");\n                                // #1:\n                                //this.audioAPI.playSound(\"/sas/assets/af90534a\", false, 100);\n                                //#2:\n                                this.audioAPI.playSound(\"/sas/assets/dc81768a\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMissileLaunch":{"body":"console.log(\"playMissileLaunch\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/744acf2e\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);\n    // #3:\n    //this.audioAPI.playSound(\"/sas/assets/10b027bd\", false, 100);\n    // #4:\n    //this.audioAPI.playSound(\"/sas/assets/94d508e3\", false, 100);\n    // #5:\n    this.audioAPI.playSound(\"/sas/assets/263beb86\", false, 400);","parameters":[]},"playMotorIdle":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorIdle\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMotorRunning":{"body":"//console.log(\"playMotorRunning\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/2cb9fef9\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/994ee0c8\", false, 100);\n    // #3:\n    var sound = vwf.callMethod(this.id, \"getSound\", [\"/sas/assets/c253157d\"]);\n\n    // if (sound == null || !sound.isPlaying())\n    {\n        this.audioAPI.playSound(\"/sas/assets/c253157d\", true, 200, false);\n    }","parameters":[]},"playMotorSputtering":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorSputtering\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playWarning":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playWarning\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"randomIntFromInterval":{"body":"return Math.floor(Math.random()*(max-min+1)+min);","parameters":["min","max"]},"ready":{"body":"// The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\", this._kd, this);\n    this.Scene.unbind(\"keyUp\", this._ku, this);\n    var self = this;\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d)\n    };\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d)\n    };\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"tick":{"body":"console.log(this.facPeerMovementCandidate);\n    this.userControlCounter--;\n    this.doBuoyancy();\n    this.notifyPeers();\n    if (this.facPeerMovementCandidate && !this.isUserControlled())\n    {\n        this.moveToAvoidPeer();\n        \n        return;\n\n    }\n    this.facPeerMovementCandidate = null;\n\n    if (this.isUserControlled())\n    {\n        this.isSlave = false;\n        this.doUserInput();\n    }\n    else\n    {\n        this.isSlave = true;\n        this.doAIBehaviors();\n    }","parameters":[]},"verifyCamera":{"body":"if(!this.controllingCamera)\n        return true;\n    var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;","parameters":[]}},"properties":{"DisplayName":"FAC","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"aiState":{"displayname":"AI Behavior","labels":["attack","flee","wait"],"property":"aiActiveState","type":"choice","values":["attack","flee","wait"]},"aiTargetID":{"displayname":"Target Object","property":"aiTargetID","type":"nodeid"},"bullets_50_cal":{"displayname":"Bullets (50 cal)","max":100000,"min":1,"property":"bullets_50_cal","type":"slider"},"fuel":{"displayname":"Fuel","max":1000,"min":1,"property":"fuel","type":"slider"},"fuelConsumptionRate":{"displayname":"Fuel Consumption Rate","max":1,"min":0,"property":"fuelConsumptionRate","step":0.01,"type":"slider"},"health":{"displayname":"Health","max":1000,"min":1,"property":"health","type":"slider"},"hostile":{"displayname":"Hostile","property":"hostile","type":"check"},"hullStrength":{"displayname":"Hull Strength","max":1000,"min":1,"property":"hullStrength","type":"slider"},"rangeToTarget":{"displayname":"Range to Target","max":5000,"min":0,"property":"rangeToTarget","step":100,"type":"slider"},"rockets":{"displayname":"Rockets","max":25,"min":0,"property":"rockets","type":"slider"}},"___physics_activation_state":4,"___physics_angular_velocity":[0.02608,-0.136371,0.000363],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.01887,0.10297,-0.002883],"___physics_mass":8051.2,"___physics_velocity_angular":[-0.006486,-0.029204,0.000064],"___physics_velocity_linear":[-0.000001,-0.000001,-0.000011],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:43:10 GMT-0500 (Eastern Standard Time)","_keysDown":[],"_length":7,"activeState":"active","aiActiveState":"attack","aiStates":{"attack":{"updateFunc":"aiAttack"},"circle":{"updateFunc":"aiCircle"},"circlecc":{"updateFunc":"aiCirclecc"},"defeated":{"updateFunc":"aiDefeated"},"fire":{"updateFunc":"aiFire"},"flee":{"updateFunc":"aiFlee"},"moveAway":{"updateFunc":"aiMoveAway"},"shoot":{"updateFunc":"aiShoot"},"wait":{"updateFunc":"aiWait"}},"aiTargetID":"-sas-assets-874eb90b-N37ac1079","bullets_50_cal":987,"controllingCamera":"SandboxCamera-vwf-Na1b51046","counter":15544,"currentState":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"destroyedFACDef":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","alphaRange":0,"alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterSize":[2,2,2],"emitterType":"box","endAlpha":0.04,"endColor":[0,0,0,0.04],"endSize":5,"gravity":0.77,"image":"../vwfDataManager.svc/texture?UID=water.png","maxAcceleration":[0,0,9.82],"maxLifeTime":2,"maxRate":0.614,"maxSpin":1,"maxVelocity":[1,1,1],"minAcceleration":[0,0,9.82],"minLifeTime":1,"minSpin":-1,"minVelocity":[-1,-1,1],"owner":"ADLteam","particleCount":200,"rotation":[1,0,0,0],"sizeRange":0.02,"solver":"AnalyticShader","startAlpha":1,"startColor":[1,1,1,1],"startSize":1,"textureTiles":4,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","velocityMode":"cartesian"},"random":{"c":1,"s0":0.069964,"s1":0.034293,"s2":0.282638},"sequence":0},"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"facPeerMovementCandidate":null,"fuel":84.209999,"fuelConsumptionRate":0.01,"health":45,"height":1.2,"hostile":true,"hullStrength":100,"isSlave":false,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"hostile":true,"launchedBy":"","transform":[-0.024,-0.092306,0.995439,0,-0.981998,-0.184443,-0.04078,0,0.187365,-0.978498,-0.086218,0,229.96614,-822.763489,22.168992,1]}},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rangeToTarget":1000,"rockets":6,"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Na1da5cfd","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"1ad6adad","states":{"approaching":{"name":"approaching","properties":{},"transitionFunction":"approachingTransition","transitions":["approaching","moving_away","idle","out_of_gas","fire_rocket","colliding","defeated"],"updateFunction":"approachingUpdate"},"colliding":{"name":"colliding","properties":{},"transitionFunction":"collidingTransition","transitions":["colliding","defeated"],"updateFunction":"collidingUpdate"},"defeated":{"name":"defeated","properties":{},"transitionFunction":"defeatedTransition","transitions":["defeated"],"updateFunction":"defeatedUpdate"},"fire_rocket":{"name":"fire_rocket","properties":{},"transitionFunction":"fire_rocketTransition","transitions":["approaching","fire_rocket","moving_away","idle","colliding","defeated"],"updateFunction":"fire_rocketUpdate"},"idle":{"name":"idle","properties":{},"transitionFunction":"idleTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"idleUpdate"},"moving_away":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"out_of_gas":{"name":"out_of_gas","properties":{},"transitionFunction":"out_of_gasTransition","transitions":["out_of_gas","colliding","defeated"],"updateFunction":"out_of_gasUpdate"}},"tickCount":10,"transform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,361.25,-2041.5,20.75,1],"type":"Primitive","userControlCounter":0,"visible":false,"warningsReceived":0,"width":2.5,"worldPosition":[361.25,-2041.5,20.75],"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,361.25,-2041.5,20.75,1]},"random":{"c":1519967,"s0":0.181431,"s1":0.565967,"s2":0.10468},"sequence":0,"name":"N72463fd7"},{"children":{"-sas-assets-1ad6adad-N75c16de3N83e3ec00":{"extends":"box2.vwf","properties":{"DisplayName":"WaterBlocker","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":0.18,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":0,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":11,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1],"type":"Primitive","visible":false,"width":2.18},"random":{"c":1,"s0":0.198099,"s1":0.027581,"s2":0.352169},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N75c16de3N83e3ec00"},"-sas-assets-1ad6adad-N75c16de3N8c4837dd":{"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.240602999925613,-0.0218209996819496,0.970376014709473,0,0.00100100005511194,-0.999741971492767,-0.0227310005575418,0,0.970619022846222,0.00644000014290214,-0.240521997213364,0,1,0,1.49999904632568,1],"type":"Primitive","visible":false,"width":1.36,"worldTransform":[-0.0130935087800026,-0.241505414247513,0.970308423042297,0,-0.980116665363312,-0.189041972160339,-0.0602767691016197,0,0.197986945509911,-0.951804041862488,-0.234232410788536,0,560.130981445313,-1830.98388671875,22.2549629211426,1]},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N75c16de3N8c4837dd"},"-sas-assets-1ad6adad-N75c16de3N8cf5a8e2":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.99999997475243e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380481854081154,-0.00112601777072996,0.999275028705597,0,560.592651367188,-1832.94555664063,20.0186958312988,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"-sas-assets-1ad6adad-N75c16de3N8cf5a8e2"},"-sas-assets-1ad6adad-N75c16de3Ned0c4c0a":{"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(args);","parameters":["args"]}},"properties":{"DisplayName":"3D_model","___assetServerOriginalID":"Ned0c4c0a","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 13:10:22 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-9.99999997475243e-7,100.399002075195,0,0,-100.301002502441,-9.99999997475243e-7,0,0,0,0,100.294998168945,0,0.5,0,-0.5,1],"worldPosition":[560.113037109375,-1830.49047851563,20.2533874511719]},"random":{"c":1,"s0":0.434828,"s1":0.189991,"s2":0.484111},"sequence":0,"source":"/sas/assets/a31ba113","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-1ad6adad-N75c16de3Ned0c4c0a"},"N36b23556":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.240604,-0.021821,0.970376,0,0.001,-0.999742,-0.02273,0,0.97062,0.006441,-0.240522,0,1,0.000001,1.499999,1],"worldTransform":[-0.013091,-0.241507,0.970309,0,-0.980118,-0.189045,-0.060277,0,0.197988,-0.951806,-0.234231,0,458.880981,-828.983826,22.254964,1]},"random":{"c":1,"s0":0.248346,"s1":0.358357,"s2":0.6174},"sequence":0,"name":"N36b23556"},"N394eff28":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.240604,-0.021821,0.970376,0,0.001,-0.999742,-0.02273,0,0.97062,0.006441,-0.240522,0,1,0.000001,1.499999,1],"worldTransform":[-0.013091,-0.241507,0.970309,0,-0.980118,-0.189045,-0.060277,0,0.197988,-0.951806,-0.234231,0,340.630981,-881.733826,22.254964,1]},"random":{"c":1,"s0":0.428982,"s1":0.960703,"s2":0.525372},"sequence":0,"name":"N394eff28"},"N4da3202d":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.272241,"s1":0.477581,"s2":0.375894},"sequence":0,"name":"N4da3202d"},"N64176447":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.516194,"s1":0.076558,"s2":0.538814},"sequence":0,"name":"N64176447"},"N7070365f":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[340.613037,-881.240479,20.253389]},"random":{"c":1,"s0":0.408461,"s1":0.250207,"s2":0.63391},"sequence":0,"name":"N7070365f"},"N7e0032ac":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,459.342651,-830.945557,20.018699,1]},"random":{"c":1,"s0":0.497799,"s1":0.480976,"s2":0.095348},"sequence":0,"name":"N7e0032ac"},"N842fbab1":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,1,-0.000001,0,-1.000001,-0.000001,-0.000001,0,-0.000001,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.961765,"s1":0.72625,"s2":0.118456},"sequence":0,"name":"N842fbab1"},"N9c0b2a50":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.306256,"s1":0.285063,"s2":0.043495},"sequence":0,"name":"N9c0b2a50"},"Na2f3bc9c":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,243.092651,-892.445557,20.018699,1]},"random":{"c":1,"s0":0.673742,"s1":0.465842,"s2":0.200551},"sequence":0,"name":"Na2f3bc9c"},"Nc26bff56":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.086185,-0.022558,0.996021,0,0.001,-0.999742,-0.022731,0,0.996276,0.002956,-0.086141,0,1,0,1.5,1],"worldTransform":[-0.043828,-0.090013,0.994974,0,-0.980118,-0.189045,-0.060277,0,0.193519,-0.977833,-0.079938,0,242.630966,-890.483826,22.254964,1]},"random":{"c":1,"s0":0.174441,"s1":0.597858,"s2":0.025507},"sequence":0,"name":"Nc26bff56"},"Nd5904a81":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,341.092651,-883.695557,20.018699,1]},"random":{"c":1,"s0":0.735406,"s1":0.218858,"s2":0.172233},"sequence":0,"name":"Nd5904a81"},"Ndfdc8c6b":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[242.613037,-889.990479,20.253389]},"random":{"c":1,"s0":0.210725,"s1":0.008965,"s2":0.419656},"sequence":0,"name":"Ndfdc8c6b"},"Nf09258ac":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[458.863037,-828.490479,20.253389]},"random":{"c":1,"s0":0.01276,"s1":0.855356,"s2":0.25988},"sequence":0,"name":"Nf09258ac"}},"continues":"/sas/assets/1ad6adad","extends":"box2.vwf","methods":{"FACMovementDirection":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                // set equal to \"\" after adding calculations:\n                                var movement = \"closing\";\n                                // Perform calculations to determine approaching or moving away states:\n                                //     movement = \"closing\" if distance to target is getting smaller\n                                //     movement = \"none\" if distance to target hasn't changed\n                                //     movement = \"increasing\" if distance to target is getting larger\n                                switch (movement)\n                                {\n                                    case \"closing\":\n                                        this.currentState = this.states[\"approaching\"];\n                                        return \"approaching\";\n                                    case \"none\":\n                                        this.currentState = this.states[\"idle\"];\n                                        return \"idle\";\n                                    case \"increasing\":\n                                        this.currentState = this.states[\"moving_away\"];\n                                        return \"moving_away\";\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this.currentState === null)\n    {\n        console.log(\"Set initial state\");\n        this.currentState = this.states[\"approaching\"];\n    }\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }","parameters":["e","d"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        if (this.rockets > 0)\n        {\n            this.activateState(\"fire_rocket\");\n            console.log(\"rockets: \" + this.rockets);\n\n            console.log(\"Broadcasting leader fire...\");\n            // this.broadcast(\"facLeaderFire\", [], 500);\n        }\n    }","parameters":["e","d"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                //console.log(\"activateState\");\n                                var state = this.states[statename];\n\n                                if (this.currentState.transitions.indexOf(statename) == -1)\n                                {\n                                    console.log(\"invalid transition!\");\n                                    return;\n                                }\n\n                                if (state.transitionFunction)\n                                    this[state.transitionFunction](this.currentState);\n\n                                this.currentState = state;\n\n                                for (var i in state.properties)\n                                {\n                                    console.log(state.properties[i]);\n                                    this[i] = state.properties[i];\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"aiAttack":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n        if (MATH.lengthVec3(targetPos) > attackRange)\n        {\n            if (targetPos[1] > 10)\n                this.doTurn('right')\n            else if (targetPos[1] < -10)\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n    }","parameters":[]},"aiCircle":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] > 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circlecc\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n    }","parameters":[]},"aiCirclecc":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circle\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n\n    }","parameters":[]},"aiDefeated":{"body":"console.log(\"aiDefeated\");","parameters":[]},"aiFire":{"body":"var attachRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n\n        if (targetPos[1] > 0)\n            this.doTurn('right')\n        else\n            this.doTurn('left');\n\n        if (Math.abs(targetPos[1]) < .2)\n        {\n            console.log(\"FIRE!\");\n            this.launchMissile();\n            this.playMissileLaunch();\n            this.rockets = this.rockets - 1;\n            if(this.rockets <= 0)\n            {\n                this.aiActiveState = \"flee\";\n            }\n            else if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiFlee":{"body":"var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n\n        if (targetPos[1] < 10)\n            this.doTurn('right')\n        else if (targetPos[1] > -10)\n            this.doTurn('left');\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiMoveAway":{"body":"var attackRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[1] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n       \n        this.doMoveForward();\n        \n    }","parameters":[]},"aiWait":{"body":"console.log(\"aiWait\");","parameters":[]},"approachingTransition":{"body":"//console.log(\"approachingTransition\");\n    this.approachingUpdate(this.currentState);","parameters":[]},"approachingUpdate":{"body":"//console.log(\"approachingUpdate\");\n    this.currentState = this.states[\"approaching\"];","parameters":["statename"]},"collidingTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingTransition\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"collidingUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingUpdate\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"consumeFuel":{"body":"if (this.fuel <= 0.0)\n    {\n        this.currentState = this.states[\"out_of_gas\"];\n    }\n    else\n    {\n        this.fuel = this.fuel - this.fuelConsumptionRate;\n        //console.log(\"fuel: \" + this.fuel);\n    }","parameters":[]},"createExplosion":{"body":"console.log(\"explosion!!\");\n    var def = this.explosionDef;\n    var pos = this.transformAPI.getWorldPosition();\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = 1;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":[]},"defeatedTransition":{"body":"console.log(\"defeatedTransition\");\n    this.currentState = this.states[\"defeated\"];","parameters":[]},"defeatedUpdate":{"body":"console.log(\"defeatedUpdate\");\n    this.currentState = this.states[\"defeated\"];\n    this.audioAPI.stopSound(\"/sas/assets/c253157d\", true, 200);","parameters":["statename"]},"destroyFAC":{"body":"var def = this.destroyedFACDef;\n    var val1 = this.randomIntFromInterval(1, 360);\n    var val2 = this.randomIntFromInterval(1, 90);\n    var val3 = this.randomIntFromInterval(1, 360);\n    console.log(\"FAC blown up\");\n    this.currentState = this.states[\"defeated\"];\n    this.activeState = \"defeated\";\n    this.aiActiveState = \"defeated\";\n    vwf.createChild(this.id, GUID(), _DataManager.getCleanNodePrototype(def), null);\n    if (this.isSlave)\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(val1, val2, val3);\n    else\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(180, 45, 90);\n    this.children_by_name.WaterBlocker.visible = false;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-defeated\", this.DisplayName + this.id, \"FastAttackCraft\", null);\n    }","parameters":[]},"doAIBehaviors":{"body":"var pos = this.transformAPI.getWorldPosition();\n    //dont' do the AI code if it's not at the water surface\n    if (Math.abs(pos[2] - 20) > 2)\n        return;\n    var state = this.aiStates[this.aiActiveState];\n    console.log(this.aiActiveState);\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doBuoyancy":{"body":"var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }","parameters":[]},"doMoveBackward":{"body":"var mass = this.physicsAPI.getMass();\n    this.consumeFuel();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doMoveForward":{"body":"this.consumeFuel();\n    var mass = this.physicsAPI.getMass();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doTurn":{"body":"var direction = 1;\n    var mass = this.physicsAPI.getMass();\n    if (dir == 'left')\n    {\n        direction = 1;\n    }\n    if (dir == 'right')\n    {\n        direction = -1;\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0]) / 7);\n\n    this.physicsAPI.addTorque(0, 0, direction * speedTorqueFactor * mass * 3);\n    var force = this.transformAPI.localToGlobal(direction * speedTorqueFactor * mass, 0, 0);\n    this.physicsAPI.addTorque(force);","parameters":["dir"]},"doUserInput":{"body":"if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        this.doMoveForward();\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        this.doMoveBackward();\n    }\n\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n        this.doTurn('left');\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n         this.doTurn('right');\n    }\n    if (this._keysDown.indexOf(\" \") !== -1)\n    {\n        if (this.rockets > 0)\n        {\n            this.currentState = this.states[\"fire_rocket\"];\n        }\n        else\n        {\n            this.currentState = this.states[\"moving_away\"];\n        }\n    }","parameters":[]},"facPeerInput":{"body":"//console.log(\"facPeerInput Received: \" + args);\n   \n    if (args[1] == this.id) return;\n\n    /*if (this.facPeerMovementCandidate.length > 0)\n    {\n        var current_pos = this.transformAPI.getPosition();\n        var last_pos = this.facPeerMovementCandidate;\n        var incoming_pos = args[0];\n\n        if (MATH.distanceVec3(current_pos, incoming_pos) < MATH.distanceVec3(current_pos, last_pos))\n        {\n            this.facPeerMovementCandidate = args;\n        }\n    }\n    else\n    {*/\n    this.facPeerMovementCandidate = args;\n    //}","parameters":["args"]},"fire_rocketTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketTransition\");\n                                this.fire_rocketUpdate(this.currentState);    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"fire_rocketUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketUpdate\");\n                                this.launchMissile();\n                                this.playMissileLaunch();\n                                this.rockets = this.rockets - 1;\n                                if (this.rockets > 0)\n                                {\n                                    this.currentState = this.states[\"fire_rocket\"];\n                                    console.log(\"rocketUpdate state fire \");\n                                }\n                                else\n                                {\n                                    this.currentState = this.states[\"idle\"];\n                                    console.log(\"rocketUpdate state idle\");\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"hit":{"body":"this.audioAPI.playSound(\"/sas/assets/bc13daa3\", false, 200, true);\n    if (this.currentState.name == \"defeated\") return;\n\n    var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n    {\n        this.health -= force;\n\n    }\n    else\n    {\n        this.health -= 101;\n    }\n    if (this.health < 0)\n    {\n        this.hostile = false;\n        this.createExplosion();\n        this.destroyFAC();\n    }","parameters":["args"]},"idleTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleTransition\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"idleUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleUpdate\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"isUserControlled":{"body":"var thisCam = this.controllingCamera;\n\n    return this._keysDown.length !== 0 ||( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"launchMissile":{"body":"var def = this.missileDef;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'FAC Missile', 'Fast Attack Craft', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"moveToAvoidPeer":{"body":"var peer_info = this.facPeerMovementCandidate;\n    if (!peer_info) return false;\n\n    if (peer_info[1] == this.id) return;\n\n    var safe_distance = peer_info[3] || 50;\n    var mass = this.physicsAPI.getMass();\n\n    // Get peer world position\n    var peer_pos = peer_info[0];\n\n    // Get my world position\n    var my_pos = this.transformAPI.getWorldPosition();\n\n    // Get the distance between me and the leader\n    var distance = MATH.distanceVec3(peer_pos, my_pos);\n    //console.log(\"facFollowBehavior: distance: \" + distance);\n\n    if (distance < safe_distance)\n    {\n        //console.log(\"Move to Avoid Peer (\" + this.id + \")\");\n        var direction = MATH.subVec3(my_pos, peer_pos);\n        //console.log(\"diff: \" + direction);\n\n        direction[2] = 0;\n\n        var norm_direction = MATH.toUnitVec3(direction);\n\n        norm_direction = this.transformAPI.globalToLocalRotation(norm_direction);\n\n        var x = norm_direction[0];\n        var y = norm_direction[1];\n\n        //console.log(\"x: \" + x);\n        //console.log(\"y: \" + y);\n\n        var peer_heading = this.transformAPI.globalToLocalRotation(peer_info[2]);\n\n        //console.log(peer_heading);\n\n        // if the peer is headed right at me, then I should turn right\n        //      if (peer_heading[0] > 0 && Math.abs(peer_heading[1]) < .25)\n        //        {\n        //console.log(\"peer heading at me, turn right!\");\n        //          this.doTurn('right');\n        //    }\n        //  else\n        {\n            if (y >= 0)\n            {\n                if (x > 0) // 1st quadrant\n                {\n                    this.doTurn('right');\n                }\n                else // 2nd quadrant\n                {\n\n                    //this.doTurn('left');\n                }\n            }\n            else\n            {\n                if (x > 0) // 4th quardrant\n                {\n                    this.doTurn('left');\n                }\n                else // 3rd quadrant\n                {\n\n                    //this.doTurn('right');\n                }\n            }\n        }\n    }\n    else\n    {\n        this.facPeerMovementCandidate = null;\n    }\n\n    this.doMoveForward();\n\n    return true;","parameters":[]},"moving_awayTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayTransition\");\n                                this.moving_awayUpdate(this.currentState);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"moving_awayUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayUpdate\");\n                                this.currentState = this.states[\"moving_away\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"notifyPeers":{"body":"var my_position = this.transformAPI.getPosition();\n    this.tickCount++;\n    if (this.tickCount == 4 || this.tickCount == 8)\n    {\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward], 50);\n    }\n\n    if (this.tickCount > 10)\n    {\n        var leader_projection = this.transformAPI.localToGlobal(-150, 0, 0);\n\n        this.broadcast(\"facLeaderInput\", [leader_projection], 500);\n        this.tickCount = 0;\n    }","parameters":[]},"out_of_gasTransition":{"body":"console.log(\"out_of_gasTransition\");\n    //this.currentState = this.states[\"out_of_gas\"];\n    this.out_of_gasUpdate(this.currentState);\n\n    // var sender = this.Scene.children_by_name.xAPISender;\n    // if (sender)\n    // {\n    //     sender.xAPISend(\"ran-out-of-gas\", this.DisplayName, \"FastAttackCraft\", null);\n    // }","parameters":[]},"out_of_gasUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"out_of_gasUpdate\");\n                                console.log(statename);\n                                if (this.fuel <= 0)\n                                {\n                                    this.currentState = this.states[\"out_of_gas\"];\n                                    console.log(\"out_of_gasUpdate now out_of_gas state\");\n                                }\n                                else if (this.hullStrength <= 0)\n                                {\n                                    this.currentState = this.states[\"defeated\"];\n                                    console.log(\"out_of_gasUpdate now defaeted state\");\n                                }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"playBulletHittingMetal":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingMetal\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletHittingWater":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingWater\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletWhizzingBy":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletWhizzingBy\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playExplosion":{"body":"console.log(\"playExplosion\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/8d358349\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/d714ebe1\", false, 100);\n    // #3:\n    this.audioAPI.playSound(\"/sas/assets/3c6b353e\", false, 1000);","parameters":[]},"playHelicopter":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               //console.log(\"playHelicopter\");\n                                // #1:\n                                //this.audioAPI.playSound(\"/sas/assets/af90534a\", false, 100);\n                                //#2:\n                                this.audioAPI.playSound(\"/sas/assets/dc81768a\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMissileLaunch":{"body":"console.log(\"playMissileLaunch\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/744acf2e\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);\n    // #3:\n    //this.audioAPI.playSound(\"/sas/assets/10b027bd\", false, 100);\n    // #4:\n    //this.audioAPI.playSound(\"/sas/assets/94d508e3\", false, 100);\n    // #5:\n    this.audioAPI.playSound(\"/sas/assets/263beb86\", false, 400);","parameters":[]},"playMotorIdle":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorIdle\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMotorRunning":{"body":"//console.log(\"playMotorRunning\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/2cb9fef9\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/994ee0c8\", false, 100);\n    // #3:\n    var sound = vwf.callMethod(this.id, \"getSound\", [\"/sas/assets/c253157d\"]);\n\n    // if (sound == null || !sound.isPlaying())\n    {\n        this.audioAPI.playSound(\"/sas/assets/c253157d\", true, 200, false);\n    }","parameters":[]},"playMotorSputtering":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorSputtering\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playWarning":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playWarning\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"randomIntFromInterval":{"body":"return Math.floor(Math.random()*(max-min+1)+min);","parameters":["min","max"]},"ready":{"body":"// The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\", this._kd, this);\n    this.Scene.unbind(\"keyUp\", this._ku, this);\n    var self = this;\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d)\n    };\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d)\n    };\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"tick":{"body":"console.log(this.facPeerMovementCandidate);\n    this.userControlCounter--;\n    this.doBuoyancy();\n    this.notifyPeers();\n    if (this.facPeerMovementCandidate && !this.isUserControlled())\n    {\n        this.moveToAvoidPeer();\n        \n        return;\n\n    }\n    this.facPeerMovementCandidate = null;\n\n    if (this.isUserControlled())\n    {\n        this.isSlave = false;\n        this.doUserInput();\n    }\n    else\n    {\n        this.isSlave = true;\n        this.doAIBehaviors();\n    }","parameters":[]},"verifyCamera":{"body":"if(!this.controllingCamera)\n        return true;\n    var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;","parameters":[]}},"properties":{"DisplayName":"FAC","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"aiState":{"displayname":"AI Behavior","labels":["attack","flee","wait"],"property":"aiActiveState","type":"choice","values":["attack","flee","wait"]},"aiTargetID":{"displayname":"Target Object","property":"aiTargetID","type":"nodeid"},"bullets_50_cal":{"displayname":"Bullets (50 cal)","max":100000,"min":1,"property":"bullets_50_cal","type":"slider"},"fuel":{"displayname":"Fuel","max":1000,"min":1,"property":"fuel","type":"slider"},"fuelConsumptionRate":{"displayname":"Fuel Consumption Rate","max":1,"min":0,"property":"fuelConsumptionRate","step":0.01,"type":"slider"},"health":{"displayname":"Health","max":1000,"min":1,"property":"health","type":"slider"},"hostile":{"displayname":"Hostile","property":"hostile","type":"check"},"hullStrength":{"displayname":"Hull Strength","max":1000,"min":1,"property":"hullStrength","type":"slider"},"rangeToTarget":{"displayname":"Range to Target","max":5000,"min":0,"property":"rangeToTarget","step":100,"type":"slider"},"rockets":{"displayname":"Rockets","max":25,"min":0,"property":"rockets","type":"slider"}},"___physics_activation_state":4,"___physics_angular_velocity":[0.02608,-0.136371,0.000363],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.01887,0.10297,-0.002883],"___physics_mass":8051.2,"___physics_velocity_angular":[-0.006486,-0.029204,0.000064],"___physics_velocity_linear":[-0.000001,-0.000001,-0.000011],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:43:10 GMT-0500 (Eastern Standard Time)","_keysDown":[],"_length":7,"activeState":"active","aiActiveState":"attack","aiStates":{"attack":{"updateFunc":"aiAttack"},"circle":{"updateFunc":"aiCircle"},"circlecc":{"updateFunc":"aiCirclecc"},"defeated":{"updateFunc":"aiDefeated"},"fire":{"updateFunc":"aiFire"},"flee":{"updateFunc":"aiFlee"},"moveAway":{"updateFunc":"aiMoveAway"},"shoot":{"updateFunc":"aiShoot"},"wait":{"updateFunc":"aiWait"}},"aiTargetID":"-sas-assets-874eb90b-N37ac1079","bullets_50_cal":987,"controllingCamera":"SandboxCamera-vwf-Na1b51046","counter":15544,"currentState":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"destroyedFACDef":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","alphaRange":0,"alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterSize":[2,2,2],"emitterType":"box","endAlpha":0.04,"endColor":[0,0,0,0.04],"endSize":5,"gravity":0.77,"image":"../vwfDataManager.svc/texture?UID=water.png","maxAcceleration":[0,0,9.82],"maxLifeTime":2,"maxRate":0.614,"maxSpin":1,"maxVelocity":[1,1,1],"minAcceleration":[0,0,9.82],"minLifeTime":1,"minSpin":-1,"minVelocity":[-1,-1,1],"owner":"ADLteam","particleCount":200,"rotation":[1,0,0,0],"sizeRange":0.02,"solver":"AnalyticShader","startAlpha":1,"startColor":[1,1,1,1],"startSize":1,"textureTiles":4,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","velocityMode":"cartesian"},"random":{"c":1,"s0":0.069964,"s1":0.034293,"s2":0.282638},"sequence":0},"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"facPeerMovementCandidate":null,"fuel":84.209999,"fuelConsumptionRate":0.01,"health":45,"height":1.2,"hostile":true,"hullStrength":100,"isSlave":false,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"hostile":true,"launchedBy":"","transform":[-0.024,-0.092306,0.995439,0,-0.981998,-0.184443,-0.04078,0,0.187365,-0.978498,-0.086218,0,229.96614,-822.763489,22.168992,1]}},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rangeToTarget":1000,"rockets":6,"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Na1da5cfd","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"1ad6adad","states":{"approaching":{"name":"approaching","properties":{},"transitionFunction":"approachingTransition","transitions":["approaching","moving_away","idle","out_of_gas","fire_rocket","colliding","defeated"],"updateFunction":"approachingUpdate"},"colliding":{"name":"colliding","properties":{},"transitionFunction":"collidingTransition","transitions":["colliding","defeated"],"updateFunction":"collidingUpdate"},"defeated":{"name":"defeated","properties":{},"transitionFunction":"defeatedTransition","transitions":["defeated"],"updateFunction":"defeatedUpdate"},"fire_rocket":{"name":"fire_rocket","properties":{},"transitionFunction":"fire_rocketTransition","transitions":["approaching","fire_rocket","moving_away","idle","colliding","defeated"],"updateFunction":"fire_rocketUpdate"},"idle":{"name":"idle","properties":{},"transitionFunction":"idleTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"idleUpdate"},"moving_away":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"out_of_gas":{"name":"out_of_gas","properties":{},"transitionFunction":"out_of_gasTransition","transitions":["out_of_gas","colliding","defeated"],"updateFunction":"out_of_gasUpdate"}},"tickCount":10,"transform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,560,-1830,20.75,1],"type":"Primitive","userControlCounter":0,"visible":false,"warningsReceived":0,"width":2.5,"worldPosition":[560,-1830,20.75],"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,560,-1830,20.75,1]},"random":{"c":585912,"s0":0.374194,"s1":0.097423,"s2":0.618839},"sequence":0,"name":"N75c16de3"},{"children":{"N9ba67b87":{"extends":"Seek.vwf","properties":{"DisplayName":"seek1","Offset":[8,0,2],"Target":"-sas-assets-1ad6adad-N560f3127","owner":"ADLteam","strength":1,"type":"behavior"},"random":{"c":1,"s0":0.127052,"s1":0.514706,"s2":0.823928},"sequence":0,"name":"N9ba67b87"}},"extends":"SandboxCamera.vwf","methods":{"tick":{"body":"var node = this.Scene.findNodeByID(this.objectToLookAt);\n    var pos = [0, 0, 0];\n    if (node)\n        pos = node.transformAPI.localToGlobal([0, 0, 0]);\n    var offset = this.offset;\n    offset = MATH.scaleVec3(offset, this.zoom);\n\n    this.transformAPI.lookat(pos, '', '-Y', 'Z');","parameters":[]}},"properties":{"DisplayName":"FAC Master Cam","EditorData":{"Target":{"displayname":"Target","property":"objectToLookAt","type":"nodeid"}},"far":10000,"last_x":0,"last_y":0,"mousedown":0,"objectToLookAt":"-sas-assets-1ad6adad-N560f3127","offset":[1,0,0],"owner":"ADLteam","quaternion":[-0.168121,0.013128,-0.076735,0.982687],"rotation":[-0.907434,0.070859,-0.414178,21.353824],"scale":[1,0.998998,0.999],"sourceAssetId":"48168dbd","transform":[0.982245981693268,0.18758399784565,0,0,-0.181565001606941,0.950716018676758,-0.247330993413925,0,-0.0463959984481335,0.242937996983528,0.967894971370697,0,247,-911,22.75,1],"translation":[-4.978086,-9.806168,1.459538],"worldTransform":[0.982245981693268,0.18758399784565,0,0,-0.181565001606941,0.950716018676758,-0.247330993413925,0,-0.0463959984481335,0.242937996983528,0.967894971370697,0,247,-911,22.75,1],"zoom":1},"random":{"c":1,"s0":0.762165,"s1":0.779216,"s2":0.235236},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"N7ce6c503"},{"children":{"-sas-assets-1ad6adad-N7ddbe71N83e3ec00":{"extends":"box2.vwf","properties":{"DisplayName":"WaterBlocker","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":0.18,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":0,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":11,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1],"type":"Primitive","visible":false,"width":2.18},"random":{"c":1,"s0":0.198099,"s1":0.027581,"s2":0.352169},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N7ddbe71N83e3ec00"},"-sas-assets-1ad6adad-N7ddbe71N8c4837dd":{"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.240602999925613,-0.0218209996819496,0.970376014709473,0,0.00100100005511194,-0.999741971492767,-0.0227310005575418,0,0.970619022846222,0.00644000014290214,-0.240521997213364,0,1,0,1.49999904632568,1],"type":"Primitive","visible":false,"width":1.36,"worldTransform":[-0.0130935087800026,-0.241505414247513,0.970308423042297,0,-0.980116665363312,-0.189041972160339,-0.0602767691016197,0,0.197986945509911,-0.951804041862488,-0.234232410788536,0,479.630981445313,-1989.73388671875,22.2549629211426,1]},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N7ddbe71N8c4837dd"},"-sas-assets-1ad6adad-N7ddbe71N8cf5a8e2":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.99999997475243e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380481854081154,-0.00112601777072996,0.999275028705597,0,480.092651367188,-1991.69555664063,20.0186958312988,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"-sas-assets-1ad6adad-N7ddbe71N8cf5a8e2"},"-sas-assets-1ad6adad-N7ddbe71Ned0c4c0a":{"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(args);","parameters":["args"]}},"properties":{"DisplayName":"3D_model","___assetServerOriginalID":"Ned0c4c0a","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 13:10:22 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-9.99999997475243e-7,100.399002075195,0,0,-100.301002502441,-9.99999997475243e-7,0,0,0,0,100.294998168945,0,0.5,0,-0.5,1],"worldPosition":[479.613037109375,-1989.24047851563,20.2533874511719]},"random":{"c":1,"s0":0.434828,"s1":0.189991,"s2":0.484111},"sequence":0,"source":"/sas/assets/a31ba113","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-1ad6adad-N7ddbe71Ned0c4c0a"},"N13203289":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.516194,"s1":0.076558,"s2":0.538814},"sequence":0,"name":"N13203289"},"N3164ba79":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.306256,"s1":0.285063,"s2":0.043495},"sequence":0,"name":"N3164ba79"},"N32219e15":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.240604,-0.021821,0.970376,0,0.001,-0.999742,-0.02273,0,0.97062,0.006441,-0.240522,0,1,0.000001,1.499999,1],"worldTransform":[-0.013091,-0.241507,0.970309,0,-0.980118,-0.189045,-0.060277,0,0.197988,-0.951806,-0.234231,0,340.630981,-881.733826,22.254964,1]},"random":{"c":1,"s0":0.428982,"s1":0.960703,"s2":0.525372},"sequence":0,"name":"N32219e15"},"N4394b4e5":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,243.092651,-892.445557,20.018699,1]},"random":{"c":1,"s0":0.673742,"s1":0.465842,"s2":0.200551},"sequence":0,"name":"N4394b4e5"},"N6afd587a":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[242.613037,-889.990479,20.253389]},"random":{"c":1,"s0":0.210725,"s1":0.008965,"s2":0.419656},"sequence":0,"name":"N6afd587a"},"Nb8d074dd":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,341.092651,-883.695557,20.018699,1]},"random":{"c":1,"s0":0.735406,"s1":0.218858,"s2":0.172233},"sequence":0,"name":"Nb8d074dd"},"Nc46bb4d0":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,1,-0.000001,0,-1.000001,-0.000001,-0.000001,0,-0.000001,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.961765,"s1":0.72625,"s2":0.118456},"sequence":0,"name":"Nc46bb4d0"},"Nc76996dc":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.086185,-0.022558,0.996021,0,0.001,-0.999742,-0.022731,0,0.996276,0.002956,-0.086141,0,1,0,1.5,1],"worldTransform":[-0.043828,-0.090013,0.994974,0,-0.980118,-0.189045,-0.060277,0,0.193519,-0.977833,-0.079938,0,242.630966,-890.483826,22.254964,1]},"random":{"c":1,"s0":0.174441,"s1":0.597858,"s2":0.025507},"sequence":0,"name":"Nc76996dc"},"Nd7ce2eaa":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[340.613037,-881.240479,20.253389]},"random":{"c":1,"s0":0.408461,"s1":0.250207,"s2":0.63391},"sequence":0,"name":"Nd7ce2eaa"}},"continues":"/sas/assets/1ad6adad","extends":"box2.vwf","methods":{"FACMovementDirection":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                // set equal to \"\" after adding calculations:\n                                var movement = \"closing\";\n                                // Perform calculations to determine approaching or moving away states:\n                                //     movement = \"closing\" if distance to target is getting smaller\n                                //     movement = \"none\" if distance to target hasn't changed\n                                //     movement = \"increasing\" if distance to target is getting larger\n                                switch (movement)\n                                {\n                                    case \"closing\":\n                                        this.currentState = this.states[\"approaching\"];\n                                        return \"approaching\";\n                                    case \"none\":\n                                        this.currentState = this.states[\"idle\"];\n                                        return \"idle\";\n                                    case \"increasing\":\n                                        this.currentState = this.states[\"moving_away\"];\n                                        return \"moving_away\";\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this.currentState === null)\n    {\n        console.log(\"Set initial state\");\n        this.currentState = this.states[\"approaching\"];\n    }\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }","parameters":["e","d"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        if (this.rockets > 0)\n        {\n            this.activateState(\"fire_rocket\");\n            console.log(\"rockets: \" + this.rockets);\n\n            console.log(\"Broadcasting leader fire...\");\n            // this.broadcast(\"facLeaderFire\", [], 500);\n        }\n    }","parameters":["e","d"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                //console.log(\"activateState\");\n                                var state = this.states[statename];\n\n                                if (this.currentState.transitions.indexOf(statename) == -1)\n                                {\n                                    console.log(\"invalid transition!\");\n                                    return;\n                                }\n\n                                if (state.transitionFunction)\n                                    this[state.transitionFunction](this.currentState);\n\n                                this.currentState = state;\n\n                                for (var i in state.properties)\n                                {\n                                    console.log(state.properties[i]);\n                                    this[i] = state.properties[i];\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"aiAttack":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n        if (MATH.lengthVec3(targetPos) > attackRange)\n        {\n            if (targetPos[1] > 10)\n                this.doTurn('right')\n            else if (targetPos[1] < -10)\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n    }","parameters":[]},"aiCircle":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] > 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circlecc\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n    }","parameters":[]},"aiCirclecc":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circle\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n\n    }","parameters":[]},"aiDefeated":{"body":"console.log(\"aiDefeated\");","parameters":[]},"aiFire":{"body":"var attachRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n\n        if (targetPos[1] > 0)\n            this.doTurn('right')\n        else\n            this.doTurn('left');\n\n        if (Math.abs(targetPos[1]) < .2)\n        {\n            console.log(\"FIRE!\");\n            this.launchMissile();\n            this.playMissileLaunch();\n            this.rockets = this.rockets - 1;\n            if(this.rockets <= 0)\n            {\n                this.aiActiveState = \"flee\";\n            }\n            else if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiFlee":{"body":"var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n\n        if (targetPos[1] < 10)\n            this.doTurn('right')\n        else if (targetPos[1] > -10)\n            this.doTurn('left');\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiMoveAway":{"body":"var attackRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[1] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n       \n        this.doMoveForward();\n        \n    }","parameters":[]},"aiWait":{"body":"console.log(\"aiWait\");","parameters":[]},"approachingTransition":{"body":"//console.log(\"approachingTransition\");\n    this.approachingUpdate(this.currentState);","parameters":[]},"approachingUpdate":{"body":"//console.log(\"approachingUpdate\");\n    this.currentState = this.states[\"approaching\"];","parameters":["statename"]},"collidingTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingTransition\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"collidingUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingUpdate\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"consumeFuel":{"body":"if (this.fuel <= 0.0)\n    {\n        this.currentState = this.states[\"out_of_gas\"];\n    }\n    else\n    {\n        this.fuel = this.fuel - this.fuelConsumptionRate;\n        //console.log(\"fuel: \" + this.fuel);\n    }","parameters":[]},"createExplosion":{"body":"console.log(\"explosion!!\");\n    var def = this.explosionDef;\n    var pos = this.transformAPI.getWorldPosition();\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = 1;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":[]},"defeatedTransition":{"body":"console.log(\"defeatedTransition\");\n    this.currentState = this.states[\"defeated\"];","parameters":[]},"defeatedUpdate":{"body":"console.log(\"defeatedUpdate\");\n    this.currentState = this.states[\"defeated\"];\n    this.audioAPI.stopSound(\"/sas/assets/c253157d\", true, 200);","parameters":["statename"]},"destroyFAC":{"body":"var def = this.destroyedFACDef;\n    var val1 = this.randomIntFromInterval(1, 360);\n    var val2 = this.randomIntFromInterval(1, 90);\n    var val3 = this.randomIntFromInterval(1, 360);\n    console.log(\"FAC blown up\");\n    this.currentState = this.states[\"defeated\"];\n    this.activeState = \"defeated\";\n    this.aiActiveState = \"defeated\";\n    vwf.createChild(this.id, GUID(), _DataManager.getCleanNodePrototype(def), null);\n    if (this.isSlave)\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(val1, val2, val3);\n    else\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(180, 45, 90);\n    this.children_by_name.WaterBlocker.visible = false;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-defeated\", this.DisplayName + this.id, \"FastAttackCraft\", null);\n    }","parameters":[]},"doAIBehaviors":{"body":"var pos = this.transformAPI.getWorldPosition();\n    //dont' do the AI code if it's not at the water surface\n    if (Math.abs(pos[2] - 20) > 2)\n        return;\n    var state = this.aiStates[this.aiActiveState];\n    console.log(this.aiActiveState);\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doBuoyancy":{"body":"var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }","parameters":[]},"doMoveBackward":{"body":"var mass = this.physicsAPI.getMass();\n    this.consumeFuel();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doMoveForward":{"body":"this.consumeFuel();\n    var mass = this.physicsAPI.getMass();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doTurn":{"body":"var direction = 1;\n    var mass = this.physicsAPI.getMass();\n    if (dir == 'left')\n    {\n        direction = 1;\n    }\n    if (dir == 'right')\n    {\n        direction = -1;\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0]) / 7);\n\n    this.physicsAPI.addTorque(0, 0, direction * speedTorqueFactor * mass * 3);\n    var force = this.transformAPI.localToGlobal(direction * speedTorqueFactor * mass, 0, 0);\n    this.physicsAPI.addTorque(force);","parameters":["dir"]},"doUserInput":{"body":"if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        this.doMoveForward();\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        this.doMoveBackward();\n    }\n\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n        this.doTurn('left');\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n         this.doTurn('right');\n    }\n    if (this._keysDown.indexOf(\" \") !== -1)\n    {\n        if (this.rockets > 0)\n        {\n            this.currentState = this.states[\"fire_rocket\"];\n        }\n        else\n        {\n            this.currentState = this.states[\"moving_away\"];\n        }\n    }","parameters":[]},"facPeerInput":{"body":"//console.log(\"facPeerInput Received: \" + args);\n   \n    if (args[1] == this.id) return;\n\n    /*if (this.facPeerMovementCandidate.length > 0)\n    {\n        var current_pos = this.transformAPI.getPosition();\n        var last_pos = this.facPeerMovementCandidate;\n        var incoming_pos = args[0];\n\n        if (MATH.distanceVec3(current_pos, incoming_pos) < MATH.distanceVec3(current_pos, last_pos))\n        {\n            this.facPeerMovementCandidate = args;\n        }\n    }\n    else\n    {*/\n    this.facPeerMovementCandidate = args;\n    //}","parameters":["args"]},"fire_rocketTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketTransition\");\n                                this.fire_rocketUpdate(this.currentState);    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"fire_rocketUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketUpdate\");\n                                this.launchMissile();\n                                this.playMissileLaunch();\n                                this.rockets = this.rockets - 1;\n                                if (this.rockets > 0)\n                                {\n                                    this.currentState = this.states[\"fire_rocket\"];\n                                    console.log(\"rocketUpdate state fire \");\n                                }\n                                else\n                                {\n                                    this.currentState = this.states[\"idle\"];\n                                    console.log(\"rocketUpdate state idle\");\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"hit":{"body":"this.audioAPI.playSound(\"/sas/assets/bc13daa3\", false, 200, true);\n    if (this.currentState.name == \"defeated\") return;\n\n    var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n    {\n        this.health -= force;\n\n    }\n    else\n    {\n        this.health -= 101;\n    }\n    if (this.health < 0)\n    {\n        this.hostile = false;\n        this.createExplosion();\n        this.destroyFAC();\n    }","parameters":["args"]},"idleTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleTransition\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"idleUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleUpdate\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"isUserControlled":{"body":"var thisCam = this.controllingCamera;\n\n    return this._keysDown.length !== 0 ||( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"launchMissile":{"body":"var def = this.missileDef;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'FAC Missile', 'Fast Attack Craft', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"moveToAvoidPeer":{"body":"var peer_info = this.facPeerMovementCandidate;\n    if (!peer_info) return false;\n\n    if (peer_info[1] == this.id) return;\n\n    var safe_distance = peer_info[3] || 50;\n    var mass = this.physicsAPI.getMass();\n\n    // Get peer world position\n    var peer_pos = peer_info[0];\n\n    // Get my world position\n    var my_pos = this.transformAPI.getWorldPosition();\n\n    // Get the distance between me and the leader\n    var distance = MATH.distanceVec3(peer_pos, my_pos);\n    //console.log(\"facFollowBehavior: distance: \" + distance);\n\n    if (distance < safe_distance)\n    {\n        //console.log(\"Move to Avoid Peer (\" + this.id + \")\");\n        var direction = MATH.subVec3(my_pos, peer_pos);\n        //console.log(\"diff: \" + direction);\n\n        direction[2] = 0;\n\n        var norm_direction = MATH.toUnitVec3(direction);\n\n        norm_direction = this.transformAPI.globalToLocalRotation(norm_direction);\n\n        var x = norm_direction[0];\n        var y = norm_direction[1];\n\n        //console.log(\"x: \" + x);\n        //console.log(\"y: \" + y);\n\n        var peer_heading = this.transformAPI.globalToLocalRotation(peer_info[2]);\n\n        //console.log(peer_heading);\n\n        // if the peer is headed right at me, then I should turn right\n        //      if (peer_heading[0] > 0 && Math.abs(peer_heading[1]) < .25)\n        //        {\n        //console.log(\"peer heading at me, turn right!\");\n        //          this.doTurn('right');\n        //    }\n        //  else\n        {\n            if (y >= 0)\n            {\n                if (x > 0) // 1st quadrant\n                {\n                    this.doTurn('right');\n                }\n                else // 2nd quadrant\n                {\n\n                    //this.doTurn('left');\n                }\n            }\n            else\n            {\n                if (x > 0) // 4th quardrant\n                {\n                    this.doTurn('left');\n                }\n                else // 3rd quadrant\n                {\n\n                    //this.doTurn('right');\n                }\n            }\n        }\n    }\n    else\n    {\n        this.facPeerMovementCandidate = null;\n    }\n\n    this.doMoveForward();\n\n    return true;","parameters":[]},"moving_awayTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayTransition\");\n                                this.moving_awayUpdate(this.currentState);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"moving_awayUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayUpdate\");\n                                this.currentState = this.states[\"moving_away\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"notifyPeers":{"body":"var my_position = this.transformAPI.getPosition();\n    this.tickCount++;\n    if (this.tickCount == 4 || this.tickCount == 8)\n    {\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward], 50);\n    }\n\n    if (this.tickCount > 10)\n    {\n        var leader_projection = this.transformAPI.localToGlobal(-150, 0, 0);\n\n        this.broadcast(\"facLeaderInput\", [leader_projection], 500);\n        this.tickCount = 0;\n    }","parameters":[]},"out_of_gasTransition":{"body":"console.log(\"out_of_gasTransition\");\n    //this.currentState = this.states[\"out_of_gas\"];\n    this.out_of_gasUpdate(this.currentState);\n\n    // var sender = this.Scene.children_by_name.xAPISender;\n    // if (sender)\n    // {\n    //     sender.xAPISend(\"ran-out-of-gas\", this.DisplayName, \"FastAttackCraft\", null);\n    // }","parameters":[]},"out_of_gasUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"out_of_gasUpdate\");\n                                console.log(statename);\n                                if (this.fuel <= 0)\n                                {\n                                    this.currentState = this.states[\"out_of_gas\"];\n                                    console.log(\"out_of_gasUpdate now out_of_gas state\");\n                                }\n                                else if (this.hullStrength <= 0)\n                                {\n                                    this.currentState = this.states[\"defeated\"];\n                                    console.log(\"out_of_gasUpdate now defaeted state\");\n                                }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"playBulletHittingMetal":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingMetal\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletHittingWater":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingWater\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletWhizzingBy":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletWhizzingBy\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playExplosion":{"body":"console.log(\"playExplosion\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/8d358349\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/d714ebe1\", false, 100);\n    // #3:\n    this.audioAPI.playSound(\"/sas/assets/3c6b353e\", false, 1000);","parameters":[]},"playHelicopter":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               //console.log(\"playHelicopter\");\n                                // #1:\n                                //this.audioAPI.playSound(\"/sas/assets/af90534a\", false, 100);\n                                //#2:\n                                this.audioAPI.playSound(\"/sas/assets/dc81768a\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMissileLaunch":{"body":"console.log(\"playMissileLaunch\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/744acf2e\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);\n    // #3:\n    //this.audioAPI.playSound(\"/sas/assets/10b027bd\", false, 100);\n    // #4:\n    //this.audioAPI.playSound(\"/sas/assets/94d508e3\", false, 100);\n    // #5:\n    this.audioAPI.playSound(\"/sas/assets/263beb86\", false, 400);","parameters":[]},"playMotorIdle":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorIdle\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMotorRunning":{"body":"//console.log(\"playMotorRunning\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/2cb9fef9\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/994ee0c8\", false, 100);\n    // #3:\n    var sound = vwf.callMethod(this.id, \"getSound\", [\"/sas/assets/c253157d\"]);\n\n    // if (sound == null || !sound.isPlaying())\n    {\n        this.audioAPI.playSound(\"/sas/assets/c253157d\", true, 200, false);\n    }","parameters":[]},"playMotorSputtering":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorSputtering\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playWarning":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playWarning\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"randomIntFromInterval":{"body":"return Math.floor(Math.random()*(max-min+1)+min);","parameters":["min","max"]},"ready":{"body":"// The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\", this._kd, this);\n    this.Scene.unbind(\"keyUp\", this._ku, this);\n    var self = this;\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d)\n    };\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d)\n    };\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"tick":{"body":"console.log(this.facPeerMovementCandidate);\n    this.userControlCounter--;\n    this.doBuoyancy();\n    this.notifyPeers();\n    if (this.facPeerMovementCandidate && !this.isUserControlled())\n    {\n        this.moveToAvoidPeer();\n        \n        return;\n\n    }\n    this.facPeerMovementCandidate = null;\n\n    if (this.isUserControlled())\n    {\n        this.isSlave = false;\n        this.doUserInput();\n    }\n    else\n    {\n        this.isSlave = true;\n        this.doAIBehaviors();\n    }","parameters":[]},"verifyCamera":{"body":"if(!this.controllingCamera)\n        return true;\n    var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;","parameters":[]}},"properties":{"DisplayName":"FAC","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"aiState":{"displayname":"AI Behavior","labels":["attack","flee","wait"],"property":"aiActiveState","type":"choice","values":["attack","flee","wait"]},"aiTargetID":{"displayname":"Target Object","property":"aiTargetID","type":"nodeid"},"bullets_50_cal":{"displayname":"Bullets (50 cal)","max":100000,"min":1,"property":"bullets_50_cal","type":"slider"},"fuel":{"displayname":"Fuel","max":1000,"min":1,"property":"fuel","type":"slider"},"fuelConsumptionRate":{"displayname":"Fuel Consumption Rate","max":1,"min":0,"property":"fuelConsumptionRate","step":0.01,"type":"slider"},"health":{"displayname":"Health","max":1000,"min":1,"property":"health","type":"slider"},"hostile":{"displayname":"Hostile","property":"hostile","type":"check"},"hullStrength":{"displayname":"Hull Strength","max":1000,"min":1,"property":"hullStrength","type":"slider"},"rangeToTarget":{"displayname":"Range to Target","max":5000,"min":0,"property":"rangeToTarget","step":100,"type":"slider"},"rockets":{"displayname":"Rockets","max":25,"min":0,"property":"rockets","type":"slider"}},"___physics_activation_state":4,"___physics_angular_velocity":[0.02608,-0.136371,0.000363],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.01887,0.10297,-0.002883],"___physics_mass":8051.2,"___physics_velocity_angular":[-0.006486,-0.029204,0.000064],"___physics_velocity_linear":[-0.000001,-0.000001,-0.000011],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:43:10 GMT-0500 (Eastern Standard Time)","_keysDown":[],"_length":7,"activeState":"active","aiActiveState":"attack","aiStates":{"attack":{"updateFunc":"aiAttack"},"circle":{"updateFunc":"aiCircle"},"circlecc":{"updateFunc":"aiCirclecc"},"defeated":{"updateFunc":"aiDefeated"},"fire":{"updateFunc":"aiFire"},"flee":{"updateFunc":"aiFlee"},"moveAway":{"updateFunc":"aiMoveAway"},"shoot":{"updateFunc":"aiShoot"},"wait":{"updateFunc":"aiWait"}},"aiTargetID":"-sas-assets-874eb90b-N37ac1079","bullets_50_cal":987,"controllingCamera":"asset-vwf-Nf1bee40d","counter":15544,"currentState":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"destroyedFACDef":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","alphaRange":0,"alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterSize":[2,2,2],"emitterType":"box","endAlpha":0.04,"endColor":[0,0,0,0.04],"endSize":5,"gravity":0.77,"image":"../vwfDataManager.svc/texture?UID=water.png","maxAcceleration":[0,0,9.82],"maxLifeTime":2,"maxRate":0.614,"maxSpin":1,"maxVelocity":[1,1,1],"minAcceleration":[0,0,9.82],"minLifeTime":1,"minSpin":-1,"minVelocity":[-1,-1,1],"owner":"ADLteam","particleCount":200,"rotation":[1,0,0,0],"sizeRange":0.02,"solver":"AnalyticShader","startAlpha":1,"startColor":[1,1,1,1],"startSize":1,"textureTiles":4,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","velocityMode":"cartesian"},"random":{"c":1,"s0":0.069964,"s1":0.034293,"s2":0.282638},"sequence":0},"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"facPeerMovementCandidate":null,"fuel":84.209999,"fuelConsumptionRate":0.01,"health":45,"height":1.2,"hostile":true,"hullStrength":100,"isSlave":false,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"hostile":true,"launchedBy":"","transform":[-0.024,-0.092306,0.995439,0,-0.981998,-0.184443,-0.04078,0,0.187365,-0.978498,-0.086218,0,229.96614,-822.763489,22.168992,1]}},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rangeToTarget":1000,"rockets":6,"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Na1da5cfd","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"1ad6adad","states":{"approaching":{"name":"approaching","properties":{},"transitionFunction":"approachingTransition","transitions":["approaching","moving_away","idle","out_of_gas","fire_rocket","colliding","defeated"],"updateFunction":"approachingUpdate"},"colliding":{"name":"colliding","properties":{},"transitionFunction":"collidingTransition","transitions":["colliding","defeated"],"updateFunction":"collidingUpdate"},"defeated":{"name":"defeated","properties":{},"transitionFunction":"defeatedTransition","transitions":["defeated"],"updateFunction":"defeatedUpdate"},"fire_rocket":{"name":"fire_rocket","properties":{},"transitionFunction":"fire_rocketTransition","transitions":["approaching","fire_rocket","moving_away","idle","colliding","defeated"],"updateFunction":"fire_rocketUpdate"},"idle":{"name":"idle","properties":{},"transitionFunction":"idleTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"idleUpdate"},"moving_away":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"out_of_gas":{"name":"out_of_gas","properties":{},"transitionFunction":"out_of_gasTransition","transitions":["out_of_gas","colliding","defeated"],"updateFunction":"out_of_gasUpdate"}},"tickCount":10,"transform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,479.5,-1988.75,20.75,1],"type":"Primitive","userControlCounter":0,"visible":false,"warningsReceived":0,"width":2.5,"worldPosition":[479.5,-1988.75,20.75],"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,479.5,-1988.75,20.75,1]},"random":{"c":308513,"s0":0.559368,"s1":0.806205,"s2":0.301024},"sequence":0,"name":"N7ddbe71"},{"children":{"-sas-assets-1ad6adad-N9e027ed0N83e3ec00":{"extends":"box2.vwf","properties":{"DisplayName":"WaterBlocker","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":0.18,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":0,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":11,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1],"type":"Primitive","visible":false,"width":2.18},"random":{"c":1,"s0":0.198099,"s1":0.027581,"s2":0.352169},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N9e027ed0N83e3ec00"},"-sas-assets-1ad6adad-N9e027ed0N8c4837dd":{"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.240602999925613,-0.0218209996819496,0.970376014709473,0,0.00100100005511194,-0.999741971492767,-0.0227310005575418,0,0.970619022846222,0.00644000014290214,-0.240521997213364,0,1,0,1.49999904632568,1],"type":"Primitive","visible":false,"width":1.36,"worldTransform":[-0.0130935087800026,-0.241505414247513,0.970308423042297,0,-0.980116665363312,-0.189041972160339,-0.0602767691016197,0,0.197986945509911,-0.951804041862488,-0.234232410788536,0,-4536.119140625,1383.76611328125,22.2549629211426,1]},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-N9e027ed0N8c4837dd"},"-sas-assets-1ad6adad-N9e027ed0N8cf5a8e2":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.99999997475243e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380481854081154,-0.00112601777072996,0.999275028705597,0,-4535.6572265625,1381.80444335938,20.0186958312988,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"-sas-assets-1ad6adad-N9e027ed0N8cf5a8e2"},"-sas-assets-1ad6adad-N9e027ed0Ned0c4c0a":{"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(args);","parameters":["args"]}},"properties":{"DisplayName":"3D_model","___assetServerOriginalID":"Ned0c4c0a","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 13:10:22 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-9.99999997475243e-7,100.399002075195,0,0,-100.301002502441,-9.99999997475243e-7,0,0,0,0,100.294998168945,0,0.5,0,-0.5,1],"worldPosition":[-4536.13671875,1384.25952148438,20.2533874511719]},"random":{"c":1,"s0":0.434828,"s1":0.189991,"s2":0.484111},"sequence":0,"source":"/sas/assets/a31ba113","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-1ad6adad-N9e027ed0Ned0c4c0a"},"N5fa0e27b":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,361.842651,-2044.445557,20.018699,1]},"random":{"c":1,"s0":0.342212,"s1":0.755817,"s2":0.820273},"sequence":0,"name":"N5fa0e27b"},"N7a30db5c":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,1,-0.000001,0,-1.000001,-0.000001,-0.000001,0,-0.000001,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.961765,"s1":0.72625,"s2":0.118456},"sequence":0,"name":"N7a30db5c"},"N8b25243f":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.086185,-0.022558,0.996021,0,0.001,-0.999742,-0.022731,0,0.996276,0.002956,-0.086141,0,1,0,1.5,1],"worldTransform":[-0.043828,-0.090013,0.994974,0,-0.980118,-0.189045,-0.060277,0,0.193519,-0.977833,-0.079938,0,242.630966,-890.483826,22.254964,1]},"random":{"c":1,"s0":0.174441,"s1":0.597858,"s2":0.025507},"sequence":0,"name":"N8b25243f"},"N956b8502":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,243.092651,-892.445557,20.018699,1]},"random":{"c":1,"s0":0.673742,"s1":0.465842,"s2":0.200551},"sequence":0,"name":"N956b8502"},"Nc1372aa4":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.240604,-0.021821,0.970376,0,0.001,-0.999742,-0.02273,0,0.97062,0.006441,-0.240522,0,1,0.000001,1.499999,1],"worldTransform":[-0.013091,-0.241507,0.970309,0,-0.980118,-0.189045,-0.060277,0,0.197988,-0.951806,-0.234231,0,361.380981,-2042.483887,22.254964,1]},"random":{"c":1,"s0":0.533505,"s1":0.455356,"s2":0.597197},"sequence":0,"name":"Nc1372aa4"},"Nd28d57f":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[361.363037,-2041.990479,20.253389]},"random":{"c":1,"s0":0.20957,"s1":0.035162,"s2":0.69045},"sequence":0,"name":"Nd28d57f"},"Ndbf732b9":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[242.613037,-889.990479,20.253389]},"random":{"c":1,"s0":0.210725,"s1":0.008965,"s2":0.419656},"sequence":0,"name":"Ndbf732b9"},"Nf35a36a4":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.306256,"s1":0.285063,"s2":0.043495},"sequence":0,"name":"Nf35a36a4"},"Nf6bb622d":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.997594,"s1":0.24193,"s2":0.950543},"sequence":0,"name":"Nf6bb622d"}},"continues":"/sas/assets/1ad6adad","extends":"box2.vwf","methods":{"FACMovementDirection":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                // set equal to \"\" after adding calculations:\n                                var movement = \"closing\";\n                                // Perform calculations to determine approaching or moving away states:\n                                //     movement = \"closing\" if distance to target is getting smaller\n                                //     movement = \"none\" if distance to target hasn't changed\n                                //     movement = \"increasing\" if distance to target is getting larger\n                                switch (movement)\n                                {\n                                    case \"closing\":\n                                        this.currentState = this.states[\"approaching\"];\n                                        return \"approaching\";\n                                    case \"none\":\n                                        this.currentState = this.states[\"idle\"];\n                                        return \"idle\";\n                                    case \"increasing\":\n                                        this.currentState = this.states[\"moving_away\"];\n                                        return \"moving_away\";\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this.currentState === null)\n    {\n        console.log(\"Set initial state\");\n        this.currentState = this.states[\"approaching\"];\n    }\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }","parameters":["e","d"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        if (this.rockets > 0)\n        {\n            this.activateState(\"fire_rocket\");\n            console.log(\"rockets: \" + this.rockets);\n\n            console.log(\"Broadcasting leader fire...\");\n            // this.broadcast(\"facLeaderFire\", [], 500);\n        }\n    }","parameters":["e","d"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                //console.log(\"activateState\");\n                                var state = this.states[statename];\n\n                                if (this.currentState.transitions.indexOf(statename) == -1)\n                                {\n                                    console.log(\"invalid transition!\");\n                                    return;\n                                }\n\n                                if (state.transitionFunction)\n                                    this[state.transitionFunction](this.currentState);\n\n                                this.currentState = state;\n\n                                for (var i in state.properties)\n                                {\n                                    console.log(state.properties[i]);\n                                    this[i] = state.properties[i];\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"aiAttack":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n        if (MATH.lengthVec3(targetPos) > attackRange)\n        {\n            if (targetPos[1] > 10)\n                this.doTurn('right')\n            else if (targetPos[1] < -10)\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n    }","parameters":[]},"aiCircle":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] > 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circlecc\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n    }","parameters":[]},"aiCirclecc":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circle\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n\n    }","parameters":[]},"aiDefeated":{"body":"console.log(\"aiDefeated\");","parameters":[]},"aiFire":{"body":"var attachRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n\n        if (targetPos[1] > 0)\n            this.doTurn('right')\n        else\n            this.doTurn('left');\n\n        if (Math.abs(targetPos[1]) < .2)\n        {\n            console.log(\"FIRE!\");\n            this.launchMissile();\n            this.playMissileLaunch();\n            this.rockets = this.rockets - 1;\n            if(this.rockets <= 0)\n            {\n                this.aiActiveState = \"flee\";\n            }\n            else if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiFlee":{"body":"var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n\n        if (targetPos[1] < 10)\n            this.doTurn('right')\n        else if (targetPos[1] > -10)\n            this.doTurn('left');\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiMoveAway":{"body":"var attackRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[1] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n       \n        this.doMoveForward();\n        \n    }","parameters":[]},"aiWait":{"body":"console.log(\"aiWait\");","parameters":[]},"approachingTransition":{"body":"//console.log(\"approachingTransition\");\n    this.approachingUpdate(this.currentState);","parameters":[]},"approachingUpdate":{"body":"//console.log(\"approachingUpdate\");\n    this.currentState = this.states[\"approaching\"];","parameters":["statename"]},"collidingTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingTransition\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"collidingUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingUpdate\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"consumeFuel":{"body":"if (this.fuel <= 0.0)\n    {\n        this.currentState = this.states[\"out_of_gas\"];\n    }\n    else\n    {\n        this.fuel = this.fuel - this.fuelConsumptionRate;\n        //console.log(\"fuel: \" + this.fuel);\n    }","parameters":[]},"createExplosion":{"body":"console.log(\"explosion!!\");\n    var def = this.explosionDef;\n    var pos = this.transformAPI.getWorldPosition();\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = 1;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":[]},"defeatedTransition":{"body":"console.log(\"defeatedTransition\");\n    this.currentState = this.states[\"defeated\"];","parameters":[]},"defeatedUpdate":{"body":"console.log(\"defeatedUpdate\");\n    this.currentState = this.states[\"defeated\"];\n    this.audioAPI.stopSound(\"/sas/assets/c253157d\", true, 200);","parameters":["statename"]},"destroyFAC":{"body":"var def = this.destroyedFACDef;\n    var val1 = this.randomIntFromInterval(1, 360);\n    var val2 = this.randomIntFromInterval(1, 90);\n    var val3 = this.randomIntFromInterval(1, 360);\n    console.log(\"FAC blown up\");\n    this.currentState = this.states[\"defeated\"];\n    this.activeState = \"defeated\";\n    this.aiActiveState = \"defeated\";\n    vwf.createChild(this.id, GUID(), _DataManager.getCleanNodePrototype(def), null);\n    if (this.isSlave)\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(val1, val2, val3);\n    else\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(180, 45, 90);\n    this.children_by_name.WaterBlocker.visible = false;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-defeated\", this.DisplayName + this.id, \"FastAttackCraft\", null);\n    }","parameters":[]},"doAIBehaviors":{"body":"var pos = this.transformAPI.getWorldPosition();\n    //dont' do the AI code if it's not at the water surface\n    if (Math.abs(pos[2] - 20) > 2)\n        return;\n    var state = this.aiStates[this.aiActiveState];\n    console.log(this.aiActiveState);\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doBuoyancy":{"body":"var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }","parameters":[]},"doMoveBackward":{"body":"var mass = this.physicsAPI.getMass();\n    this.consumeFuel();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doMoveForward":{"body":"this.consumeFuel();\n    var mass = this.physicsAPI.getMass();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doTurn":{"body":"var direction = 1;\n    var mass = this.physicsAPI.getMass();\n    if (dir == 'left')\n    {\n        direction = 1;\n    }\n    if (dir == 'right')\n    {\n        direction = -1;\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0]) / 7);\n\n    this.physicsAPI.addTorque(0, 0, direction * speedTorqueFactor * mass * 3);\n    var force = this.transformAPI.localToGlobal(direction * speedTorqueFactor * mass, 0, 0);\n    this.physicsAPI.addTorque(force);","parameters":["dir"]},"doUserInput":{"body":"if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        this.doMoveForward();\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        this.doMoveBackward();\n    }\n\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n        this.doTurn('left');\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n         this.doTurn('right');\n    }\n    if (this._keysDown.indexOf(\" \") !== -1)\n    {\n        if (this.rockets > 0)\n        {\n            this.currentState = this.states[\"fire_rocket\"];\n        }\n        else\n        {\n            this.currentState = this.states[\"moving_away\"];\n        }\n    }","parameters":[]},"facPeerInput":{"body":"//console.log(\"facPeerInput Received: \" + args);\n   \n    if (args[1] == this.id) return;\n\n    /*if (this.facPeerMovementCandidate.length > 0)\n    {\n        var current_pos = this.transformAPI.getPosition();\n        var last_pos = this.facPeerMovementCandidate;\n        var incoming_pos = args[0];\n\n        if (MATH.distanceVec3(current_pos, incoming_pos) < MATH.distanceVec3(current_pos, last_pos))\n        {\n            this.facPeerMovementCandidate = args;\n        }\n    }\n    else\n    {*/\n    this.facPeerMovementCandidate = args;\n    //}","parameters":["args"]},"fire_rocketTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketTransition\");\n                                this.fire_rocketUpdate(this.currentState);    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"fire_rocketUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketUpdate\");\n                                this.launchMissile();\n                                this.playMissileLaunch();\n                                this.rockets = this.rockets - 1;\n                                if (this.rockets > 0)\n                                {\n                                    this.currentState = this.states[\"fire_rocket\"];\n                                    console.log(\"rocketUpdate state fire \");\n                                }\n                                else\n                                {\n                                    this.currentState = this.states[\"idle\"];\n                                    console.log(\"rocketUpdate state idle\");\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"hit":{"body":"this.audioAPI.playSound(\"/sas/assets/bc13daa3\", false, 200, true);\n    if (this.currentState.name == \"defeated\") return;\n\n    var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n    {\n        this.health -= force;\n\n    }\n    else\n    {\n        this.health -= 101;\n    }\n    if (this.health < 0)\n    {\n        this.hostile = false;\n        this.createExplosion();\n        this.destroyFAC();\n    }","parameters":["args"]},"idleTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleTransition\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"idleUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleUpdate\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"isUserControlled":{"body":"var thisCam = this.controllingCamera;\n\n    return this._keysDown.length !== 0 ||( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"launchMissile":{"body":"var def = this.missileDef;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'FAC Missile', 'Fast Attack Craft', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"moveToAvoidPeer":{"body":"var peer_info = this.facPeerMovementCandidate;\n    if (!peer_info) return false;\n\n    if (peer_info[1] == this.id) return;\n\n    var safe_distance = peer_info[3] || 50;\n    var mass = this.physicsAPI.getMass();\n\n    // Get peer world position\n    var peer_pos = peer_info[0];\n\n    // Get my world position\n    var my_pos = this.transformAPI.getWorldPosition();\n\n    // Get the distance between me and the leader\n    var distance = MATH.distanceVec3(peer_pos, my_pos);\n    //console.log(\"facFollowBehavior: distance: \" + distance);\n\n    if (distance < safe_distance)\n    {\n        //console.log(\"Move to Avoid Peer (\" + this.id + \")\");\n        var direction = MATH.subVec3(my_pos, peer_pos);\n        //console.log(\"diff: \" + direction);\n\n        direction[2] = 0;\n\n        var norm_direction = MATH.toUnitVec3(direction);\n\n        norm_direction = this.transformAPI.globalToLocalRotation(norm_direction);\n\n        var x = norm_direction[0];\n        var y = norm_direction[1];\n\n        //console.log(\"x: \" + x);\n        //console.log(\"y: \" + y);\n\n        var peer_heading = this.transformAPI.globalToLocalRotation(peer_info[2]);\n\n        //console.log(peer_heading);\n\n        // if the peer is headed right at me, then I should turn right\n        //      if (peer_heading[0] > 0 && Math.abs(peer_heading[1]) < .25)\n        //        {\n        //console.log(\"peer heading at me, turn right!\");\n        //          this.doTurn('right');\n        //    }\n        //  else\n        {\n            if (y >= 0)\n            {\n                if (x > 0) // 1st quadrant\n                {\n                    this.doTurn('right');\n                }\n                else // 2nd quadrant\n                {\n\n                    //this.doTurn('left');\n                }\n            }\n            else\n            {\n                if (x > 0) // 4th quardrant\n                {\n                    this.doTurn('left');\n                }\n                else // 3rd quadrant\n                {\n\n                    //this.doTurn('right');\n                }\n            }\n        }\n    }\n    else\n    {\n        this.facPeerMovementCandidate = null;\n    }\n\n    this.doMoveForward();\n\n    return true;","parameters":[]},"moving_awayTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayTransition\");\n                                this.moving_awayUpdate(this.currentState);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"moving_awayUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayUpdate\");\n                                this.currentState = this.states[\"moving_away\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"notifyPeers":{"body":"var my_position = this.transformAPI.getPosition();\n    this.tickCount++;\n    if (this.tickCount == 4 || this.tickCount == 8)\n    {\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward], 50);\n    }\n\n    if (this.tickCount > 10)\n    {\n        var leader_projection = this.transformAPI.localToGlobal(-150, 0, 0);\n\n        this.broadcast(\"facLeaderInput\", [leader_projection], 500);\n        this.tickCount = 0;\n    }","parameters":[]},"out_of_gasTransition":{"body":"console.log(\"out_of_gasTransition\");\n    //this.currentState = this.states[\"out_of_gas\"];\n    this.out_of_gasUpdate(this.currentState);\n\n    // var sender = this.Scene.children_by_name.xAPISender;\n    // if (sender)\n    // {\n    //     sender.xAPISend(\"ran-out-of-gas\", this.DisplayName, \"FastAttackCraft\", null);\n    // }","parameters":[]},"out_of_gasUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"out_of_gasUpdate\");\n                                console.log(statename);\n                                if (this.fuel <= 0)\n                                {\n                                    this.currentState = this.states[\"out_of_gas\"];\n                                    console.log(\"out_of_gasUpdate now out_of_gas state\");\n                                }\n                                else if (this.hullStrength <= 0)\n                                {\n                                    this.currentState = this.states[\"defeated\"];\n                                    console.log(\"out_of_gasUpdate now defaeted state\");\n                                }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"playBulletHittingMetal":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingMetal\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletHittingWater":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingWater\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletWhizzingBy":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletWhizzingBy\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playExplosion":{"body":"console.log(\"playExplosion\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/8d358349\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/d714ebe1\", false, 100);\n    // #3:\n    this.audioAPI.playSound(\"/sas/assets/3c6b353e\", false, 1000);","parameters":[]},"playHelicopter":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               //console.log(\"playHelicopter\");\n                                // #1:\n                                //this.audioAPI.playSound(\"/sas/assets/af90534a\", false, 100);\n                                //#2:\n                                this.audioAPI.playSound(\"/sas/assets/dc81768a\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMissileLaunch":{"body":"console.log(\"playMissileLaunch\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/744acf2e\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);\n    // #3:\n    //this.audioAPI.playSound(\"/sas/assets/10b027bd\", false, 100);\n    // #4:\n    //this.audioAPI.playSound(\"/sas/assets/94d508e3\", false, 100);\n    // #5:\n    this.audioAPI.playSound(\"/sas/assets/263beb86\", false, 400);","parameters":[]},"playMotorIdle":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorIdle\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMotorRunning":{"body":"//console.log(\"playMotorRunning\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/2cb9fef9\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/994ee0c8\", false, 100);\n    // #3:\n    var sound = vwf.callMethod(this.id, \"getSound\", [\"/sas/assets/c253157d\"]);\n\n    // if (sound == null || !sound.isPlaying())\n    {\n        this.audioAPI.playSound(\"/sas/assets/c253157d\", true, 200, false);\n    }","parameters":[]},"playMotorSputtering":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorSputtering\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playWarning":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playWarning\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"randomIntFromInterval":{"body":"return Math.floor(Math.random()*(max-min+1)+min);","parameters":["min","max"]},"ready":{"body":"// The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\", this._kd, this);\n    this.Scene.unbind(\"keyUp\", this._ku, this);\n    var self = this;\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d)\n    };\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d)\n    };\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"tick":{"body":"console.log(this.facPeerMovementCandidate);\n    this.userControlCounter--;\n    this.doBuoyancy();\n    this.notifyPeers();\n    if (this.facPeerMovementCandidate && !this.isUserControlled())\n    {\n        this.moveToAvoidPeer();\n        \n        return;\n\n    }\n    this.facPeerMovementCandidate = null;\n\n    if (this.isUserControlled())\n    {\n        this.isSlave = false;\n        this.doUserInput();\n    }\n    else\n    {\n        this.isSlave = true;\n        this.doAIBehaviors();\n    }","parameters":[]},"verifyCamera":{"body":"if(!this.controllingCamera)\n        return true;\n    var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;","parameters":[]}},"properties":{"DisplayName":"FAC5","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"aiState":{"displayname":"AI Behavior","labels":["attack","flee","wait"],"property":"aiActiveState","type":"choice","values":["attack","flee","wait"]},"aiTargetID":{"displayname":"Target Object","property":"aiTargetID","type":"nodeid"},"bullets_50_cal":{"displayname":"Bullets (50 cal)","max":100000,"min":1,"property":"bullets_50_cal","type":"slider"},"fuel":{"displayname":"Fuel","max":1000,"min":1,"property":"fuel","type":"slider"},"fuelConsumptionRate":{"displayname":"Fuel Consumption Rate","max":1,"min":0,"property":"fuelConsumptionRate","step":0.01,"type":"slider"},"health":{"displayname":"Health","max":1000,"min":1,"property":"health","type":"slider"},"hostile":{"displayname":"Hostile","property":"hostile","type":"check"},"hullStrength":{"displayname":"Hull Strength","max":1000,"min":1,"property":"hullStrength","type":"slider"},"rangeToTarget":{"displayname":"Range to Target","max":5000,"min":0,"property":"rangeToTarget","step":100,"type":"slider"},"rockets":{"displayname":"Rockets","max":25,"min":0,"property":"rockets","type":"slider"}},"___physics_activation_state":4,"___physics_angular_velocity":[0.02608,-0.136371,0.000363],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.01887,0.10297,-0.002883],"___physics_mass":8051.2,"___physics_velocity_angular":[-0.006486,-0.029204,0.000064],"___physics_velocity_linear":[-0.000001,-0.000001,-0.000011],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:43:10 GMT-0500 (Eastern Standard Time)","_keysDown":[],"_length":7,"activeState":"active","aiActiveState":"attack","aiStates":{"attack":{"updateFunc":"aiAttack"},"circle":{"updateFunc":"aiCircle"},"circlecc":{"updateFunc":"aiCirclecc"},"defeated":{"updateFunc":"aiDefeated"},"fire":{"updateFunc":"aiFire"},"flee":{"updateFunc":"aiFlee"},"moveAway":{"updateFunc":"aiMoveAway"},"shoot":{"updateFunc":"aiShoot"},"wait":{"updateFunc":"aiWait"}},"aiTargetID":"-sas-assets-874eb90b-N37ac1079","bullets_50_cal":987,"controllingCamera":"SandboxCamera-vwf-Na1b51046","counter":15544,"currentState":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"destroyedFACDef":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","alphaRange":0,"alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterSize":[2,2,2],"emitterType":"box","endAlpha":0.04,"endColor":[0,0,0,0.04],"endSize":5,"gravity":0.77,"image":"../vwfDataManager.svc/texture?UID=water.png","maxAcceleration":[0,0,9.82],"maxLifeTime":2,"maxRate":0.614,"maxSpin":1,"maxVelocity":[1,1,1],"minAcceleration":[0,0,9.82],"minLifeTime":1,"minSpin":-1,"minVelocity":[-1,-1,1],"owner":"ADLteam","particleCount":200,"rotation":[1,0,0,0],"sizeRange":0.02,"solver":"AnalyticShader","startAlpha":1,"startColor":[1,1,1,1],"startSize":1,"textureTiles":4,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","velocityMode":"cartesian"},"random":{"c":1,"s0":0.069964,"s1":0.034293,"s2":0.282638},"sequence":0},"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"facPeerMovementCandidate":null,"fuel":84.209999,"fuelConsumptionRate":0.01,"health":45,"height":1.2,"hostile":true,"hullStrength":100,"isSlave":false,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"hostile":true,"launchedBy":"","transform":[-0.024,-0.092306,0.995439,0,-0.981998,-0.184443,-0.04078,0,0.187365,-0.978498,-0.086218,0,229.96614,-822.763489,22.168992,1]}},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rangeToTarget":1000,"rockets":6,"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Na1da5cfd","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"1ad6adad","states":{"approaching":{"name":"approaching","properties":{},"transitionFunction":"approachingTransition","transitions":["approaching","moving_away","idle","out_of_gas","fire_rocket","colliding","defeated"],"updateFunction":"approachingUpdate"},"colliding":{"name":"colliding","properties":{},"transitionFunction":"collidingTransition","transitions":["colliding","defeated"],"updateFunction":"collidingUpdate"},"defeated":{"name":"defeated","properties":{},"transitionFunction":"defeatedTransition","transitions":["defeated"],"updateFunction":"defeatedUpdate"},"fire_rocket":{"name":"fire_rocket","properties":{},"transitionFunction":"fire_rocketTransition","transitions":["approaching","fire_rocket","moving_away","idle","colliding","defeated"],"updateFunction":"fire_rocketUpdate"},"idle":{"name":"idle","properties":{},"transitionFunction":"idleTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"idleUpdate"},"moving_away":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"out_of_gas":{"name":"out_of_gas","properties":{},"transitionFunction":"out_of_gasTransition","transitions":["out_of_gas","colliding","defeated"],"updateFunction":"out_of_gasUpdate"}},"tickCount":10,"transform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,-4536.25,1384.75,20.75,1],"type":"Primitive","userControlCounter":0,"visible":false,"warningsReceived":0,"width":2.5,"worldPosition":[-4536.25,1384.75,20.75],"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,-4536.25,1384.75,20.75,1]},"random":{"c":1519967,"s0":0.181431,"s1":0.565967,"s2":0.10468},"sequence":0,"name":"N9e027ed0"},{"extends":"http://vwf.example.com/node3.vwf","methods":{"bindToggle":{"body":"var self = this;\n    self.unbindToggle();\n\n    $(\"#vwf-root\").on(\"keyup.cameraToggler\", function(e)\n    {\n        \n        var camList = _dView.getCameraList()[1];\n        var camera = _dView.getCamera().parent;\n        var toCamera;\n        var key = self.keyCode ? self.keyCode.toUpperCase() : \" \";\n\n        //If necessary, remove the editor cam from camList\n        if (!self.cycleEditor && !camList[0]) camList.splice(0, 1);\n\n        //If the toggle button has been pressed and there are at least two cams in camList\n        if (camList.length >= 2 && e.keyCode === key.charCodeAt(0))\n        {\n            if (camera)\n            {\n                var index = (camList.indexOf(camera.vwfID) + 1) % camList.length;\n                toCamera = camList[index];\n            }\n\n            //If camera is falsy, then the editor cam is assumed active (camList[0])\n            else toCamera = camList[1];\n\n            _dView.setCamera(toCamera);\n\n            self.xAPISend(toCamera);\n        }\n\n        //Else, handle numpad and numbers row presses\n        else if (self.bindNumbers)\n        {\n            var numPad = e.keyCode - 96;\n            var numRow = e.keyCode - 48;\n            if (numPad >= 0 && numPad <= 9 && numPad < camList.length)\n            {\n                _dView.setCamera(camList[numPad]);\n\n                //Send Statement only if camera changes\n                if ((!camera && camList[numPad]) || (camera && camera.vwfID !== camList[numPad]))\n                {\n                    self.xAPISend(camList[numPad]);\n                }\n            }\n            else if (numRow >= 0 && numRow <= 9 && numRow < camList.length)\n            {\n                _dView.setCamera(camList[numRow]);\n\n                //Send Statement only if camera changes\n                if ((!camera && camList[numRow]) || (camera && camera.vwfID !== camList[numRow]))\n                {\n                    self.xAPISend(camList[numRow]);\n                }\n            }\n        }\n    });","parameters":[]},"ready":{"body":"if(this.autoBind === true) this.bindToggle();","parameters":[]},"tick":{"body":"// The tick function is called 20 times every second.\n    // Write code here to animate over time","parameters":[]},"unbindToggle":{"body":"$(\"canvas\").off(\".cameraToggler\");","parameters":[]},"xAPISend":{"body":"var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n\n        if (camera)\n        {\n            var camList = _dView.getCameraList();\n            var idIndex = camList[1].indexOf(camera);\n            camera = camList[0][idIndex];\n        }\n        else camera = \"Editor Camera\";\n\n        sender.xAPISend(\"observed\", camera, \"Instructor\", null);\n    }","parameters":["camera"]}},"properties":{"DisplayName":"Camera Toggler","EditorData":{"_autoBind":{"displayname":"Auto-bind on ready","property":"autoBind","type":"check"},"_bindNumbers":{"displayname":"Camera shortcuts (numpad)","property":"bindNumbers","type":"check"},"_cycleEditor":{"displayname":"Include editor camera","property":"cycleEditor","type":"check"},"_keyCode":{"displayname":"Cycle key","property":"keyCode","type":"text"},"bind":{"label":"bindToggle","method":"bindToggle","type":"button"},"unbind":{"label":"unbindToggle","method":"unbindToggle","type":"button"}},"___sourceAssetTimestamp":"Thu Oct 29 2015 13:50:38 GMT-0400 (Eastern Daylight Time)","autoBind":false,"bindNumbers":true,"cycleEditor":false,"glyphURL":"../vwf/view/editorview/images/icons/sphere.png","isCameraToggler":true,"isToggleActive":true,"keyCode":"C","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0.178467005491257,0.109171003103256,0.0177439991384745,1]},"random":{"c":1,"s0":0.729582,"s1":0.40187,"s2":0.318857},"sequence":0,"name":"Na3496266"},{"children":{"-sas-assets-1ad6adad-Naa40c8b5N83e3ec00":{"extends":"box2.vwf","properties":{"DisplayName":"WaterBlocker","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":0.18,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":0,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":11,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1],"type":"Primitive","visible":false,"width":2.18},"random":{"c":1,"s0":0.198099,"s1":0.027581,"s2":0.352169},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-Naa40c8b5N83e3ec00"},"-sas-assets-1ad6adad-Naa40c8b5N8c4837dd":{"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.240602999925613,-0.0218209996819496,0.970376014709473,0,0.00100100005511194,-0.999741971492767,-0.0227310005575418,0,0.970619022846222,0.00644000014290214,-0.240521997213364,0,1,0,1.49999904632568,1],"type":"Primitive","visible":false,"width":1.36,"worldTransform":[-0.0130935087800026,-0.241505414247513,0.970308423042297,0,-0.980116665363312,-0.189041972160339,-0.0602767691016197,0,0.197986945509911,-0.951804041862488,-0.234232410788536,0,-4510.119140625,1801.26611328125,22.2549629211426,1]},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-1ad6adad-Naa40c8b5N8c4837dd"},"-sas-assets-1ad6adad-Naa40c8b5N8cf5a8e2":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.99999997475243e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380481854081154,-0.00112601777072996,0.999275028705597,0,-4509.6572265625,1799.30444335938,20.0186958312988,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"-sas-assets-1ad6adad-Naa40c8b5N8cf5a8e2"},"-sas-assets-1ad6adad-Naa40c8b5Ned0c4c0a":{"extends":"asset.vwf","methods":{"hit":{"body":"this.parent.hit(args);","parameters":["args"]}},"properties":{"DisplayName":"3D_model","___assetServerOriginalID":"Ned0c4c0a","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 27 2015 13:10:22 GMT-0400 (EDT)","materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[-9.99999997475243e-7,100.399002075195,0,0,-100.301002502441,-9.99999997475243e-7,0,0,0,0,100.294998168945,0,0.5,0,-0.5,1],"worldPosition":[-4510.13671875,1801.75952148438,20.2533874511719]},"random":{"c":1,"s0":0.434828,"s1":0.189991,"s2":0.484111},"sequence":0,"source":"/sas/assets/a31ba113","type":"subDriver/threejs/asset/vnd.gltf+json","name":"-sas-assets-1ad6adad-Naa40c8b5Ned0c4c0a"},"N1562ca4":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,243.092651,-892.445557,20.018699,1]},"random":{"c":1,"s0":0.673742,"s1":0.465842,"s2":0.200551},"sequence":0,"name":"N1562ca4"},"N1d4178b6":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.997594,"s1":0.24193,"s2":0.950543},"sequence":0,"name":"N1d4178b6"},"N43c09f95":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.240604,-0.021821,0.970376,0,0.001,-0.999742,-0.02273,0,0.97062,0.006441,-0.240522,0,1,0.000001,1.499999,1],"worldTransform":[-0.013091,-0.241507,0.970309,0,-0.980118,-0.189045,-0.060277,0,0.197988,-0.951806,-0.234231,0,-4536.119141,1383.766113,22.254964,1]},"random":{"c":1,"s0":0.620063,"s1":0.860023,"s2":0.523263},"sequence":0,"name":"N43c09f95"},"N4c5a6e26":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.240604,-0.021821,0.970376,0,0.001,-0.999742,-0.02273,0,0.97062,0.006441,-0.240522,0,1,0.000001,1.499999,1],"worldTransform":[-0.013091,-0.241507,0.970309,0,-0.980118,-0.189045,-0.060277,0,0.197988,-0.951806,-0.234231,0,361.380981,-2042.483887,22.254964,1]},"random":{"c":1,"s0":0.533505,"s1":0.455356,"s2":0.597197},"sequence":0,"name":"N4c5a6e26"},"N62a9c685":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,-4535.657227,1381.804443,20.018699,1]},"random":{"c":1,"s0":0.560627,"s1":0.184314,"s2":0.522146},"sequence":0,"name":"N62a9c685"},"N6dabf42":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,-0.000001,0,1,0,3,0,-0.75,1],"worldTransform":[0.18804,-0.982143,0.006052,0,0.981424,0.188134,0.037578,0,-0.038047,-0.001126,0.999275,0,361.842651,-2044.445557,20.018699,1]},"random":{"c":1,"s0":0.342212,"s1":0.755817,"s2":0.820273},"sequence":0,"name":"N6dabf42"},"Nb8887ea2":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,1,-0.000001,0,-1.000001,-0.000001,-0.000001,0,-0.000001,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.961765,"s1":0.72625,"s2":0.118456},"sequence":0,"name":"Nb8887ea2"},"Nb9276240":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[242.613037,-889.990479,20.253389]},"random":{"c":1,"s0":0.210725,"s1":0.008965,"s2":0.419656},"sequence":0,"name":"Nb9276240"},"Nc64aa669":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[-4536.136719,1384.259521,20.253389]},"random":{"c":1,"s0":0.243587,"s1":0.532717,"s2":0.434356},"sequence":0,"name":"Nc64aa669"},"Ncd5596d3":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[-0.000001,100.399002,0,0,-100.301003,-0.000001,0,0,0,0,100.294998,0,0.5,0,-0.5,1],"worldPosition":[361.363037,-2041.990479,20.253389]},"random":{"c":1,"s0":0.20957,"s1":0.035162,"s2":0.69045},"sequence":0,"name":"Ncd5596d3"},"Nd7eeb34":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.570982,"s1":0.056291,"s2":0.829232},"sequence":0,"name":"Nd7eeb34"},"Ne8603c16":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.086185,-0.022558,0.996021,0,0.001,-0.999742,-0.022731,0,0.996276,0.002956,-0.086141,0,1,0,1.5,1],"worldTransform":[-0.043828,-0.090013,0.994974,0,-0.980118,-0.189045,-0.060277,0,0.193519,-0.977833,-0.079938,0,242.630966,-890.483826,22.254964,1]},"random":{"c":1,"s0":0.174441,"s1":0.597858,"s2":0.025507},"sequence":0,"name":"Ne8603c16"},"Nea707727":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,-0.25,1]},"random":{"c":1,"s0":0.306256,"s1":0.285063,"s2":0.043495},"sequence":0,"name":"Nea707727"}},"continues":"/sas/assets/1ad6adad","extends":"box2.vwf","methods":{"FACMovementDirection":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                // set equal to \"\" after adding calculations:\n                                var movement = \"closing\";\n                                // Perform calculations to determine approaching or moving away states:\n                                //     movement = \"closing\" if distance to target is getting smaller\n                                //     movement = \"none\" if distance to target hasn't changed\n                                //     movement = \"increasing\" if distance to target is getting larger\n                                switch (movement)\n                                {\n                                    case \"closing\":\n                                        this.currentState = this.states[\"approaching\"];\n                                        return \"approaching\";\n                                    case \"none\":\n                                        this.currentState = this.states[\"idle\"];\n                                        return \"idle\";\n                                    case \"increasing\":\n                                        this.currentState = this.states[\"moving_away\"];\n                                        return \"moving_away\";\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"_keyDown":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this.currentState === null)\n    {\n        console.log(\"Set initial state\");\n        this.currentState = this.states[\"approaching\"];\n    }\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }","parameters":["e","d"]},"_keyUp":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 100;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        if (this.rockets > 0)\n        {\n            this.activateState(\"fire_rocket\");\n            console.log(\"rockets: \" + this.rockets);\n\n            console.log(\"Broadcasting leader fire...\");\n            // this.broadcast(\"facLeaderFire\", [], 500);\n        }\n    }","parameters":["e","d"]},"activateState":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                //console.log(\"activateState\");\n                                var state = this.states[statename];\n\n                                if (this.currentState.transitions.indexOf(statename) == -1)\n                                {\n                                    console.log(\"invalid transition!\");\n                                    return;\n                                }\n\n                                if (state.transitionFunction)\n                                    this[state.transitionFunction](this.currentState);\n\n                                this.currentState = state;\n\n                                for (var i in state.properties)\n                                {\n                                    console.log(state.properties[i]);\n                                    this[i] = state.properties[i];\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"aiAttack":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n        if (MATH.lengthVec3(targetPos) > attackRange)\n        {\n            if (targetPos[1] > 10)\n                this.doTurn('right')\n            else if (targetPos[1] < -10)\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n    }","parameters":[]},"aiCircle":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] > 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circlecc\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n    }","parameters":[]},"aiCirclecc":{"body":"var attackRange = 300;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[0] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            this.aiActiveState = 'attack';\n        }\n\n        if (MATH.lengthVec3(targetPos) < 150)\n        {\n            this.aiActiveState = \"moveAway\";\n        }\n\n        if (MATH.lengthVec3(targetPos) > 10)\n        {\n            this.doMoveForward();\n        }\n        if (this.random() > .995)\n            this.aiActiveState = \"circle\";\n\n        if (this.random() > .99575)\n            this.aiActiveState = \"fire\";\n\n    }","parameters":[]},"aiDefeated":{"body":"console.log(\"aiDefeated\");","parameters":[]},"aiFire":{"body":"var attachRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n\n        if (targetPos[1] > 0)\n            this.doTurn('right')\n        else\n            this.doTurn('left');\n\n        if (Math.abs(targetPos[1]) < .2)\n        {\n            console.log(\"FIRE!\");\n            this.launchMissile();\n            this.playMissileLaunch();\n            this.rockets = this.rockets - 1;\n            if(this.rockets <= 0)\n            {\n                this.aiActiveState = \"flee\";\n            }\n            else if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiFlee":{"body":"var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        targetPos[0] += Math.sin(this.time) * 70;\n        targetPos[1] += Math.cos(this.time) * 70;\n\n        if (targetPos[1] < 10)\n            this.doTurn('right')\n        else if (targetPos[1] > -10)\n            this.doTurn('left');\n\n        this.doMoveForward();\n\n    }","parameters":[]},"aiMoveAway":{"body":"var attackRange = 100;\n    var target = this.Scene.findNodeByID(this.aiTargetID);\n    var targetPos;\n    if (target)\n    {\n        targetPos = target.transformAPI.getWorldPosition();\n        targetPos = this.transformAPI.globalToLocal(targetPos);\n        if (MATH.lengthVec3(targetPos) < attackRange)\n        {\n            if (targetPos[1] < 0)\n                this.doTurn('right')\n            else\n                this.doTurn('left');\n        }\n        else\n        {\n            if (this.random() < .5)\n                this.aiActiveState = \"circle\";\n            else\n                this.aiActiveState = \"circlecc\";\n        }\n       \n        this.doMoveForward();\n        \n    }","parameters":[]},"aiWait":{"body":"console.log(\"aiWait\");","parameters":[]},"approachingTransition":{"body":"//console.log(\"approachingTransition\");\n    this.approachingUpdate(this.currentState);","parameters":[]},"approachingUpdate":{"body":"//console.log(\"approachingUpdate\");\n    this.currentState = this.states[\"approaching\"];","parameters":["statename"]},"collidingTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingTransition\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"collidingUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"collidingUpdate\");\n                                this.currentState = this.states[\"colliding\"];    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"consumeFuel":{"body":"if (this.fuel <= 0.0)\n    {\n        this.currentState = this.states[\"out_of_gas\"];\n    }\n    else\n    {\n        this.fuel = this.fuel - this.fuelConsumptionRate;\n        //console.log(\"fuel: \" + this.fuel);\n    }","parameters":[]},"createExplosion":{"body":"console.log(\"explosion!!\");\n    var def = this.explosionDef;\n    var pos = this.transformAPI.getWorldPosition();\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = 1;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null);","parameters":[]},"defeatedTransition":{"body":"console.log(\"defeatedTransition\");\n    this.currentState = this.states[\"defeated\"];","parameters":[]},"defeatedUpdate":{"body":"console.log(\"defeatedUpdate\");\n    this.currentState = this.states[\"defeated\"];\n    this.audioAPI.stopSound(\"/sas/assets/c253157d\", true, 200);","parameters":["statename"]},"destroyFAC":{"body":"var def = this.destroyedFACDef;\n    var val1 = this.randomIntFromInterval(1, 360);\n    var val2 = this.randomIntFromInterval(1, 90);\n    var val3 = this.randomIntFromInterval(1, 360);\n    console.log(\"FAC blown up\");\n    this.currentState = this.states[\"defeated\"];\n    this.activeState = \"defeated\";\n    this.aiActiveState = \"defeated\";\n    vwf.createChild(this.id, GUID(), _DataManager.getCleanNodePrototype(def), null);\n    if (this.isSlave)\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(val1, val2, val3);\n    else\n        this.children_by_name[\"3D_model\"].transformAPI.setRotation(180, 45, 90);\n    this.children_by_name.WaterBlocker.visible = false;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-defeated\", this.DisplayName + this.id, \"FastAttackCraft\", null);\n    }","parameters":[]},"doAIBehaviors":{"body":"var pos = this.transformAPI.getWorldPosition();\n    //dont' do the AI code if it's not at the water surface\n    if (Math.abs(pos[2] - 20) > 2)\n        return;\n    var state = this.aiStates[this.aiActiveState];\n    console.log(this.aiActiveState);\n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doBuoyancy":{"body":"var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }","parameters":[]},"doMoveBackward":{"body":"var mass = this.physicsAPI.getMass();\n    this.consumeFuel();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doMoveForward":{"body":"this.consumeFuel();\n    var mass = this.physicsAPI.getMass();\n    switch (this.currentState.name)\n    {\n        case \"out_of_gas\":\n            \n            this.activateState(\"out_of_gas\");\n            break;\n        case \"defeated\":\n            \n            this.activateState(\"defeated\");\n            break;\n        default:\n            var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n            this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n            this.playMotorRunning();\n            switch (this.FACMovementDirection())\n            {\n                case \"approaching\":\n                    this.activateState(\"approaching\");\n                    break;\n                case \"idle\":\n                    this.activateState(\"idle\");\n                    break;\n                case \"moving_away\":\n                    this.activateState(\"moving_away\");\n                    break;\n            }\n            break;\n    }","parameters":[]},"doTurn":{"body":"var direction = 1;\n    var mass = this.physicsAPI.getMass();\n    if (dir == 'left')\n    {\n        direction = 1;\n    }\n    if (dir == 'right')\n    {\n        direction = -1;\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0]) / 7);\n\n    this.physicsAPI.addTorque(0, 0, direction * speedTorqueFactor * mass * 3);\n    var force = this.transformAPI.localToGlobal(direction * speedTorqueFactor * mass, 0, 0);\n    this.physicsAPI.addTorque(force);","parameters":["dir"]},"doUserInput":{"body":"if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        this.doMoveForward();\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        this.doMoveBackward();\n    }\n\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n        this.doTurn('left');\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n         this.doTurn('right');\n    }\n    if (this._keysDown.indexOf(\" \") !== -1)\n    {\n        if (this.rockets > 0)\n        {\n            this.currentState = this.states[\"fire_rocket\"];\n        }\n        else\n        {\n            this.currentState = this.states[\"moving_away\"];\n        }\n    }","parameters":[]},"facPeerInput":{"body":"//console.log(\"facPeerInput Received: \" + args);\n   \n    if (args[1] == this.id) return;\n\n    /*if (this.facPeerMovementCandidate.length > 0)\n    {\n        var current_pos = this.transformAPI.getPosition();\n        var last_pos = this.facPeerMovementCandidate;\n        var incoming_pos = args[0];\n\n        if (MATH.distanceVec3(current_pos, incoming_pos) < MATH.distanceVec3(current_pos, last_pos))\n        {\n            this.facPeerMovementCandidate = args;\n        }\n    }\n    else\n    {*/\n    this.facPeerMovementCandidate = args;\n    //}","parameters":["args"]},"fire_rocketTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketTransition\");\n                                this.fire_rocketUpdate(this.currentState);    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"fire_rocketUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                console.log(\"fire_rocketUpdate\");\n                                this.launchMissile();\n                                this.playMissileLaunch();\n                                this.rockets = this.rockets - 1;\n                                if (this.rockets > 0)\n                                {\n                                    this.currentState = this.states[\"fire_rocket\"];\n                                    console.log(\"rocketUpdate state fire \");\n                                }\n                                else\n                                {\n                                    this.currentState = this.states[\"idle\"];\n                                    console.log(\"rocketUpdate state idle\");\n                                }    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"hit":{"body":"this.audioAPI.playSound(\"/sas/assets/bc13daa3\", false, 200, true);\n    if (this.currentState.name == \"defeated\") return;\n\n    var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n    {\n        this.health -= force;\n\n    }\n    else\n    {\n        this.health -= 101;\n    }\n    if (this.health < 0)\n    {\n        this.hostile = false;\n        this.createExplosion();\n        this.destroyFAC();\n    }","parameters":["args"]},"idleTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleTransition\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"idleUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"idleUpdate\");\n                                this.currentState = this.states[\"idle\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"isUserControlled":{"body":"var thisCam = this.controllingCamera;\n\n    return this._keysDown.length !== 0 ||( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"launchMissile":{"body":"var def = this.missileDef;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'FAC Missile', 'Fast Attack Craft', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(def), null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild(GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"moveToAvoidPeer":{"body":"var peer_info = this.facPeerMovementCandidate;\n    if (!peer_info) return false;\n\n    if (peer_info[1] == this.id) return;\n\n    var safe_distance = peer_info[3] || 50;\n    var mass = this.physicsAPI.getMass();\n\n    // Get peer world position\n    var peer_pos = peer_info[0];\n\n    // Get my world position\n    var my_pos = this.transformAPI.getWorldPosition();\n\n    // Get the distance between me and the leader\n    var distance = MATH.distanceVec3(peer_pos, my_pos);\n    //console.log(\"facFollowBehavior: distance: \" + distance);\n\n    if (distance < safe_distance)\n    {\n        //console.log(\"Move to Avoid Peer (\" + this.id + \")\");\n        var direction = MATH.subVec3(my_pos, peer_pos);\n        //console.log(\"diff: \" + direction);\n\n        direction[2] = 0;\n\n        var norm_direction = MATH.toUnitVec3(direction);\n\n        norm_direction = this.transformAPI.globalToLocalRotation(norm_direction);\n\n        var x = norm_direction[0];\n        var y = norm_direction[1];\n\n        //console.log(\"x: \" + x);\n        //console.log(\"y: \" + y);\n\n        var peer_heading = this.transformAPI.globalToLocalRotation(peer_info[2]);\n\n        //console.log(peer_heading);\n\n        // if the peer is headed right at me, then I should turn right\n        //      if (peer_heading[0] > 0 && Math.abs(peer_heading[1]) < .25)\n        //        {\n        //console.log(\"peer heading at me, turn right!\");\n        //          this.doTurn('right');\n        //    }\n        //  else\n        {\n            if (y >= 0)\n            {\n                if (x > 0) // 1st quadrant\n                {\n                    this.doTurn('right');\n                }\n                else // 2nd quadrant\n                {\n\n                    //this.doTurn('left');\n                }\n            }\n            else\n            {\n                if (x > 0) // 4th quardrant\n                {\n                    this.doTurn('left');\n                }\n                else // 3rd quadrant\n                {\n\n                    //this.doTurn('right');\n                }\n            }\n        }\n    }\n    else\n    {\n        this.facPeerMovementCandidate = null;\n    }\n\n    this.doMoveForward();\n\n    return true;","parameters":[]},"moving_awayTransition":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayTransition\");\n                                this.moving_awayUpdate(this.currentState);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"moving_awayUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"moving_awayUpdate\");\n                                this.currentState = this.states[\"moving_away\"];   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"notifyPeers":{"body":"var my_position = this.transformAPI.getPosition();\n    this.tickCount++;\n    if (this.tickCount == 4 || this.tickCount == 8)\n    {\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward], 50);\n    }\n\n    if (this.tickCount > 10)\n    {\n        var leader_projection = this.transformAPI.localToGlobal(-150, 0, 0);\n\n        this.broadcast(\"facLeaderInput\", [leader_projection], 500);\n        this.tickCount = 0;\n    }","parameters":[]},"out_of_gasTransition":{"body":"console.log(\"out_of_gasTransition\");\n    //this.currentState = this.states[\"out_of_gas\"];\n    this.out_of_gasUpdate(this.currentState);\n\n    // var sender = this.Scene.children_by_name.xAPISender;\n    // if (sender)\n    // {\n    //     sender.xAPISend(\"ran-out-of-gas\", this.DisplayName, \"FastAttackCraft\", null);\n    // }","parameters":[]},"out_of_gasUpdate":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"out_of_gasUpdate\");\n                                console.log(statename);\n                                if (this.fuel <= 0)\n                                {\n                                    this.currentState = this.states[\"out_of_gas\"];\n                                    console.log(\"out_of_gasUpdate now out_of_gas state\");\n                                }\n                                else if (this.hullStrength <= 0)\n                                {\n                                    this.currentState = this.states[\"defeated\"];\n                                    console.log(\"out_of_gasUpdate now defaeted state\");\n                                }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["statename"]},"playBulletHittingMetal":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingMetal\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletHittingWater":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletHittingWater\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playBulletWhizzingBy":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playBulletWhizzingBy\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playExplosion":{"body":"console.log(\"playExplosion\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/8d358349\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/d714ebe1\", false, 100);\n    // #3:\n    this.audioAPI.playSound(\"/sas/assets/3c6b353e\", false, 1000);","parameters":[]},"playHelicopter":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               //console.log(\"playHelicopter\");\n                                // #1:\n                                //this.audioAPI.playSound(\"/sas/assets/af90534a\", false, 100);\n                                //#2:\n                                this.audioAPI.playSound(\"/sas/assets/dc81768a\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMissileLaunch":{"body":"console.log(\"playMissileLaunch\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/744acf2e\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);\n    // #3:\n    //this.audioAPI.playSound(\"/sas/assets/10b027bd\", false, 100);\n    // #4:\n    //this.audioAPI.playSound(\"/sas/assets/94d508e3\", false, 100);\n    // #5:\n    this.audioAPI.playSound(\"/sas/assets/263beb86\", false, 400);","parameters":[]},"playMotorIdle":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorIdle\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playMotorRunning":{"body":"//console.log(\"playMotorRunning\");\n    // #1:\n    //this.audioAPI.playSound(\"/sas/assets/2cb9fef9\", false, 100);\n    // #2:\n    //this.audioAPI.playSound(\"/sas/assets/994ee0c8\", false, 100);\n    // #3:\n    var sound = vwf.callMethod(this.id, \"getSound\", [\"/sas/assets/c253157d\"]);\n\n    // if (sound == null || !sound.isPlaying())\n    {\n        this.audioAPI.playSound(\"/sas/assets/c253157d\", true, 200, false);\n    }","parameters":[]},"playMotorSputtering":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playMotorSputtering\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"playWarning":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                               console.log(\"playWarning\");\n                                this.audioAPI.playSound(\"\", false, 100);   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"randomIntFromInterval":{"body":"return Math.floor(Math.random()*(max-min+1)+min);","parameters":["min","max"]},"ready":{"body":"// The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\", this._kd, this);\n    this.Scene.unbind(\"keyUp\", this._ku, this);\n    var self = this;\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d)\n    };\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d)\n    };\n    this.Scene.bind(\"keyDown\", this._kd,this);\n    this.Scene.bind(\"keyUp\", this._ku,this);","parameters":[]},"tick":{"body":"console.log(this.facPeerMovementCandidate);\n    this.userControlCounter--;\n    this.doBuoyancy();\n    this.notifyPeers();\n    if (this.facPeerMovementCandidate && !this.isUserControlled())\n    {\n        this.moveToAvoidPeer();\n        \n        return;\n\n    }\n    this.facPeerMovementCandidate = null;\n\n    if (this.isUserControlled())\n    {\n        this.isSlave = false;\n        this.doUserInput();\n    }\n    else\n    {\n        this.isSlave = true;\n        this.doAIBehaviors();\n    }","parameters":[]},"verifyCamera":{"body":"if(!this.controllingCamera)\n        return true;\n    var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;","parameters":[]}},"properties":{"DisplayName":"FAC6","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"aiState":{"displayname":"AI Behavior","labels":["attack","flee","wait"],"property":"aiActiveState","type":"choice","values":["attack","flee","wait"]},"aiTargetID":{"displayname":"Target Object","property":"aiTargetID","type":"nodeid"},"bullets_50_cal":{"displayname":"Bullets (50 cal)","max":100000,"min":1,"property":"bullets_50_cal","type":"slider"},"fuel":{"displayname":"Fuel","max":1000,"min":1,"property":"fuel","type":"slider"},"fuelConsumptionRate":{"displayname":"Fuel Consumption Rate","max":1,"min":0,"property":"fuelConsumptionRate","step":0.01,"type":"slider"},"health":{"displayname":"Health","max":1000,"min":1,"property":"health","type":"slider"},"hostile":{"displayname":"Hostile","property":"hostile","type":"check"},"hullStrength":{"displayname":"Hull Strength","max":1000,"min":1,"property":"hullStrength","type":"slider"},"rangeToTarget":{"displayname":"Range to Target","max":5000,"min":0,"property":"rangeToTarget","step":100,"type":"slider"},"rockets":{"displayname":"Rockets","max":25,"min":0,"property":"rockets","type":"slider"}},"___physics_activation_state":4,"___physics_angular_velocity":[0.02608,-0.136371,0.000363],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.01887,0.10297,-0.002883],"___physics_mass":8051.2,"___physics_velocity_angular":[-0.006486,-0.029204,0.000064],"___physics_velocity_linear":[-0.000001,-0.000001,-0.000011],"___sourceAssetTimestamp":"Tue Nov 24 2015 12:43:10 GMT-0500 (Eastern Standard Time)","_keysDown":[],"_length":7,"activeState":"active","aiActiveState":"attack","aiStates":{"attack":{"updateFunc":"aiAttack"},"circle":{"updateFunc":"aiCircle"},"circlecc":{"updateFunc":"aiCirclecc"},"defeated":{"updateFunc":"aiDefeated"},"fire":{"updateFunc":"aiFire"},"flee":{"updateFunc":"aiFlee"},"moveAway":{"updateFunc":"aiMoveAway"},"shoot":{"updateFunc":"aiShoot"},"wait":{"updateFunc":"aiWait"}},"aiTargetID":"-sas-assets-874eb90b-N37ac1079","bullets_50_cal":987,"controllingCamera":"SandboxCamera-vwf-Na1b51046","counter":15544,"currentState":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"destroyedFACDef":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","alphaRange":0,"alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterSize":[2,2,2],"emitterType":"box","endAlpha":0.04,"endColor":[0,0,0,0.04],"endSize":5,"gravity":0.77,"image":"../vwfDataManager.svc/texture?UID=water.png","maxAcceleration":[0,0,9.82],"maxLifeTime":2,"maxRate":0.614,"maxSpin":1,"maxVelocity":[1,1,1],"minAcceleration":[0,0,9.82],"minLifeTime":1,"minSpin":-1,"minVelocity":[-1,-1,1],"owner":"ADLteam","particleCount":200,"rotation":[1,0,0,0],"sizeRange":0.02,"solver":"AnalyticShader","startAlpha":1,"startColor":[1,1,1,1],"startSize":1,"textureTiles":4,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","velocityMode":"cartesian"},"random":{"c":1,"s0":0.069964,"s1":0.034293,"s2":0.282638},"sequence":0},"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"facPeerMovementCandidate":null,"fuel":84.209999,"fuelConsumptionRate":0.01,"health":45,"height":1.2,"hostile":true,"hullStrength":100,"isSlave":false,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"hostile":true,"launchedBy":"","transform":[-0.024,-0.092306,0.995439,0,-0.981998,-0.184443,-0.04078,0,0.187365,-0.978498,-0.086218,0,229.96614,-822.763489,22.168992,1]}},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rangeToTarget":1000,"rockets":6,"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Na1da5cfd","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"1ad6adad","states":{"approaching":{"name":"approaching","properties":{},"transitionFunction":"approachingTransition","transitions":["approaching","moving_away","idle","out_of_gas","fire_rocket","colliding","defeated"],"updateFunction":"approachingUpdate"},"colliding":{"name":"colliding","properties":{},"transitionFunction":"collidingTransition","transitions":["colliding","defeated"],"updateFunction":"collidingUpdate"},"defeated":{"name":"defeated","properties":{},"transitionFunction":"defeatedTransition","transitions":["defeated"],"updateFunction":"defeatedUpdate"},"fire_rocket":{"name":"fire_rocket","properties":{},"transitionFunction":"fire_rocketTransition","transitions":["approaching","fire_rocket","moving_away","idle","colliding","defeated"],"updateFunction":"fire_rocketUpdate"},"idle":{"name":"idle","properties":{},"transitionFunction":"idleTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"idleUpdate"},"moving_away":{"name":"moving_away","properties":{},"transitionFunction":"moving_awayTransition","transitions":["moving_away","idle","out_of_gas","colliding","defeated"],"updateFunction":"moving_awayUpdate"},"out_of_gas":{"name":"out_of_gas","properties":{},"transitionFunction":"out_of_gasTransition","transitions":["out_of_gas","colliding","defeated"],"updateFunction":"out_of_gasUpdate"}},"tickCount":10,"transform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,-4510.25,1802.25,20.75,1],"type":"Primitive","userControlCounter":0,"visible":false,"warningsReceived":0,"width":2.5,"worldPosition":[-4510.25,1802.25,20.75],"worldTransform":[0.188040003180504,-0.982142984867096,0.00605100020766258,0,0.981423020362854,0.188133001327515,0.0375780016183853,0,-0.0380479991436005,-0.00112699996680021,0.999275028705597,0,-4510.25,1802.25,20.75,1]},"random":{"c":1519967,"s0":0.181431,"s1":0.565967,"s2":0.10468},"sequence":0,"name":"Naa40c8b5"},{"children":{"Nef119486":{"children":{"N546bc174":{"extends":"sphere2.vwf","methods":{"notifyPeers":{"body":"this.tickCount++;\n    if (this.tickCount == 10)\n    {\n\n        this.tickCount = 0;\n        var my_position = this.transformAPI.getWorldPosition();\n\n        var local_forward = this.transformAPI.localToGlobalRotation(-1, 0, 0);\n\n        this.broadcast(\"facPeerInput\", [my_position, this.id, local_forward, this.avoidDist ], this.avoidDist);\n    }","parameters":[]},"tick":{"body":"// The tick function is called 20 times every second.\n    // Write code here to animate over time\n   \n        this.notifyPeers();","parameters":[]}},"properties":{"DisplayName":"AvoidRadius","EditorData":{"avoid":{"displayname":"avoid radius","max":1000,"min":1,"property":"avoidDist","type":"slider"}},"___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Fri Nov 06 2015 16:04:03 GMT-0500 (Eastern Standard Time)","avoidDist":200,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"5beae96c","tickCount":0,"transform":[0.0124810002744198,0.717251002788544,-9.99999997475243e-7,0,-0.717253029346466,0.0124810002744198,0,0,-9.99999997475243e-7,0,0.717360019683838,0,3.30383706092834,-2.59943199157715,3.5651650428772,1],"type":"Primitive"},"random":{"c":1,"s0":0.065319,"s1":0.005573,"s2":0.870037},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"N546bc174"}},"extends":"asset.vwf","properties":{"DisplayName":"Chemical Tanker","___assetServerOriginalID":"N65b7e28d","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Wed Nov 04 2015 14:11:23 GMT-0500 (Eastern Standard Time)","materialDef":{"alpha":1,"ambient":{"b":0.616883,"g":0.616883,"r":0.616883},"blendMode":1,"color":{"a":1,"b":0.616883,"g":0.616883,"r":0.616883},"combine":0,"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/51c1a77e"}],"metal":false,"reflect":0.01,"shading":true,"shininess":0.000002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"95bc52f8","transform":[0.0242570005357265,-1.39497196674347,-0.0243510007858276,0,1.39378905296326,0.0242759995162487,0.000422000011894852,0,0,-0.0243539996445179,1.39518201351166,0,-0.457085996866226,0.426483005285263,-0.462936997413635,1]},"random":{"c":1,"s0":0.770068,"s1":0.372494,"s2":0.669335},"sequence":0,"source":"/sas/assets/b7747e55","type":"subDriver/threejs/asset/vnd.gltf+json","name":"Nef119486"}},"extends":"box2.vwf","methods":{"activateState":{"body":"\n    var currentState = this.states[this.activeState];\n    if (currentState.transitions && currentState.transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        newState = this.states[newState];\n        if (!newState)\n        {\n            console.log('state does not exist');\n        }\n        if (newState.transitionFunc && this[newState.transitionFunc])\n        {\n            this[newState.transitionFunc]();\n        }\n\n    }\n    else\n    {\n        console.log('invalid transition');\n    }    \n","parameters":["newState"]},"buoyancy":{"body":"\n        var waterDepth = 20;\n    var hullThick = 2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 2;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n        //this.physicsAPI.addForceAtCenter(this.transformAPI.localToGlobal(0, 100, 0));\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 10;\n        vel[1] *= 1.0 - depth / 3;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }        \n","parameters":[]},"command":{"body":"\n    var command = args[0];\n    if (command == \"aheadFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadFull\";\n    }\n    if (command == \"backFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"backFull\";\n    }\n    if (command == \"aheadHalf\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadHalf\";\n    }\n    if (command == \"engineIdle\")\n    {\n        this.activateState('navigating');\n        this.engine = \"idle\";\n    }\n    if (command == \"hardRight\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardRight\";\n    }\n    if (command == \"hardLeft\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardLeft\";\n    }\n    if (command == \"rudderCenter\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"center\";\n    }    \n","parameters":["args"]},"hit":{"body":"if (force > 5) //cannot be hurt by 50 cal\n    {\n\n    this.children_by_name.Barry1.materialDef.layers[0].src = this.damageTexture;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-damaged\", this.DisplayName, \"TacticalActionOfficer\", null);\n    }\n    }","parameters":["pos","force"]},"movement":{"body":"var torque = [0, 0, 0];\n    var force = [0, 0, 0];\n    if (this.rudder == 'hardLeft')\n    {\n        torque[2] = .0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'hardRight')\n    {\n        torque[2] = -.0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'center')\n    {\n\n    }\n    if (this.engine == \"aheadFull\")\n    {\n        force[0] = 25 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"aheadHalf\")\n    {\n        force[0] = 12 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"idle\")\n    {\n\n    }\n    if (this.engine == 'backFull')\n    {\n        force[0] = -12 * this.physicsAPI.getMass();\n    }\n    torque[2] *= force[0];\n    force = this.transformAPI.localToGlobalRotation(force);\n    this.physicsAPI.addForceAtCenter(force);\n    this.physicsAPI.addTorque(torque);","parameters":[]},"tick":{"body":"\n    var state = this.states[this.activeState];\n    if (state)\n    {\n\n        if (state.movement)\n            this.movement();\n        if (state.buoyancy)\n            this.buoyancy();\n        if(state.updateFunc && this[state.updateFunc])\n            this[state.updateFunc]()\n        \n        \n    }    \n","parameters":[]}},"properties":{"DisplayName":"Chemical Tanker5","EditorData":{"engine":{"displayname":"engine","labels":["Ahead Full","Ahead Half","Back","Idle"],"property":"engine","type":"choice","values":["aheadFull","aheadHalf","back","idle"]},"hullThick":{"displayname":"Hull Thickness","max":25,"min":0,"property":"hullThick","type":"slider"},"rudder":{"displayname":"rudder","labels":["Hard Right","Hard Left","center"],"property":"rudder","type":"choice","values":["hardRight","hardLeft","back"]},"state":{"displayname":"state","labels":["idle","navigating"],"property":"activeState","type":"choice","values":["idle","navigating"]}},"___physics_activation_state":4,"___physics_angular_velocity":[0.006768,0.002322,0.000003],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.000001,0,-0.000002],"___physics_mass":80051.2,"___physics_velocity_angular":[0.008379,-0.002339,0.000013],"___physics_velocity_linear":[0.000001,-0.000129,-0.00325],"___sourceAssetTimestamp":"Fri Nov 06 2015 15:59:41 GMT-0500 (Eastern Standard Time)","_length":230,"activeState":"navigating","counter":14602,"damageTexture":"/sas/assets/dde67e10","engine":"aheadHalf","height":10,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":0,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":true,"wireframe":false},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rudder":"back","sourceAssetId":"95bc52f8","states":{"idle":{"buoyancy":true,"movement":false,"transitionFunc":null,"transitions":["navigating"],"updateFunc":null},"navigating":{"buoyancy":true,"movement":true,"transitionFunc":null,"transitions":["idle"],"updateFunc":null}},"transform":[0.960735023021698,-0.277467995882034,0,0,0.277146011590958,0.959626972675323,-0.0174349993467331,0,0.00483600003644824,0.0167500004172325,0.998847007751465,0,-4315.25,1507.75,23.25,1],"type":"Primitive","visible":false,"width":35,"worldPosition":[-4315.25,1507.75,23.25]},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Nb759471a"},{"extends":"ocean/ocean.vwf","properties":{"DisplayName":"OceanShader","gA":0.092,"uChop":0.733,"uNormalPower":0.184,"uOceanDepth":0.037,"uReflectPow":3},"random":{"c":1,"s0":0.53533,"s1":0.471671,"s2":0.120087},"sequence":0,"source":"ocean/ocean.js","type":"subDriver/threejs","name":"Nce55636"},{"children":{"Nc23bd6fc":{"children":{"-sas-assets-298f2fa8-Nc23bd6fcN1649a98a":{"extends":"http://vwf.example.com/image.vwf","properties":{"DisplayName":"Image1","___assetServerOriginalID":"N1649a98a","height":156,"left":0,"owner":"ADLteam","src":"/sas/assets/9f1586ee","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,2,4,0,1],"visible":true,"width":252},"random":{"c":1,"s0":0.880096,"s1":0.554905,"s2":0.182805},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN1649a98a"},"-sas-assets-298f2fa8-Nc23bd6fcN449ff23":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"Label1","___assetServerOriginalID":"N449ff23","font_color":[0,0,0.345098],"font_size":19,"height":210,"left":0,"owner":"ADLteam","style":{"font-style":"italic"},"text":"The Fast Attack Craft Simulation is a distributed interactive environment that works directly with any compatible WebGL browser without the need for plugin downloads. The scenario is reconfigurable collaboratively, in real time. This simulation utilizes the ADL Initiative's work inside of the Virtual World Sandbox platform.","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,2,62,0,1],"visible":true,"width":429},"random":{"c":1,"s0":0.072766,"s1":0.809343,"s2":0.613576},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN449ff23"},"-sas-assets-298f2fa8-Nc23bd6fcN8439a913":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"Label2","___assetServerOriginalID":"N8439a913","font_color":[0,0,0.345098],"font_size":33,"height":54,"left":0,"owner":"ADLteam","style":{"font-style":"italic"},"text":"Fast Attack Craft Simulation","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,2,24,0,1],"visible":true,"width":445},"random":{"c":1,"s0":0.36539,"s1":0.881712,"s2":0.254832},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN8439a913"},"-sas-assets-298f2fa8-Nc23bd6fcN87a5a3d8":{"children":{"-sas-assets-298f2fa8-Nc23bd6fcN380036af":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"YourChoice","___assetServerOriginalID":"N380036af","font_color":[1,1,1],"font_size":26,"height":37,"left":0,"owner":"ADLteam","style":{"margin-bottom":"20px","order":1,"position":"static"},"text":"You Are:","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-0.19,15,0,1],"visible":true,"width":520},"random":{"c":1,"s0":0.729979,"s1":0.216837,"s2":0.581641},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN380036af"},"-sas-assets-298f2fa8-Nc23bd6fcN5e24739c":{"events":{"pointerClick":{"body":" if(vwf.client() !== vwf.moniker()) return;\n    this.parent.parent.selectRole(this.text);","parameters":[" eventData"," nodeData "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Instructor","___assetServerOriginalID":"N5e24739c","height":28,"left":0,"owner":"ADLteam","style":{"margin":"3px","margin-top":"15px","order":7,"position":"static"},"text":"Instructor","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,90,0,1],"visible":true,"width":259},"random":{"c":1,"s0":0.838904,"s1":0.520298,"s2":0.905892},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN5e24739c"},"-sas-assets-298f2fa8-Nc23bd6fcN741cce22":{"events":{"pointerClick":{"body":" if(vwf.client() !== vwf.moniker()) return;\n    this.parent.parent.selectRole(this.text);","parameters":[" eventData"," nodeData "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"TAO","___assetServerOriginalID":"N741cce22","height":28,"left":0,"owner":"ADLteam","style":{"margin":"3px","order":5,"position":"static"},"text":"Tactical Action Officer","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,30,0,1],"visible":true,"width":259},"random":{"c":1,"s0":0.838904,"s1":0.520298,"s2":0.905892},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN741cce22"},"-sas-assets-298f2fa8-Nc23bd6fcN9f1fe69":{"events":{"pointerClick":{"body":" if(vwf.client() !== vwf.moniker()) return;\n    this.parent.parent.selectRole(this.text);","parameters":[" eventData"," nodeData "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"SeaHawk","___assetServerOriginalID":"N9f1fe69","height":28,"left":0,"owner":"ADLteam","style":{"margin":"3px","order":3,"position":"static"},"text":"Seahawk Pilot","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,60,0,1],"visible":true,"width":259},"random":{"c":1,"s0":0.838904,"s1":0.520298,"s2":0.905892},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN9f1fe69"},"-sas-assets-298f2fa8-Nc23bd6fcNb331742c":{"events":{"pointerClick":{"body":" if(vwf.client() !== vwf.moniker()) return;\n    this.parent.parent.selectRole(this.text);","parameters":[" eventData"," nodeData "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"FAC","___assetServerOriginalID":"Nb331742c","height":28,"left":0,"owner":"ADLteam","style":{"margin":"3px","margin-top":"15px","order":6,"position":"static"},"text":"Fast Attack Craft","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,80,0,1],"visible":true,"width":259},"random":{"c":1,"s0":0.838904,"s1":0.520298,"s2":0.905892},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNb331742c"},"-sas-assets-298f2fa8-Nc23bd6fcNdd7965d9":{"events":{"pointerClick":{"body":" if(vwf.client() !== vwf.moniker()) return;\n    this.parent.parent.selectRole(this.text);","parameters":[" eventData"," nodeData "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"OOD","___assetServerOriginalID":"Ndd7965d9","height":28,"left":0,"owner":"ADLteam","style":{"margin":"3px","order":2,"position":"static"},"text":"Officer Of The Deck","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,40,0,1],"visible":true,"width":259},"random":{"c":1,"s0":0.838904,"s1":0.520298,"s2":0.905892},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNdd7965d9"},"-sas-assets-298f2fa8-Nc23bd6fcNe0ed98c5":{"events":{"pointerClick":{"body":"this.parent.parent.startSimulation();","parameters":["eventData","nodeData"]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"Button1","___assetServerOriginalID":"Ne0ed98c5","height":68,"left":0,"owner":"ADLteam","style":{"font-size":"30px","margin-top":"20px","order":30,"position":"static","width":"95%"},"text":"Join Simulation!","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,16.312,57.175998,1,1],"visible":true,"width":517},"random":{"c":1,"s0":0.221668,"s1":0.182144,"s2":0.424506},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNe0ed98c5"},"-sas-assets-298f2fa8-Nc23bd6fcNe130b22":{"events":{"pointerClick":{"body":" if(vwf.client() !== vwf.moniker()) return;\n    this.parent.parent.selectRole(this.text);","parameters":[" eventData"," nodeData "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"SCAT","___assetServerOriginalID":"Ne130b22","height":28,"left":0,"owner":"ADLteam","style":{"margin":"3px","order":4,"position":"static"},"text":"Small Craft Action Team","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,50,0,1],"visible":true,"width":259},"random":{"c":1,"s0":0.838904,"s1":0.520298,"s2":0.905892},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNe130b22"},"-sas-assets-298f2fa8-Nc23bd6fcNe935b34d":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"Title","___assetServerOriginalID":"Ne935b34d","font_color":[1,1,1],"font_size":19,"height":29,"left":0,"owner":"ADLteam","style":{"order":0,"position":"static"},"text":"Choose Your Role","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-0.19,5,0,1],"visible":true,"width":520},"random":{"c":1,"s0":0.729979,"s1":0.216837,"s2":0.581641},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNe935b34d"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"ChoicePanel","___assetServerOriginalID":"N87a5a3d8","background_color":[0.019607,0.019607,0.019607],"background_visible":true,"border_color":[1,1,1],"border_width":2,"height":403,"left":0,"owner":"ADLteam","style":{"align-items":"center","display":"flex","flex-direction":"column","max-width":"500px","order":0,"padding":"10px","position":"relative","width":"37%"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],"visible":true,"width":519},"random":{"c":1,"s0":0.819274,"s1":0.975229,"s2":0.784824},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN87a5a3d8"},"-sas-assets-298f2fa8-Nc23bd6fcNb57658e8":{"children":{"-sas-assets-298f2fa8-Nc23bd6fcN5d32f9e0":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"InstructionTitle","___assetServerOriginalID":"N5d32f9e0","font_color":[1,1,1],"font_size":26,"height":100,"left":0,"owner":"ADLteam","style":{"height":"auto","margin-bottom":"20px","order":0,"position":"static","width":"auto"},"text":"Instructions","text_align":"center","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,10.17488,1.725446,0,1],"visible":true,"width":520},"random":{"c":1,"s0":0.729979,"s1":0.216837,"s2":0.581641},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcN5d32f9e0"},"-sas-assets-298f2fa8-Nc23bd6fcNbaf6bd84":{"extends":"http://vwf.example.com/image.vwf","properties":{"DisplayName":"Controls","___assetServerOriginalID":"Nbaf6bd84","height":180,"left":0,"owner":"ADLteam","src":"/sas/assets/cfe6e93d","style":{"margin-top":"15px","order":2,"position":"static"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"visible":true,"width":300},"random":{"c":1,"s0":0.112041,"s1":0.625456,"s2":0.011421},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNbaf6bd84"},"-sas-assets-298f2fa8-Nc23bd6fcNed8ae2b8":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"Instructions","___assetServerOriginalID":"Ned8ae2b8","font_color":[1,1,1],"font_size":16,"height":549,"left":0,"owner":"ADLteam","style":{"height":"auto","position":"static","width":"auto"},"text":"Lorem ipsum orci aliquam rhoncus erat luctus a, himenaeos fermentum sodales sociosqu convallis torquent venenatis accumsan, volutpat metus auctor aliquet arcu tempor.","text_align":"left","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,10.015,13.581999,1,1],"visible":true,"width":520},"random":{"c":1,"s0":0.729979,"s1":0.216837,"s2":0.581641},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNed8ae2b8"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"InstructionPAnel","___assetServerOriginalID":"Nb57658e8","background_color":[0.019607,0.019607,0.019607],"background_visible":true,"border_color":[1,1,1],"border_width":2,"height":700,"left":0,"owner":"ADLteam","style":{"align-items":"center","display":"flex","flex-direction":"column","height":"auto","max-width":"600px","order":1,"padding":"20px","position":"relative","width":"45%"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"visible":false,"width":629},"random":{"c":1,"s0":0.477086,"s1":0.662482,"s2":0.229522},"sequence":0,"name":"-sas-assets-298f2fa8-Nc23bd6fcNb57658e8"}},"continues":"/sas/assets/298f2fa8","extends":"http://vwf.example.com/panel.vwf","methods":{"getCameraToggler":{"body":"var children = this.Scene.children;\n\n    for (var i = 0; i < children.length; i++)\n    {\n        var child = children[i];\n        if (child && child.isCameraToggler === true) return child;\n    }\n\n    return null;","parameters":[]},"ready":{"body":"Engine.startCoSimulating(this.id);","parameters":[]},"selectRole":{"body":"this.children_by_name.ChoicePanel.children_by_name.YourChoice.text = role;\n    this.children_by_name.InstructionPAnel.visible = true;\n    this.children_by_name.InstructionPAnel.children_by_name.Instructions.text = this.instructions[role];\n    if (this.controls[role])\n    {\n        this.children_by_name.InstructionPAnel.children_by_name.Controls.visible = true;\n        this.children_by_name.InstructionPAnel.children_by_name.Controls.src = this.controls[role];\n    }\n    else\n    {\n        this.children_by_name.InstructionPAnel.children_by_name.Controls.visible = false;\n    }","parameters":["role"]},"startSimulation":{"body":"var choice = this.children_by_name.ChoicePanel.children_by_name.YourChoice.text;\n    var camID = this.cameraChoiceIDs[choice];\n    if (camID && vwf.client() == vwf.moniker())\n    {\n        _dView.setCamera(camID);\n    }\n\n    if (choice === \"Instructor\")\n    {\n        var toggler = this.getCameraToggler();\n        if (toggler) toggler.bindToggle();\n    }\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (!this.simulationStarted && sender)\n    {\n        this.simulationStarted = true;\n        sender.xAPISend(\"started\", null, \"Start Screen\", null);\n    }\n\n    if (sender)\n    {\n        sender.xAPISend(\"selected\", choice, choice, null);\n    }","parameters":[]}},"properties":{"DisplayName":"IntroScreen","___sourceAssetTimestamp":"Fri Nov 20 2015 09:20:52 GMT-0500 (EST)","background_color":[1,0,0],"background_visible":true,"border_color":[1,1,1],"cameraChoiceIDs":{"Fast Attack Craft":"SandboxCamera-vwf-N7ce6c503","Fast Attact Craft":"SandboxCamera-vwf-N6b282caa","Instructor":"SandboxCamera-vwf-Nf2e6497c","Officer Of The Deck":"-sas-assets-13a0f08e-Nfeb91833","Seahawk Pilot":"SandboxCamera-vwf-sas-assets-7582c61c-Nfce155deN912c6b53","Small Craft Action Team":"SandboxCamera-vwf-sas-assets-06f4f9c2-N81a0a4b8Nc63b7c4e","Tactical Action Officer":"SandboxCamera-vwf-sas-assets-61c77daf-N8ffd1eecNa138c25e"},"controls":{"Fast Attack Craft":"/sas/assets/c9d6167a","Instructor":"/sas/assets/26345faa","Officer Of The Deck":"/sas/assets/0e0d5b9c","Seahawk Pilot":"/sas/assets/cfe6e93d","Small Craft Action Team":"/sas/assets/e99f1067","Tactical Action Officer":""},"height":100,"instructions":{"Fast Attack Craft":"Guide your fleet of attack boats through the defenses of the USS Stockdale, and sink her with your rockets.","Instructor":"Observe the exercise from every point of view, and evaluate the participants' performances.","Officer Of The Deck":"Take command of the USS Stockdale, an Arleigh Burke-class destroyer, and defend her against a swarm of Fast Attack Crafts (FACs).","Seahawk Pilot":"Aid in the defense of the USS Stockdale by scouting incoming ships, and using your guided missiles to destroy incoming hostiles.","Small Craft Action Team":"Use your deck-mounted 50-caliber machine gun to take out incoming hostiles, as identified by your team.","Tactical Action Officer":"Man the radar of the USS Stockdale, and use your knowledge of the surroundings to direct the defenders to incoming threats."},"left":0,"owner":"ADLteam","simulationStarted":false,"sourceAssetId":"298f2fa8","style":{"align-items":"center","background":"url(/sas/assets/7fcc5d9f) center / cover no-repeat","bottom":"0px","display":"flex","height":"100%","justify-content":"space-around","left":"0px","right":"0px","top":"0px","width":"100%"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-6.313189,-4.361907,20.016943,1],"visible":true,"visibleToCamera":"SandboxCamera-vwf-Nd30be6","width":100},"random":{"c":1,"s0":0.64075,"s1":0.777328,"s2":0.234217},"sequence":0,"name":"Nc23bd6fc"}},"extends":"SandboxCamera.vwf","properties":{"DisplayName":"StartScreen","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,0,0,1,0,55.5,335.5,20,1]},"random":{"c":1,"s0":0.399099,"s1":0.805381,"s2":0.163452},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"Nd30be6"},{"extends":"sphere2.vwf","methods":{"ready":{"body":"Engine.emit.setProperty(Engine.application(), \"playMode\", 'paused');\n    $(document.body).append(\"<div id='PlayPauseBtn'>Play</div>\");\n    $(\"#PlayPauseBtn\").css(\n    {\n        \"z-index\": 100000,\n        \"position\": \"absolute\",\n        \"top\": \"0px\"\n    });\n    $(\"#PlayPauseBtn\").button();\n    $(\"#PlayPauseBtn\").click(function()\n    {\n        var playMode = Engine.getProperty(Engine.application(), \"playMode\");\n        if (playMode === \"play\")\n        {\n            Engine.emit.setProperty(Engine.application(), \"playMode\", 'paused');\n        }\n        else\n            Engine.emit.setProperty(Engine.application(), \"playMode\", 'play');\n\n    });","parameters":[]}},"properties":{"DisplayName":"Play/Pause button","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Nov 10 2015 16:54:30 GMT-0500 (Eastern Standard Time)","materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"4e65b2f3","transform":[1,0,0,0,0,1,0,0,0,0,1,0,20.5,335,-308.75,1],"type":"Primitive"},"random":{"c":1,"s0":0.118851,"s1":0.37918,"s2":0.41705},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"Ne7fca955"},{"extends":"asset.vwf","properties":{"DisplayName":"Terrain","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":0,"g":0,"r":0},"blendMode":1,"color":{"b":0.4,"g":0.4,"r":0.4},"combine":0,"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":10,"scaley":10,"src":"/sas/assets/7a725720"},{"alpha":1,"mapInput":0,"mapTo":4,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"/sas/assets/29377d3a"}],"metal":false,"reflect":0.01,"shading":true,"shininess":0.000002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"2aeebf25","transform":[6590.416015625,-2612.291015625,0,0,2612.291015625,6590.416015625,0,0,0,0,7089.26318359375,0,1550.25,-28,-14.25,1]},"random":{"c":1,"s0":0.109903,"s1":0.767316,"s2":0.11159},"sequence":0,"source":"/sas/assets/0740300c","type":"subDriver/threejs/asset/vnd.gltf+json","name":"Nf1bee40d"},{"extends":"SandboxCamera.vwf","methods":{"deinitialize":{"body":"\n  this.Scene.unbind('keyUp', this.keyUp);\n      //This function was created for you by the system. \n      //Deinitialize is called when the object is being destroyed.\n      // Clean up here if your object allocated any resources manually during initialize.\n","parameters":[]},"handleMovement":{"body":"var maxV = 1.3;\n    this.velocity[0] = 0;\n    this.velocity[1] = 0;\n\n    if (this.key.D)\n        this.velocity[0] = maxV;\n    if (this.key.A)\n        this.velocity[0] = -maxV;\n    if (this.key.W)\n        this.velocity[1] = maxV;\n    if (this.key.S)\n        this.velocity[1] = -maxV;\n\n    if (!(this.velocity[0] == 0 && this.velocity[1] == 0))\n    {\n        console.log(\"Key pressed on free camera\", e, this.velocity, this.acceleration);\n        this.transformAPI.move(this.velocity[0], this.velocity[1], 0, this.transformAPI.COORDINATES.LOCAL);\n    }","parameters":[]},"ready":{"body":"this.Scene.unbind('keyUp', this._keyUp);\n    this.Scene.unbind('keyDown', this._keyDown);\n    this.Scene.unbind('pointerMove', this.pointermoved);\n    this.Scene.unbind('pointerDown', this.pointerdown);\n    this.Scene.unbind('pointerUp', this.pointerup);\n\n    var self = this;\n    this.key = {\n        W: false,\n        A: false,\n        S: false,\n        D: false\n    };\n    this.pointer = false;\n    this.velocity = [0, 0];\n\n    this.pointermoved = function(event)\n    {\n        self.relX = self.lastX - event.position[0];\n        self.relY = self.lastY - event.position[1];\n        self.lastX = event.position[0];\n        self.lastY = event.position[1];\n\n        console.log(\"Pointer moved\", self.relX);\n    }\n    this.pointerdown = function(event)\n    {\n        self.pointer = true;\n        self.lastX = event.position[0];\n        self.lastY = event.position[1];\n\n        console.log(\"Pointer down\", self.relX);\n    }\n    this.pointerup = function(event)\n    {\n        self.pointer = false;\n    }\n\n    this._keyDown = function(e, d)\n    {\n        console.log(\"Key down\");\n        if (e.key.key in self.key) self.key[e.key.key] = true;\n    }\n\n    this._keyUp = function(e, d)\n    {\n        if (e.key.key in self.key) self.key[e.key.key] = false;\n    };\n\n    this.Scene.bind('keyUp', this._keyUp);\n    this.Scene.bind('keyDown', this._keyDown);\n    this.Scene.bind('pointerMove', this.pointermoved);\n    this.Scene.bind('pointerDown', this.pointerdown);\n    this.Scene.bind('pointerUp', this.pointerup);\n    //This function was created for you by the system. \n    //The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects","parameters":[]},"tick":{"body":"if (this.pointer)\n    {\n        this.transformAPI.rotateZ(this.relX * 500, this.transformAPI.COORDINATES.GLOBAL);\n        this.transformAPI.rotateX(this.relY * 200, this.transformAPI.COORDINATES.LOCAL);\n        this.relX = 0;\n        this.relY = 0;\n    }\n\n    this.handleMovement();","parameters":[]}},"properties":{"DisplayName":"FreeCamera","EditorData":{"acceleration":{"displayname":"Keypress Acceleration","max":1,"min":0,"property":"acceleration","step":0.1,"type":"slider"},"velocity":{"displayname":"Initial Velocity","max":5,"min":0,"property":"velocity","step":0.1,"type":"vector"}},"___sourceAssetTimestamp":"Wed Nov 04 2015 16:19:14 GMT-0500 (Eastern Standard Time)","acceleration":0.1,"far":10000,"lastX":0.410759,"lastY":0.909276,"owner":"ADLteam","relX":0,"relY":0,"transform":[-0.741667985916138,-0.670768976211548,0,0,0.670095026493073,-0.74092698097229,0,0,0,0,1,0,-142,183.75,74.75,1],"velocity":[0,0],"worldTransform":[-0.741667985916138,-0.670768976211548,0,0,0.670095026493073,-0.74092698097229,0,0,0,0,1,0,-142,183.75,74.75,1]},"random":{"c":1,"s0":0.898159,"s1":0.551168,"s2":0.348852},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"Nf2e6497c"},{"children":{"N5acb21c":{"extends":"asset.vwf","properties":{"DisplayName":"Chemical Tanker","___assetServerOriginalID":"N65b7e28d","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Wed Nov 04 2015 14:11:23 GMT-0500 (Eastern Standard Time)","materialDef":{"alpha":1,"ambient":{"b":0.616883,"g":0.616883,"r":0.616883},"blendMode":1,"color":{"a":1,"b":0.616883,"g":0.616883,"r":0.616883},"combine":0,"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/51c1a77e"}],"metal":false,"reflect":0.01,"shading":true,"shininess":0.000002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","sourceAssetId":"95bc52f8","transform":[0.0242570005357265,-1.39497196674347,-0.0243510007858276,0,1.39378905296326,0.0242759995162487,0.000422000011894852,0,0,-0.0243539996445179,1.39518201351166,0,-0.457085996866226,0.426483005285263,-0.462936997413635,1]},"random":{"c":1,"s0":0.770068,"s1":0.372494,"s2":0.669335},"sequence":0,"source":"/sas/assets/b7747e55","type":"subDriver/threejs/asset/vnd.gltf+json","name":"N5acb21c"}},"extends":"box2.vwf","methods":{"activateState":{"body":"\n    var currentState = this.states[this.activeState];\n    if (currentState.transitions && currentState.transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        newState = this.states[newState];\n        if (!newState)\n        {\n            console.log('state does not exist');\n        }\n        if (newState.transitionFunc && this[newState.transitionFunc])\n        {\n            this[newState.transitionFunc]();\n        }\n\n    }\n    else\n    {\n        console.log('invalid transition');\n    }    \n","parameters":["newState"]},"buoyancy":{"body":"\n        var waterDepth = 20;\n    var hullThick = 2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 2;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n        //this.physicsAPI.addForceAtCenter(this.transformAPI.localToGlobal(0, 100, 0));\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 10;\n        vel[1] *= 1.0 - depth / 3;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }        \n","parameters":[]},"command":{"body":"\n    var command = args[0];\n    if (command == \"aheadFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadFull\";\n    }\n    if (command == \"backFull\")\n    {\n        this.activateState('navigating');\n        this.engine = \"backFull\";\n    }\n    if (command == \"aheadHalf\")\n    {\n        this.activateState('navigating');\n        this.engine = \"aheadHalf\";\n    }\n    if (command == \"engineIdle\")\n    {\n        this.activateState('navigating');\n        this.engine = \"idle\";\n    }\n    if (command == \"hardRight\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardRight\";\n    }\n    if (command == \"hardLeft\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"hardLeft\";\n    }\n    if (command == \"rudderCenter\")\n    {\n        this.activateState('navigating');\n        this.rudder = \"center\";\n    }    \n","parameters":["args"]},"hit":{"body":"if (force > 5) //cannot be hurt by 50 cal\n    {\n\n    this.children_by_name.Barry1.materialDef.layers[0].src = this.damageTexture;\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"is-damaged\", this.DisplayName, \"TacticalActionOfficer\", null);\n    }\n    }","parameters":["pos","force"]},"movement":{"body":"var torque = [0, 0, 0];\n    var force = [0, 0, 0];\n    if (this.rudder == 'hardLeft')\n    {\n        torque[2] = .0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'hardRight')\n    {\n        torque[2] = -.0001 * this.physicsAPI.getMass();\n    }\n    if (this.rudder == 'center')\n    {\n\n    }\n    if (this.engine == \"aheadFull\")\n    {\n        force[0] = 25 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"aheadHalf\")\n    {\n        force[0] = 12 * this.physicsAPI.getMass();\n    }\n    if (this.engine == \"idle\")\n    {\n\n    }\n    if (this.engine == 'backFull')\n    {\n        force[0] = -12 * this.physicsAPI.getMass();\n    }\n    torque[2] *= force[0];\n    force = this.transformAPI.localToGlobalRotation(force);\n    this.physicsAPI.addForceAtCenter(force);\n    this.physicsAPI.addTorque(torque);","parameters":[]},"tick":{"body":"\n    var state = this.states[this.activeState];\n    if (state)\n    {\n\n        if (state.movement)\n            this.movement();\n        if (state.buoyancy)\n            this.buoyancy();\n        if(state.updateFunc && this[state.updateFunc])\n            this[state.updateFunc]()\n        \n        \n    }    \n","parameters":[]}},"properties":{"DisplayName":"Chemical Tanker","EditorData":{"engine":{"displayname":"engine","labels":["Ahead Full","Ahead Half","Back","Idle"],"property":"engine","type":"choice","values":["aheadFull","aheadHalf","back","idle"]},"hullThick":{"displayname":"Hull Thickness","max":25,"min":0,"property":"hullThick","type":"slider"},"rudder":{"displayname":"rudder","labels":["Hard Right","Hard Left","center"],"property":"rudder","type":"choice","values":["hardRight","hardLeft","back"]},"state":{"displayname":"state","labels":["idle","navigating"],"property":"activeState","type":"choice","values":["idle","navigating"]}},"___physics_activation_state":4,"___physics_angular_velocity":[0.006768,0.002322,0.000003],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.000001,0,-0.000002],"___physics_mass":80051.2,"___physics_velocity_angular":[0.008379,-0.002339,0.000013],"___physics_velocity_linear":[0.000001,-0.000129,-0.00325],"___sourceAssetTimestamp":"Fri Nov 06 2015 16:13:48 GMT-0500 (Eastern Standard Time)","_length":230,"activeState":"navigating","counter":14602,"damageTexture":"/sas/assets/dde67e10","engine":"aheadFull","height":10,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":0,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":true,"wireframe":false},"owner":"ADLteam","physicsAPI":{},"radarTracked":true,"rudder":"back","sourceAssetId":"95bc52f8","states":{"idle":{"buoyancy":true,"movement":false,"transitionFunc":null,"transitions":["navigating"],"updateFunc":null},"navigating":{"buoyancy":true,"movement":true,"transitionFunc":null,"transitions":["idle"],"updateFunc":null}},"transform":[1,0,0,0,0,0.998847007751465,-0.0174349993467331,0,0,0.017433000728488,0.998847007751465,0,854,718.75,22.5,1],"type":"Primitive","visible":false,"width":35,"worldPosition":[854,718.75,22.5]},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Nf5fd38f"},{"children":{"-sas-assets-7582c61c-Nfce155deN3710f70":{"extends":"http://vwf.example.com/node.vwf","properties":{"transform":[0.933438,-0.358368,-0.016294,0,0.357955,0.932646,-0.006249,0,0.017452,0,0.999847,0,0,0,0,1]},"random":{"c":1,"s0":0.339081,"s1":0.833633,"s2":0.376248},"sequence":0,"name":"-sas-assets-7582c61c-Nfce155deN3710f70"},"-sas-assets-7582c61c-Nfce155deN969ed85":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"smoke","___assetServerOriginalID":"N969ed85","alphaTest":0,"colorRange":[0,0,0,0],"depthTest":false,"emitterPosition":[0,0,0],"emitterSize":[1,1,1],"emitterType":"sphere","endColor":[0,0,0,0],"endSize":0.99,"image":"../vwfDataManager.svc/texture?UID=smoke.png","maxAcceleration":[0,0,-1],"maxLifeTime":1,"maxOrientation":13.5,"maxRate":0.75,"maxVelocity":[1,1,5],"minAcceleration":[0,0,-1],"minLifeTime":1,"minOrientation":-18.4,"minSpin":20,"minVelocity":[-1,-1,3],"owner":"ADLteam","particleCount":200,"sizeRange":0.02,"solver":"AnalyticShader","startColor":[0.4,0.4,0.4,1],"startSize":0.94,"transform":[0.930568,-0.365896,-0.012796,0,0.36582,0.930652,-0.007895,0,0.014796,0.002665,0.999886,0,-0.217236,-1.253456,0.506611,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":1,"s0":0.38,"s1":0.368383,"s2":0.004375},"sequence":0,"name":"-sas-assets-7582c61c-Nfce155deN969ed85"},"-sas-assets-7582c61c-Nfce155deN9db3f32f":{"extends":"box2.vwf","properties":{"DisplayName":"Launcher1","___assetServerOriginalID":"N9db3f32f","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.75,"height":0.66,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[1,0,0,0,0,-0.0747769996523857,-0.997201979160309,0,0,0.997200012207031,-0.0747769996523857,0,1.40499901771545,-2.24699997901917,-0.962001025676727,1],"type":"Primitive","visible":false,"worldTransform":[0.930567026138306,0.365819007158279,0.0147949997335672,0,0.0401207990944386,-0.0617184564471245,-0.99728661775589,0,-0.363914638757706,0.92863655090332,-0.0721108615398407,0,-26.3580760955811,18.1803951263428,24.5529079437256,1]},"random":{"c":1,"s0":0.547852,"s1":0.427437,"s2":0.329113},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-7582c61c-Nfce155deN9db3f32f"},"-sas-assets-7582c61c-Nfce155deNcb704c67":{"extends":"box2.vwf","properties":{"DisplayName":"Launcher2","___assetServerOriginalID":"Ncb704c67","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.75,"height":0.66,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[1,0,0,0,0,-0.0939880013465881,-0.995573997497559,0,0,0.995571970939636,-0.0939880013465881,0,-1.70000195503235,-2.24600195884705,-0.962001025676727,1],"type":"Primitive","visible":false,"worldTransform":[0.930567026138306,0.365819007158279,0.0147949997335672,0,0.0471291951835155,-0.0796100646257401,-0.995710015296936,0,-0.363073110580444,0.927273094654083,-0.0913239941000938,0,-29.2478523254395,17.0454559326172,24.5069732666016,1]},"random":{"c":1,"s0":0.547852,"s1":0.427437,"s2":0.329113},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"-sas-assets-7582c61c-Nfce155deNcb704c67"},"-sas-assets-7582c61c-Nfce155deNf79a9db2":{"children":{"-sas-assets-7582c61c-Nfce155deN5828cc":{"extends":"asset.vwf","properties":{"DisplayName":"UH_60_Glass1","___assetServerOriginalID":"N5828cc","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":0.240259,"ambient":{"b":0.5,"g":0.5,"r":0.5},"blendMode":1,"color":{"a":0.240259,"b":0.5,"g":0.5,"r":0.5},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.6,"shading":true,"shininess":0.002002,"side":0,"specularColor":{"b":0.898,"g":0.898,"r":0.898},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"transform":[0.00999800022691488,0,0,0,0,0.00999800022691488,0,0,0,0,0.00999800022691488,0,0,0,0,1],"type":"3DR Object"},"random":{"c":1,"s0":0.270047,"s1":0.80999,"s2":0.618073},"sequence":0,"source":"UH_60_Glass1","type":"link_existing/threejs","name":"-sas-assets-7582c61c-Nfce155deN5828cc"},"-sas-assets-7582c61c-Nfce155deN6800ef37":{"extends":"asset.vwf","properties":{"DisplayName":"RotorBack","___assetServerOriginalID":"N6800ef37","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"transform":[0.00800000037997961,0,0,0,0,0.00700000021606684,0,0,0,0,0.00899900030344725,0,-0.210999995470047,7.11700010299683,2.55200004577637,1],"type":"3DR Object"},"random":{"c":1,"s0":0.456865,"s1":0.470268,"s2":0.27226},"sequence":0,"source":"RotorBack","type":"link_existing/threejs","name":"-sas-assets-7582c61c-Nfce155deN6800ef37"},"-sas-assets-7582c61c-Nfce155deN912c6b53":{"children":{"-sas-assets-7582c61c-Nfce155deNa904c512":{"children":{"-sas-assets-7582c61c-Nfce155deNcfe793d7":{"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"reticle2","___assetServerOriginalID":"Ncfe793d7","background_color":[1,0,0],"background_visible":false,"border_color":[0.30196,0.30196,0.30196],"border_radius":50,"border_style":"solid","height":25,"left":0,"owner":"ADLteam","style":{"transform":"translate(-50%,-50%)"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50,50,0,1],"visible":true,"visibleToAncestor":true,"width":25},"random":{"c":1,"s0":0.015725,"s1":0.38084,"s2":0.689161},"sequence":0,"name":"-sas-assets-7582c61c-Nfce155deNcfe793d7"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"reticle1","___assetServerOriginalID":"Na904c512","background_color":[0.533333,0.533333,0.533333],"background_visible":false,"border_color":[1,0,0],"border_radius":25,"border_style":"dashed","border_width":4,"height":75,"left":0,"owner":"ADLteam","style":{"transform":"translate(-50%,-50%)"},"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50,50,0,1],"visible":true,"visibleToAncestor":true,"width":75},"random":{"c":1,"s0":0.652858,"s1":0.224981,"s2":0.616599},"sequence":0,"name":"-sas-assets-7582c61c-Nfce155deNa904c512"}},"extends":"SandboxCamera.vwf","methods":{"ready":{"body":"//This function was created for you by the system. \n    //The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n\n    this.Scene.unbind('pointerMove', this._mouseMoved,this);\n    this.Scene.unbind('pointerDown', this._mouseDown,this);\n    this.Scene.unbind('pointerUp', this._mouseup,this);\n    var self = this;\n    this._mouseMoved = function(eventData)\n    {\n        if (!self.Scene.clientAPI.getCameraForClient(vwf.client()) || self.Scene.clientAPI.getCameraForClient(vwf.client()).DisplayName != self.DisplayName) return;\n        if (self.pointerState == 'down')\n        {\n            console.log(eventData);\n            self.parent.parent.userControlCounter = 200;\n            var relX = self.lastPos[0] - eventData.position[0];\n            var relY = self.lastPos[1] - eventData.position[1];\n            self.lastPos = [eventData.position[0], eventData.position[1]];\n            console.log(relX, relY);\n\n            self.transformAPI.rotate(relY * 100, 0, 0, self.transformAPI.COORDINATES.LOCAL);\n            self.transformAPI.rotate(0, 0, relX * 100, self.transformAPI.COORDINATES.GLOBAL);\n\n        }\n    }\n    this._mouseDown = function(eventData)\n    {\n        if (!self.Scene.clientAPI.getCameraForClient(vwf.client()) || self.Scene.clientAPI.getCameraForClient(vwf.client()).DisplayName != self.DisplayName) return;\n        if (eventData.button == 'left')\n        {\n            self.pointerState = \"down\";\n            console.log('pointer is down');\n            self.lastPos = [eventData.position[0], eventData.position[1]];\n        }\n    }\n    this._mouseup = function(eventData)\n    {\n        if (!self.Scene.clientAPI.getCameraForClient(vwf.client()) || self.Scene.clientAPI.getCameraForClient(vwf.client()).DisplayName != self.DisplayName) return;\n        self.pointerState = \"none\";\n    }\n\n    this.Scene.bind('pointerMove', this._mouseMoved,this);\n    this.Scene.bind('pointerDown', this._mouseDown,this);\n    this.Scene.bind('pointerUp', this._mouseup,this);","parameters":[]}},"properties":{"DisplayName":"UH60Pilot","___assetServerOriginalID":"N912c6b53","far":10000,"fov":70,"lastPos":[0.213684,0.312938],"near":0.08,"owner":"Rob","pointerState":"none","transform":[-0.99763298034668,-0.0687789991497993,-0.000838999985717237,0,0.0685570016503334,-0.993283987045288,-0.0932129994034767,0,0.00557600008323789,-0.0930489972233772,0.995643973350525,0,0.423999011516571,-1.68445599079132,1.42725300788879,1],"worldTransform":[-0.90318763256073,-0.428955793380737,-0.0157821793109179,0,0.428428262472153,-0.898586392402649,-0.0948350802063942,0,0.0264948364347219,-0.0924170389771461,0.995364010334015,0,-26.9345550537109,16.6853790283203,25.45583152771,1]},"random":{"c":1,"s0":0.564238,"s1":0.704742,"s2":0.70832},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"-sas-assets-7582c61c-Nfce155deN912c6b53"},"-sas-assets-7582c61c-Nfce155deNf03e7073":{"children":{"-sas-assets-7582c61c-Nfce155deNf1b3e5c7":{"extends":"rotator.vwf","properties":{"Amount":80,"DisplayName":"rotator1","Local":true,"___assetServerOriginalID":"Nf1b3e5c7","owner":"ADLteam","type":"behavior"},"random":{"c":1,"s0":0.10075,"s1":0.707774,"s2":0.915872},"sequence":0,"name":"-sas-assets-7582c61c-Nfce155deNf1b3e5c7"}},"extends":"asset.vwf","properties":{"DisplayName":"Mrotor","___assetServerOriginalID":"Nf03e7073","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":0.792207,"g":0.792207,"r":0.792207},"blendMode":1,"color":{"a":1,"b":0.792207,"g":0.792207,"r":0.792207},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/b29f970c"}],"metal":false,"reflect":0.001,"shading":true,"shininess":0.002002,"side":0,"specularColor":{"b":0.898,"g":0.898,"r":0.898},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"transform":[0.00919600017368793,0.00392600009217858,0,0,-0.00392899988219142,0.00919600017368793,0,0,0,0,0.00999800022691488,0,0.00487700011581182,0.0837310031056404,2.02027797698975,1],"type":"3DR Object"},"random":{"c":1,"s0":0.194717,"s1":0.569339,"s2":0.901306},"sequence":0,"source":"Mrotor","type":"link_existing/threejs","name":"-sas-assets-7582c61c-Nfce155deNf03e7073"}},"extends":"asset.vwf","properties":{"DisplayName":"art","___assetServerOriginalID":"Nf79a9db2","___physics_activation_state":1,"___physics_collision_height":0.8,"___physics_collision_length":3,"___physics_collision_type":"2","___physics_collision_width":7.6,"___physics_deactivation_time":0,"___physics_enabled":false,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"___sourceAssetTimestamp":"Tue Oct 13 2015 15:10:30 GMT-0400 (Eastern Daylight Time)","counter":98.199999,"materialDef":{"alpha":1,"ambient":{"b":0.805194,"g":0.805194,"r":0.805194},"blendMode":1,"color":{"a":1,"b":0.805194,"g":0.805194,"r":0.805194},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/b29f970c"}],"metal":false,"reflect":0.01,"shading":true,"shininess":0.020002,"side":0,"specularColor":{"b":0.898,"g":0.898,"r":0.898},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,0,0,1,0,-0.0890009999275208,-1.74054598808289,-1.46725499629974,1]},"random":{"c":1,"s0":0.009345,"s1":0.598593,"s2":0.108742},"sequence":0,"source":"/sas/assets/5bc62bd9","type":"subDriver/threejs/asset/vnd.collada+xml","name":"-sas-assets-7582c61c-Nfce155deNf79a9db2"},"Nb58ef93b":{"extends":"SandboxCamera.vwf","properties":{"DisplayName":"Camera1","far":10000,"owner":"ADLteam","transform":[-0.998915016651154,-0.0441639982163906,0.0148980002850294,0,0.0441970005631447,-0.999020993709564,0.00200699991546571,0,0.0147949997335672,0.00266500003635883,0.999885022640228,0,-0.117471002042294,19.4124755859375,2.95033502578735,1]},"random":{"c":1,"s0":0.41355,"s1":0.238399,"s2":0.322522},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"Nb58ef93b"}},"continues":"/sas/assets/7582c61c","extends":"box2.vwf","methods":{"TAOCommand":{"body":"if( args[0] == \"Seahawk Warning\")\n   {\n        this.activateState(\"warn\");   \n   }\n    if( args[0] == \"Seahawk Engage\")\n   {\n        this.activateState(\"engage\");   \n   }\n   if( args[0] == \"Seahawk Disengage\")\n   {\n        this.activateState(\"scram\");   \n   }","parameters":["args"]},"_kd":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 200;\n   \n    if (this.keysDown.indexOf(e.key.key) == -1)\n    {\n        this.keysDown.push(e.key.key);\n    }","parameters":["e","d"]},"_ku":{"body":"if (!this.verifyCamera()) return;\n    this.userControlCounter = 200;\n    if (this.keysDown.indexOf(e.key.key) != -1)\n    {\n        this.keysDown.splice(this.keysDown.indexOf(e.key.key), 1);\n    }\n\n    if (e.key.key == 'space')\n    {\n        this.launchMissile();\n    }","parameters":["e","d"]},"activateState":{"body":"//console.log(\"activateState\");\n    var state = this.states[statename];\n\n    if (state.transitionFunc)\n        this[state.transitionFunc](this.activeState);\n    this.activeState = statename;\n    for (var i in state.properties)\n    {\n        this[i] = state.properties[i];\n    }","parameters":["statename"]},"distToTarget":{"body":"if (!this.targetID)\n        return 0\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target)\n        return 0;\n        \n       \n       \n            var pos = this.transformAPI.getWorldPosition();\n            var hostilePos = target.transformAPI.getWorldPosition();\n            return Vec3.distance(pos, hostilePos);","parameters":[]},"doAIBehaviors":{"body":"var state = this.states[this.activeState];\n    \n    if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }","parameters":[]},"doFlightModel":{"body":"var t = this.physicsAPI.getLinearVelocity();\n    t = this.transformAPI.globalToLocalRotation(t)\n    var z = t[2];\n    t[2] = 0;\n    var len = MATH.lengthVec3(t) * Math.sign(t[1]);\n    t[0] = 0;\n    t[1] = len;\n    t[2] = z;\n    t = this.transformAPI.localToGlobalRotation(t);\n    this.physicsAPI.setLinearVelocity(t);","parameters":[]},"doHover":{"body":"if (this.isHit)\n    {\n        this.elevation = 20;\n        this.children_by_name.art.children_by_name.Mrotor.children_by_name.rotator1.Amount *= .8;\n       \n       /* var sender = this.Scene.children_by_name.xAPISender;\n        if (sender)\n        {\n            sender.xAPISend(\"is-damaged\", this.DisplayName, \"Seahawk\", null);\n        } */\n        return;\n    }\n    if (!this.isHit)\n    {\n        var elTemp = this.transformAPI.getPosition()[2];\n        if (elTemp < this.minHeight)\n            this.elevation = this.minHeight;\n        else if (elTemp > this.maxHeight)\n            this.elevation = this.maxHeight;\n        else this.elevation = elTemp;\n    }\n    var waterDepth = this.elevation;\n    var hullThick = 0;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 10;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }\n\n    this.counter += .05;\n    var mass = this.physicsAPI.getMass() * 10;\n    var amt1 = Math.cos(this.counter) / 10;\n    var amt2 = Math.cos(this.counter / 3) / 10;\n    var amt3 = Math.cos(this.counter / 1) / 3;\n    this.physicsAPI.addForceAtCenter([amt1, amt2, amt3]);","parameters":[]},"doUserInput":{"body":"var mass = 20 * this.physicsAPI.getMass();\n    var topKey = this.keysDown[this.keysDown.length - 1];\n    if (topKey)\n    {\n\n        var thispos = this.transformAPI.getPosition();\n        if (this.keyIsDown('W'))\n        {\n            var force = this.transformAPI.localToGlobalRotation(0, -mass, 0);\n            this.physicsAPI.addForceAtCenter(force);\n        }\n        if (this.keyIsDown('S'))\n        {\n            var force = this.transformAPI.localToGlobalRotation(0, mass, 0);\n            this.physicsAPI.addForceAtCenter(force);\n        }\n        if (this.keyIsDown('Q'))\n        {\n            this.physicsAPI.addForceAtCenter(0, 0, -mass)\n            this.elevation = this.transformAPI.getPosition()[2];\n        }\n        if (this.keyIsDown('E'))\n        {\n            this.physicsAPI.addForceAtCenter(0, 0, mass)\n            this.elevation = this.transformAPI.getPosition()[2];\n        }\n        if (this.keyIsDown('A'))\n        {\n            this.physicsAPI.addTorque(0, 0, mass / 4, this.transformAPI.COORDINATES.LOCAL);\n        }\n        if (this.keyIsDown('D'))\n        {\n            this.physicsAPI.addTorque(0, 0, -mass / 4, this.transformAPI.COORDINATES.LOCAL);\n        }\n\n    }","parameters":[]},"doUserTargeting":{"body":"/********************************************\n     * Update weapons target\n     *******************************************/\n\n    var worldToCamera = new THREE.Matrix4().fromArray(this.children_by_name.art.children_by_name.UH60Pilot.worldTransform);\n    worldToCamera.getInverse(worldToCamera);\n    var target = {\n        range: 4,\n        id: ''\n    };\n\n    // get location of all scene children in view space\n    for (i = 0; i < this.Scene.children.length; i++)\n    {\n        var node = this.Scene.children[i];\n        if (node === this) continue;\n\n        var targetCoord = new THREE.Vector4().fromArray(node.transformAPI.getWorldPosition().concat([1]));\n        targetCoord.applyMatrix4(worldToCamera);\n\n        // calculate distance to center iff target is in front of the camera\n        if (targetCoord.y > 0)\n        {\n            var range = Math.sqrt(targetCoord.x * targetCoord.x + targetCoord.z * targetCoord.z);\n            if (range < target.range)\n            {\n                target.id = node.id;\n                target.range = range;\n            }\n        }\n    }\n\n    this.weaponsTarget = target.id;\n\n    if (this.weaponsTarget)\n        this.children_by_name.art.children_by_name.UH60Pilot.children_by_name.reticle1.border_color = [1, 0, 0];\n    else\n        this.children_by_name.art.children_by_name.UH60Pilot.children_by_name.reticle1.border_color = [0.5, 0.5, 0.5];","parameters":[]},"engage":{"body":"this.seekTarget();\n    if (this.distToTarget() < 200)\n    {\n        this.weaponsTarget = this.targetID;\n        this.launchMissile();\n        if(this.Missiles === 0)\n            this.activateState(\"scram\");\n        else\n            this.activateState(\"reload\");\n    }","parameters":[]},"getClosestHostile":{"body":"var dist = Infinity;\n    var hostile = null;\n    for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var node = this.Scene.children[i];\n        if (node.hostile && node.state !== \"defeated\")\n        {\n            var pos = this.transformAPI.getWorldPosition();\n            var hostilePos = node.transformAPI.getWorldPosition();\n            if (Vec3.distance(pos, hostilePos) < dist)\n            {\n                dist = Vec3.distance(pos, hostilePos);\n                hostile = node.id;\n            }\n        }\n    }\n    return hostile;","parameters":[]},"hit":{"body":"this.children_by_name.art.materialDef.layers[0].src = \"/sas/assets/d2f274ee\";\n    this.children_by_name.smoke.visible = true;\n    this.isHit = true;\n    this.___physics_constant_force[2] = 0;\n    this.___physics_damping = .1;\n    this.activateState(\"hit\");","parameters":[]},"inEngage":{"body":"this.targetID = this.getClosestHostile();","parameters":[]},"inReload":{"body":"this.fireCounter = 600;","parameters":[]},"inWarn":{"body":"this.targetID = this.getClosestHostile();","parameters":[]},"keyIsDown":{"body":"if (this.keysDown.indexOf(char) == -1) return false;\n    return true;","parameters":["char"]},"launchMissile":{"body":"if (this.Missiles === 0) return;\n    this.Missiles--;\n    var def = _DataManager.getCleanNodePrototype(this.missileDef);\n\n    if (this.random() > .5)\n        var pos = this.children_by_name.Launcher1.worldTransform.slice();\n    else\n        pos = this.children_by_name.Launcher2.worldTransform.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    // def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    if (this.weaponsTarget)\n    {\n        def.properties.target_data = {\n            id: this.weaponsTarget\n        };\n    }\n\n    var now = performance.now();\n    // console.profile(\"launch\");\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        def.properties.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.weaponsTarget || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": (def.continues + def.stmtId) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": this.transformAPI.getWorldPosition() || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"fired\", 'Seahawk Missile', 'Seahawk Pilot', null, conExt, missId);\n    }\n\n    var smokeDef = this.smokeDef;\n    console.log(def.properties.target_data);\n    this.Scene.createChild( GUID(), def, null, function(id)\n    {\n        smokeDef.properties.targetEntity = id;\n        this.Scene.createChild( GUID(), _DataManager.getCleanNodePrototype(smokeDef), null, function()\n        {\n            console.log(performance.now() - now);\n        });\n    });","parameters":[]},"ready":{"body":"this.Scene.unbind(\"keyDown\", this.__kd,this);\n    this.Scene.unbind(\"keyUp\", this.__ku,this);\n\n    var self = this;\n    this.__ku = function(e, d)\n    {\n        self._ku(e, d);\n    }\n\n    this.__kd = function(e, d)\n    {\n        self._kd(e, d);\n    }\n\n    this.Scene.bind(\"keyDown\", this.__kd,this);\n    this.Scene.bind(\"keyUp\", this.__ku,this);","parameters":[]},"reload":{"body":"this.fireCounter--;\n    if (this.fireCounter < 0)\n    {\n        this.activateState('engage');\n    }","parameters":[]},"scram":{"body":"this.seekTarget(this.scramPos);","parameters":[]},"seekTarget":{"body":"if (!target)\n    {\n        var node = this.Scene.findNodeByID(this.targetID);\n        if (!node)\n        {\n            this.targetID = this.getClosestHostile();\n            return;\n        }\n        target = node.transformAPI.getWorldPosition();\n    }\n    var mass = 20 * this.physicsAPI.getMass();\n    target = this.transformAPI.globalToLocal(target);\n\n    if (Vec3.distance(target, this.transformAPI.getWorldPosition()) < 20)\n        return;\n    if (target[1] < 0)\n    {\n        var force = this.transformAPI.localToGlobalRotation(0, -mass, 0);\n        this.physicsAPI.addForceAtCenter(force);\n    }\n    if (target[0] > 0)\n    {\n        this.physicsAPI.addTorque(0, 0, mass / 4, this.transformAPI.COORDINATES.LOCAL);\n    }\n    else\n    {\n        this.physicsAPI.addTorque(0, 0, -mass / 4, this.transformAPI.COORDINATES.LOCAL);\n    }\n    if (target[2] > -100)\n    {\n        this.physicsAPI.addForceAtCenter(0, 0, mass)\n        this.elevation = this.transformAPI.getPosition()[2];\n    }\n    else\n    {\n        this.physicsAPI.addForceAtCenter(0, 0, -mass)\n        this.elevation = this.transformAPI.getPosition()[2];\n    }","parameters":["target"]},"tick":{"body":"// The tick function is called 20 times every second.\n    // Write code here to animate over time\n\n    this.audioAPI.playSound(\"/sas/assets/dc81768a\", true, 300, false);\n    this.userControlCounter--;\n    this.doHover();\n    if (this.userControlled())\n    {\n        this.doUserInput();\n        this.doUserTargeting();\n    }\n    else\n    {\n        this.doAIBehaviors();\n    }\n\n    this.doFlightModel();","parameters":[]},"userControlled":{"body":"var thisCam = this.children_by_name.art.children_by_name.UH60Pilot.id;\n\n    return this.keysDown.length !== 0 || ( this.userControlCounter > 0 && this.Scene.clientAPI.getClientForCamera(thisCam).length > 0);","parameters":[]},"verifyCamera":{"body":"var cam = this.children_by_name.art.children_by_name.UH60Pilot.id;\n    var camt = this.Scene.clientAPI.getCameraForClient(vwf.client());\n    if (!camt || camt.id != cam) return false;\n    return true;","parameters":[]},"warn":{"body":"this.seekTarget();\n    if(this.distToTarget() < 200)\n    {\n        //playWarnSound\n        this.activateState(\"idle\");\n    }","parameters":[]}},"properties":{"DisplayName":"SeaHawk","EditorData":{"_controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"},"activeState":{"displayname":"AI State","labels":["idle","warn","engage"],"property":"activeState","type":"choice","values":["idle","warn","engage"]}},"Missiles":8,"___physics_activation_state":1,"___physics_angular_velocity":[0,0,0],"___physics_constant_force":[0,0,9.8],"___physics_damping":0.7,"___physics_deactivation_time":0.05,"___physics_enabled":true,"___physics_linear_velocity":[0,0,0],"___physics_velocity_angular":[-0.054683,0.107621,-0.000592],"___physics_velocity_linear":[-0.001117,-0.008661,0.190989],"___sourceAssetTimestamp":"Tue Nov 24 2015 13:03:38 GMT-0500 (Eastern Standard Time)","_length":2.98,"activeState":"idle","controllingCamera":"SandboxCamera-vwf-sas-assets-7582c61c-Nfce155deN912c6b53","counter":2063.249999,"elevation":25,"fireCounter":0,"height":2.53,"hsegs":1,"isHit":false,"keysDown":[],"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"maxHeight":500,"minHeight":25,"missileDef":{"continues":"/sas/assets/73e8a4a3","properties":{"fired":true,"transform":[0.931571,0.357651,0.01626,0,0.051018,-0.087658,-0.994835,0,-0.354731,0.928518,-0.100194,0,-46.164845,3.089397,-0.936575,1]}},"owner":"ADLteam","scramPos":[500,500,250],"smokeDef":{"continues":"/sas/assets/aeb3d1dd","properties":{"targetEntity":"-sas-assets-73e8a4a3-Ne73d4bf3","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"sourceAssetId":"7582c61c","states":{"engage":{"transitionFunc":"inEngage","updateFunc":"engage"},"hit":{},"idle":{"updateFunc":null},"reload":{"transitionFunc":"inReload","updateFunc":"reload"},"scram":{"updateFunc":"scram"},"warn":{"transitionFunc":"inWarn","updateFunc":"warn"}},"targetID":"box2-vwf-N305bab2d","transform":[0.930567026138306,0.365819007158279,0.0147949997335672,0,-0.365895986557007,0.930652022361755,0.00266500003635883,0,-0.0127959996461868,-0.00789500027894974,0.999885022640228,0,-28.5,19.75,25.5,1],"type":"Primitive","userControlCounter":0,"visible":false,"weaponsTarget":"ocean-ocean-vwf-N4bab7165","width":8.49,"worldPosition":[-28.5,19.75,25.5],"worldTransform":[0.930567026138306,0.365819007158279,0.0147949997335672,0,-0.365895986557007,0.930652022361755,0.00266500003635883,0,-0.0127959996461868,-0.00789500027894974,0.999885022640228,0,-28.5,19.75,25.5,1]},"random":{"c":1362902,"s0":0.533835,"s1":0.238635,"s2":0.018869},"sequence":0,"name":"Nfce155de"},{"extends":"http://vwf.example.com/node3.vwf","methods":{"send50Cal":{"body":"/*\n    Code for sending xAPI statements from 50 Cal in demo\n    The 50 Cal fires bullets, simulated by raycast,\n    so in the instant it is fired, we know what it has hit.\n    We don't want to send a statement every bullet, we'd like\n    to send a statement every burst. Am using a boolean variable\n    to do this.  Want to also collect info from every bullet and\n    send the collective info in the burst statement.  So let's \n    pin down what the statement should look like, and what we\n    want to collect from the bullets and send with the burst.\n    Seems simple enough.\n    */\n\n    //vars to make it work, but to be ignored when pasting into place\n    var origin, dir, hit, started, ended;\n\n    //1 - Burst Statement\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n\n        // sender.xAPISend(\"fired\", \"object\", \"Small Craft Action Team\",\n        //     result /*optional - see result object*/ ,\n        //     conExt /*optional - see context.extesions object*/ );\n\n        //2 - Info from bullets - still inside the if sender\n        var startT, dur, roundsFired, numHits, hits;\n        if (!started)\n        {\n            startT = this.Scene.time;\n            hits = [];\n            ended = false;\n            started = true;\n            roundsFired = 0;\n            this.burstCount++; //make this a property\n        }\n        roundsFired++;\n        if (hit /*we have hit something significant*/ )\n        {\n            numHits++;\n            var newObj = true;\n            for (var i in hits)\n            {\n                if (hits[i] === hit)\n                    newObj = false;\n            }\n            if (newObj)\n                hits.push(hit); //or hit.node, or hit.node.DisplayName\n        }\n        // if (ended) //there might be a better word/way to accomplish\n        {\n            started = false;\n            dur = this.Scene.time - startT;\n\n            //3 - build objects for statement\n            var result = {\n                score:\n                {\n                    max: /*roundsFired ||*/ 140,\n                    raw: /*numHits ||*/ 45,\n                    min: 0,\n                    scaled: numHits / roundsFired || 0.321 //remove or 0.321 when in place\n                },\n                success: (hits.length > 0),\n                duration: \"PT\" + Math.floor(dur) + \"S\", //a real end - start number of the burst\n                response: \"scaled is the hit/fired ratio\"\n            };\n            var conExt = {\n                \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n                \"https://sandbox.adlnet.gov/context/extensions/objectHit\": JSON.stringify(hits) || \"broadside of barn\", //hit.node.DisplayName/hit.node.id\n                \"https://sandbox.adlnet.gov/context/extensions/userControlled\": \"\" + (this.isUserControlled || true),\n                \"https://sandbox.adlnet.gov/context/extensions/target\": this.targetID || \"no target\",\n                \"https://sandbox.adlnet.gov/context/extensions/shipStatus\": this.Scene.children_by_name[\"DDG51\"].engine || \"status error\",\n            };\n\n            //4 - Send it - inside if(ended),  inside if(sender)\n            sender.xAPISend(\"fired\", \"burst\" + (this.burstCount || 0), \"Small Craft Action Team\",\n                result /*optional - see result object*/ ,\n                conExt /*optional - see context.extesions object*/ );\n        } //if(ended)\n\n    } //if(sender)\n\n    /*\n    result object - object to be appended as result\n    {\n     \"score\": { \"scaled\": float, \"raw\": int, \"min\": int, \"max\": int },\n     \"success\": boolean,\n     \"completion\": boolean,\n     \"response\": string,\n     \"duration\": ISO 8601 duration\n     \"extensions\": { \"key must be valid URI\": value (any JSON type)}\n    }\n    */\n\n    /*\n    conExt - object to be appended to context.extensions\n    {\n     \"key must be valid URI\": value (any JSON type),\n     include:\n       \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": this.Scene.time,\n    }\n    */","parameters":[]},"send5Inch":{"body":"console.log(\"send 5 Inch statement\");\n    //vars to make it work until it goes where it belongs\n    var hit, pos;\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var result = {\n            success: (hit) || true,\n            response: \"success = hit - t, or miss - f\"\n        };\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n            \"https://sandbox.adlnet.gov/context/extensions/position/\": pos || \"this is where the position goes\",\n            \"https://sandbox.adlnet.gov/context/extensions/target/\": this.targetID || \"this is where the targetID goes\",\n            \"https://sandbox.adlnet.gov/context/extensions/objectHit/\": pos || \"broadside of barn\",\n            \"https://sandbox.adlnet.gov/context/extensions/userControlled/\": this.isUserControlled,\n            \"https://sandbox.adlnet.gov/context/extensions/shipstatus/\": this.Scene.children_by_name['DDG51'].engine || 'status error',\n        };\n        sender.xAPISend('fired', 'shell', this.DisplayName || \"TAO 5 Inch Gun\", result, conExt, null);\n    }","parameters":[]},"sendMissileHit":{"body":"console.log(\"send Missile Hit\");\n    //vars to make it work outside of where it belongs\n    var obstacle;\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var result = {\n            success: true, //hit = t, miss = f\n            // response: \"You betchya\"\n        };\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.target_data,\n            \"https://sandbox.adlnet.gov/context/extensions/objectHit\": \"obstacle\", //(obstacle.id + obstacle.DisplayName) || \"obstacle\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": \"Missile#2\", //(this.id + this.DisplayName) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/position\": this.worldTransform.slice(),\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"hit\", 'What the missile hit' /*obstacle.DisplayName*/ , (this.DisplayName + this.ID), result, conExt, ADL.ruuid() /*this.stmtId*/ );\n    }","parameters":[]},"sendMissileLaunch":{"body":"console.log(\"send Missile Launch\");\n    //vars to make it work outside of where it belongs\n    var obstacle, pos;\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        var missId = ADL.ruuid();\n        // def.stmtId = missId; //make sure to include this once added to fac and seahawk\n        var conExt = {\n            \"https://sandbox.adlnet.gov/context/extensions/target\": this.target_data || \"no target\",\n            \"https://sandbox.adlnet.gov/context/extensions/missileId\": \"Missile#2\", //(this.id + this.DisplayName) || \"Missile#2\",\n            \"https://sandbox.adlnet.gov/context/extensions/firePosition\": pos || \"this is where the missile began\",\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": Math.floor(this.Scene.time * 1000) / 1000,\n        };\n        sender.xAPISend(\"launched\", (this.DisplayName + this.ID) /*missile.DisplayName*/ , 'Seahawk or FAC', null, conExt, missId);\n    }","parameters":[]},"senderSnippet":{"body":"/*Generic code for sending xAPI statements from demo*/\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"verb\", \"object\", \"role\",\n                        null /*optional - see result object*/,\n                        null /*optional - see context.extesions object*/ );\n    }\n\n    /*\n    result object - object to be appended as result\n    {\n     \"score\": { \"scaled\": float, \"raw\": int, \"min\": int, \"max\": int },\n     \"success\": boolean,\n     \"completion\": boolean,\n     \"response\": string,\n     \"duration\": ISO 8601 duration\n     \"extensions\": { \"key must be valid URI\": value (any JSON type)}\n    }\n    */\n    \n    /*\n    conExt - object to be appended to context.extensions\n    {\n     \"key must be valid URI\": value (any JSON type),\n     include:\n       \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": this.Scene.time,\n    }\n    */","parameters":[]},"xAPISend":{"body":"//xAPISend in the xAPISender entity\n    //Sends an xAPI sttement for tracking in an lrs\n    // \n    //Accepts:\n    //verbage - verb / action - string\n    //obj - xapi object, can be a string or an object\n    //role - role assumed in the simulation - string\n    //res - object to be added as result - object\n    // {\n    //  \"score\": { \"scaled\": float, \"raw\": int, \"min\": int, \"max\": int },\n    //  \"success\": boolean,\n    //  \"completion\": boolean,\n    //  \"response\": string,\n    //  \"duration\": ISO 8601 duration\n    //  \"extensions\": { \"key must be valid URI\": value (any JSON type) }\n    // }\n    //conExt - object to be appended to context.extensions\n    // { \"key must be valid URI\": value (any JSON type),\n    //   include:\n    //     \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": this.Scene.time,\n    // }\n    //stmtId - ruuid for tracking multiple related statements\n    // in this case used with missile - launch and hit\n    // \n    //Returns:\n    //contructs and sends an xapi statement to an lrs\n\n    // console.log(role + \" xAPI Send\");\n\n    //1 - Registration for the run of this game\n    if (!this.Scene.attempt)\n    {\n        this.Scene.attempt = ADL.ruuid();\n    }\n\n    //2 - Wrapper setup\n    var conf = {\n        \"endpoint\": \"https://lrs.adlnet.gov/xapi/\",\n        \"auth\": \"Basic \" + toBase64('iitsecDemo:1234'),\n    };\n    this.Scene.___xAPI.configure(conf);\n\n    //3 - Who is playing\n    var actor = {\n        account:\n        {\n            name: _UserManager.GetCurrentUserName(),\n            homePage: this.baseURL, //\"https://sandbox.adlnet.gov/\",\n        },\n        name: _UserManager.GetCurrentUserName(),\n    };\n\n    //4 - Verb = did\n    var v = encodeURI(verbage);\n    var verb = {\n        id: this.baseURL + \"verbs/\" + v,\n        display:\n        {\n            \"en-US\": v || \"default\",\n        }\n    };\n\n    //5 - Object - to whom - What happened and where\n    var object;\n    if (verbage === 'started')\n    {\n        //if this is the start of the demo we give a special object\n        obj = window.location.toString() + \"attempt/\" + this.Scene.attempt;\n        object = {\n            id: obj,\n            definition:\n            {\n                name:\n                {\n                    \"en-US\": encodeURI(this.Scene.attempt)\n                },\n                description:\n                {\n                    \"en-US\": _DataManager.getInstanceData().title\n                }\n            }\n        };\n    }\n    else //otherwise we proceed to put together a typical object\n    {\n        //if they give us an object, send it on\n        if (obj && typeof obj === 'object')\n        {\n            object = obj;\n        }\n        //otherwise attach the string like so, and . . . \n        else\n        {\n            object = {\n                id: this.baseURL + \"objects/\" + (encodeURI(obj) || \"object\"),\n                definition:\n                {\n                    name:\n                    {\n                        \"en-US\": encodeURI(obj)\n                    }\n                }\n            };\n        }\n    }\n\n    //6 - Additional context\n    var contextActivities = {\n        \"category\": [\n            {\n                \"id\": this.baseURL + \"event/2015/iitsecdemo\"\n            },\n            {\n                \"id\": this.baseURL + \"role/\" + (encodeURI(role) || \"default\")\n            },\n        ],\n        \"grouping\": [\n            {\n                \"id\": window.location.toString(),\n            },\n            {\n                \"id\": window.location.toString() + \"attempt/\" + this.Scene.attempt\n            },\n        ],\n        \"other\": [\n            {\n                \"id\": _DataManager.getCurrentApplication(),\n                definition:\n                {\n                    type: this.baseURL + \"world\"\n                }\n            }\n        ],\n    };\n\n    //8 - Roll it all into one statement\n    var stmt = new ADL.XAPIStatement(actor, verb, object);\n\n    stmt.addParentActivity(new ADL.XAPIStatement.Activity(window.location.toString(), _DataManager.getInstanceData().title, _DataManager.getInstanceData.description, this.Scene.attempt));\n    stmt.context.contextActivities = contextActivities;\n\n    if (conExt) //6.5 - add context.extesions\n    {\n        stmt.context.extensions = conExt;\n    }\n    else\n    {\n        stmt.context.extensions = {\n            \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": this.Scene.time,\n        };\n    }\n\n    if (res) stmt.result = res; //7 - add a result\n    stmt.timestamp = new Date().toISOString();\n\n    if (stmtId) //6.75 Statment ID for tracking projectiles\n    {\n        stmt.context.statement = {\n            objectType: \"StatementRef\",\n            id: stmtId\n        }\n    }\n    // console.log(JSON.stringify(stmt, null, 4));\n\n    this.Scene.___xAPI.sendStatement(null, stmt);","parameters":["verbage","obj","role","res","conExt","stmtId"]}},"properties":{"DisplayName":"xAPISender","EditorData":{"baseURL":{"displayname":"Base URL","property":"baseURL","type":"text"}},"___sourceAssetTimestamp":"Thu Nov 05 2015 13:58:49 GMT-0500 (Eastern Standard Time)","baseURL":"https://sandbox.adlnet.gov/","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","sourceAssetId":"6acb0557","stmtId":"","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0.4879350066185,0.498196005821228,0.0177439991384745,1],"worldTransform":[1,0,0,0,0,1,0,0,0,0,1,0,0.4879350066185,0.498196005821228,0.0177439991384745,1]},"random":{"c":1,"s0":0.293525,"s1":0.88333,"s2":0.402575},"sequence":0,"name":"Nfdbe8e7"},{"DisplayName":null,"glyphURL":"../vwf/view/editorview/images/icons/scene.png","simTime":0,"placemarks":{"Origin":[0,0,0]},"navmode":"none","sunColor":[1,0.945098,0.6],"sunDirection":[1.55,-0.2,1],"sunIntensity":1.3,"shadowDarkness":0.65,"ambientColor":[0.35,0.35,0.35],"additionalUrlAsset":"None","additionalUrlAssetsList":["/sas/assets/0740300c","/sas/assets/5bc62bd9","/sas/assets/1872b62f","/sas/assets/b318ad31","/sas/assets/b7747e55","/sas/assets/744f77e3","/sas/assets/a31ba113","/sas/assets/eaa55fce","checker.jpg","/sas/assets/51c1a77e","white.png","/sas/assets/26a3ceb7","/sas/assets/7a725720","/sas/assets/29377d3a","./contentlibraries/environments/assets/dirt.jpg","./contentlibraries/environments/assets/waternormal.jpg","./vwfDataManager.svc/texture?UID=checker.jpg","textures/grid2.gif","./checker.jpg","./ocean/oNormal.jpeg","./ocean/diffuse.jpg","../vwfDataManager.svc/texture?UID=waternormal.jpg","/sas/assets/96493a7c","../vwfDataManager.svc/texture?UID=smoke.png","../vwfDataManager.svc/texture?UID=water.png","/sas/assets/f110f46d","/sas/assets/58f95c66","/sas/assets/7e6084c4","/sas/assets/b29f970c","../vwfDataManager.svc/texture?UID=fire.png","../vwfDataManager.svc/texture?UID=explode_5.jpg","/sas/assets/90749a39","/sas/assets/aee0d5c6","/sas/assets/f1e2e0c1","/sas/assets/e40d4b80","/sas/assets/c46fb970","/sas/assets/50af929c","/sas/assets/c253157d","/sas/assets/dc81768a","/sas/assets/c253157d","/sas/assets/36481324","/sas/assets/52144a97","/sas/assets/bc13daa3","/sas/assets/bdd66107","/sas/assets/52144a97","/sas/assets/994ee0c8","/sas/assets/52144a97","/sas/assets/994ee0c8","/sas/assets/52144a97","/sas/assets/bc13daa3","/sas/assets/994ee0c8","/sas/assets/bdd66107","/sas/assets/bc13daa3","/sas/assets/ee04dc80"],"fogColor":[0.870588,0.764705,0.686274],"fogNear":0,"fogFar":50,"fogType":"exp","fogDensity":0.0003,"fogVFalloff":5.515,"fogVFalloffStart":-1.7,"skyColorBlend":0.18,"skyFogBlend":0.55,"skyApexColor":[0.305882,0.603921,0.949019],"skyHorizonColor":[1,0.921568,0.749019],"___physics_gravity":[0,0,-9.8],"___physics_accuracy":10,"___physics_active":true,"vAtmosphereDensity":0.0005,"playMode":"paused","octreeObjects":5,"octreeDepth":10,"octreeExtents":7940,"materialDef":{"alpha":1,"ambient":{"b":0.8,"g":0.8,"r":0.8},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"combine":0,"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0.11,"offsety":0.11,"rot":0,"scalex":10,"scaley":10,"src":"./contentlibraries/environments/assets/dirt.jpg"},{"alpha":0.27,"blendMode":0,"mapInput":0,"mapTo":"4","offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"./contentlibraries/environments/assets/waternormal.jpg"}],"metal":false,"reflect":0,"shadeless":false,"shading":true,"shadow":true,"shininess":4,"side":2,"specularColor":{"b":0,"g":0.65098,"r":1},"specularLevel":0.305,"type":"phong","vertexColors":false,"wireframe":false},"skyTexture":"cloudy_noon","owner":"ADLteam","type":"scene","___clientAPI":true,"skyAtmosphereDensity":1}]