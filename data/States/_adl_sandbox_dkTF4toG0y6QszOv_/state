[{"children":{"N4cfbf547":{"extends":"SandboxParticleSystem.vwf","properties":{"DisplayName":"ParticleSystem1","___assetServerOriginalID":"N4cfbf547","additive":true,"counter":0,"depthTest":false,"image":"../vwfDataManager.svc/texture?UID=fire.png","maxLifeTime":23,"maxOrientation":19.6,"maxRate":5,"maxVelocity":[1,0,0.2],"minLifeTime":23,"minOrientation":-21.4,"minVelocity":[-1,0,0.011],"owner":"Rob","particleCount":100,"solver":"AnalyticShader","startSize":0.3,"transform":[1,0,0,0,0,-1,0,0,0,-0.000001,-1,0,-6.78589867630919e-9,2.58738255126678e-9,0.499998783646291,1],"type":"ParticleSystem","velocityMode":"spherical","visible":true},"random":{"c":1,"s0":0.956842,"s1":0.666903,"s2":0.367152},"sequence":0,"name":"N4cfbf547"}},"events":{"pointerClick":{"body":"\n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n \n                              this.fired = true;                                ","parameters":["                                                             eventData","                                                             nodeData                                                             "]}},"extends":"cylinder2.vwf","methods":{"collision":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                                                 // The body has collided with another body. The ID of the node is param 1, collision data in param 2\n                                                                  if (this.counter > 10 && this.counter < 270)\n                                                                  {\n                                                                      this.explode();\n                                                                      console.log(hit);\n                                                                      vwf.deleteNode(this.id);\n                                                                      return;\n                                                                  }   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":["obstacle","data"]},"explode":{"body":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                                               var def = this.explosionDef;\n                                                                  var pos = this.transformAPI.getWorldPosition();\n\n                                                                  def.properties.transform[12] = pos[0];\n                                                                  def.properties.transform[13] = pos[1];\n                                                                  def.properties.transform[14] = pos[2];\n                                                                  var now = performance.now();\n                                                                  // console.profile(\"launch\");\n                                                                  vwf.createChild(vwf.application(), GUID(), _DataManager.getCleanNodePrototype(def), null, function(childID)\n                                                                  {\n                                                                      vwf.callMethod(childID, 'explode');\n                                                                  }); \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","parameters":[]},"tick":{"body":"\n\n\n\n\n\n\n\n\n         if (!this.fired)\n                return;\n            // The tick function is called 20 times every second.\n            // Write code here to animate over time\n\n            if (this.counter < 2)\n            {\n                //this.physicsAPI.addTorque([this.random() * 200, this.random() * 200, this.random() * 1]);\n            }\n            if (this.counter < 30)\n            {\n                var force = this.transformAPI.localToGlobal(0, 0, -30 * this.physicsAPI.getMass());\n                this.physicsAPI.addForceAtCenter(force);\n                this.children_by_name.ParticleSystem1.visible = true;\n                // this.physicsAPI.addTorque([this.random() * 10, this.random() * 10, this.random() * 1]);\n\n            }\n\n            var localUp = this.transformAPI.localToGlobalRotation(0, 0, 1);\n            var localSide = MATH.crossVec3(localUp, [0, 0, 1]);\n            var angle = MATH.dotVec3(localUp, [0, 0, 1]);\n            angle += 0;\n            if (this.counter > 0)\n            {\n                if (angle < 0)\n                {\n                    this.transformAPI.rotateAroundAxis(-10 * angle, localSide, this.transformAPI.COORDINATES.GLOBAL);\n                }\n                else\n                {\n                    this.transformAPI.rotateAroundAxis(10 * angle, localSide, this.transformAPI.COORDINATES.GLOBAL);\n                }\n            }\n\n            if (this.counter > 10 && this.counter < 270)\n            {\n\n                var offset = this.transformAPI.localToGlobalRotation(0, 0, 1);\n                var center = this.transformAPI.getPosition();\n                var hit = this.Scene.traceAPI.rayCast(center, offset,\n                {\n                    ignore: [findviewnode(this.id)]\n                });\n                if (hit && hit.distance < 2)\n                {\n                    this.explode();\n                    console.log(hit);\n                    vwf.deleteNode(this.id);\n                    return;\n                }\n            }\n            // if (this.counter > 60)\n            //        this.children_by_name.ParticleSystem1.visible = false;\n            this.counter++;\n\n            var vel = this.physicsAPI.getLinearVelocity();\n            vel = this.transformAPI.globalToLocalRotation(vel);\n            vel[0] = 0;\n            vel[1] = 0;\n            vel = this.transformAPI.localToGlobalRotation(vel);\n            this.physicsAPI.setLinearVelocity(vel);\n\n            if (this.counter > 270)\n                vwf.deleteNode(this.id); \n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"Missile","___physics_activation_state":1,"___physics_angular_velocity":[0,0,0],"___physics_constant_force":[0,0,980],"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[0,0,0],"___physics_mass":100,"___physics_velocity_angular":[-7.500029640759286e-41,-1.9139733165873017e-39,4.259989370501374e-40],"___physics_velocity_linear":[-1.5642577409744263,-39.49485397338867,5.483794689178467],"counter":28,"explosionDef":{"continues":"/sas/assets/d3402bc3","properties":{"fuse":1,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"fired":true,"height":1.6,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","radius":0.05,"sourceAssetId":"73e8a4a3","transform":[-0.9990593791007996,0.043322641402482986,-0.0005332147120498121,0,0.018682844936847687,0.44188210368156433,0.8968794345855713,0,0.039090778678655624,0.8960252404212952,-0.4422755539417267,0,-1.3839704990386963,-27.88038444519043,6.413534641265869,1],"type":"Primitive","worldTransform":[-0.9990593791007996,0.043322641402482986,-0.0005332147120498121,0,0.018682844936847687,0.44188210368156433,0.8968794345855713,0,0.039090778678655624,0.8960252404212952,-0.4422755539417267,0,-1.3839704990386963,-27.88038444519043,6.413534641265869,1]},"random":{"c":302051,"s0":0.253239535493776,"s1":0.087662999285385,"s2":0.0916767625603825},"sequence":0,"source":"vwf/model/threejs/cylinder.js","type":"subDriver/threejs","name":"N9a3e4c9e"},{"extends":"SandboxParticleSystem.vwf","methods":{"tick":{"body":"\n\n\n\n\n\n\n\n\n\n\n           // The tick function is called 20 times every second.\n              // Write code here to animate over time\n              try\n              {\n                  this.emitterPosition = this.Scene.findNodeByID(this.targetEntity).transformAPI.getWorldPosition();\n                  findviewnode(this.id).children[0].children[0].frustumCulled = false\n              }\n              catch (e)\n              {} \n\n\n\n\n\n","parameters":[]}},"properties":{"DisplayName":"Smoke","alphaTest":0,"colorRange":[0,0,0,0],"damping":-0.01,"depthTest":false,"emitterPosition":[-1.3057576417923,-25.9056415557861,6.13934469223022],"emitterSize":[1,1,0.4],"emitterType":"box","endAlpha":0,"endColor":[0.0431372549019608,0.0470588235294118,0.0509803921568627,0],"endSize":3,"gravity":-0.02,"image":"../vwfDataManager.svc/texture?UID=smoke.png","mamSpin":2.6,"maxLifeTime":81,"maxOrientation":19.6,"maxRate":0.5,"maxVelocity":[0.01,0.01,0.01],"minLifeTime":81,"minOrientation":-14.8,"minSpin":-3.8,"minVelocity":[-0.011,0.0141,-0.01],"owner":"ADLteam","renderDepth":-3,"rotation":{"_order":"XYZ","_x":0,"_y":0,"_z":0},"sizeRange":0.62,"solver":"Analytic","sourceAssetId":"aeb3d1dd","startAlpha":0.53,"startColor":[0.47843137254902,0.47843137254902,0.47843137254902,0.53],"targetEntity":"cylinder2-vwf-N9a3e4c9e","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem","visible":true},"random":{"c":1,"s0":0.337756,"s1":0.105646,"s2":0.018279},"sequence":0,"name":"Nea6ef6ef"},{"DisplayName":null,"glyphURL":"../vwf/view/editorview/images/icons/scene.png","simTime":28,"placemarks":{"Origin":[0,0,0]},"navmode":"none","sunColor":[1,1,1],"sunDirection":[0,0,1],"sunIntensity":0.5,"shadowDarkness":0.5,"ambientColor":[0.35,0.35,0.35],"fogColor":[155,155,155],"fogNear":100,"fogFar":1000,"fogType":0,"fogDensity":0.005,"fogVFalloff":1.3,"fogVFalloffStart":0,"skyColorBlend":1,"skyFogBlend":0,"skyApexColor":[0.9,0.9,0.9],"skyHorizonColor":[0.8,0.8,0.8],"___physics_gravity":[0,0,-9.8],"___physics_accuracy":10,"___physics_active":true,"vAtmosphereDensity":0.0005,"playMode":"stop","octreeObjects":5,"octreeDepth":16,"octreeExtents":640,"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":0.8,"g":0.8,"b":0.8},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"wireframe":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0.11,"offsety":0.11,"rot":0,"scalex":27.77777777777778,"scaley":27.77777777777778,"src":"textures/grid2.gif"}],"type":"phong","metal":false,"combine":0,"depthtest":true,"depthwrite":true},"skyTexture":"white","owner":"ADLteam","type":"scene","publishSettings":{"allowAnonymous":false,"allowTools":false,"camera":"","createAvatar":false,"singlePlayer":false}}]