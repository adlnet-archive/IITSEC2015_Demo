[{"children":{"-sas-assets-895ba941-N215a17d9Naa7829c8":{"children":{"-sas-assets-895ba941-N215a17d9N67ae5f4f":{"children":{"-sas-assets-895ba941-N215a17d9Ne6302cad":{"children":{"-sas-assets-895ba941-N215a17d9N1f45830d":{"properties":{"counter":-177},"name":"-sas-assets-895ba941-N215a17d9N1f45830d"}},"properties":{"transform":[0.010000278241932392,0.8183329105377197,-0.5729156136512756,0,-0.014281878247857094,0.5730028748512268,0.8182082772254944,0,0.9998477101325989,0,0.017452405765652657,0,0,0,2,1]},"name":"-sas-assets-895ba941-N215a17d9Ne6302cad"}},"name":"-sas-assets-895ba941-N215a17d9N67ae5f4f"},"-sas-assets-895ba941-N215a17d9Nbfaae356":{"children":{"-sas-assets-895ba941-N215a17d9N3766c21c":{"properties":{"text":13},"name":"-sas-assets-895ba941-N215a17d9N3766c21c"},"-sas-assets-895ba941-N215a17d9Nc2f33b2e":{"properties":{"text":30},"name":"-sas-assets-895ba941-N215a17d9Nc2f33b2e"}},"properties":{"transform":[1.443289826133585e-15,0.9999999403953552,1.9885579405354292e-8,0,9.80333414446477e-9,-1.988558118171113e-8,1,0,1.0000001192092896,-1.1657342817355328e-15,-9.80333503264319e-9,0,0.49999940395355225,-7.284906473614683e-7,-2.0000009536743164,1]},"name":"-sas-assets-895ba941-N215a17d9Nbfaae356"}},"properties":{"transform":[0.06612388044595718,0,0.997810959815979,0,0,1,0,0,-0.997810959815979,0,0.06612388044595718,0,0.000001270351617677079,7.493730436181067e-7,0.7499987483024597,1]},"name":"-sas-assets-895ba941-N215a17d9Naa7829c8"}},"continues":"/sas/assets/895ba941","properties":{"Ammo":7,"firecounter":-207,"fuse":13,"keysDown":[null],"lastx":0.637368421052632,"lasty":0.394778084252758,"targetID":"sphere2-vwf-N2099e23a","transform":[0.5664815306663513,-0.8240751028060913,0,0,0.8240751028060913,0.5664815306663513,0,0,0,0,1,0,2.1170430183410645,-0.03522934019565582,0.01774579845368862,1]},"random":{"c":66767,"s0":0.696812354493886,"s1":0.308008618187159,"s2":0.116397246718407},"name":"N215a17d9"},{"children":{"Nadbd8615":{"extends":"box2.vwf","properties":{"DisplayName":"box1","___assetServerOriginalID":"N24419d25","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":5.32,"height":3.08,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":2,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,0,0,1,0,-0.4254188537597656,1.528019905090332,-0.07871947437524796,1],"type":"Primitive","width":5.17},"random":{"c":1,"s0":0.89972501876764,"s1":0.56976643903181,"s2":0.917827875819057},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Nadbd8615"},"Nd5e1b1a5":{"children":{"Nf9aafaaf":{"children":{"N70c6ca3e":{"children":{"N311e89c1":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"Seahawk engage\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"AheadHalf","___assetServerOriginalID":"Na82188bf","height":32,"left":0,"owner":"ADLteam","text":"SeaHawk Engage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,0,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"N311e89c1"},"N471f474":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"5 inch disengage\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"RudderRightButton2","___assetServerOriginalID":"N2a53749","height":32,"left":0,"owner":"ADLteam","text":"5 in. Disengage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,75,50,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"N471f474"},"N7081b8cd":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"Seahawk warn\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"RudderLeftButton","___assetServerOriginalID":"N7710970d","height":32,"left":0,"owner":"ADLteam","text":"SeaHawk Warn","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"N7081b8cd"},"N9509b2b5":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"5 inch engage\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"RudderRightButton2","___assetServerOriginalID":"N4e75770","height":32,"left":0,"owner":"ADLteam","text":"5 in. Engage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50,50,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"N9509b2b5"},"Nc3107420":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"SCAT disengage\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"BackFullButton","___assetServerOriginalID":"N2303df4b","height":32,"left":0,"owner":"ADLteam","text":"SCAT Disengage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,75,0,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"Nc3107420"},"Ndb6a637e":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"SCAT engage\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"EngineIdleButton","___assetServerOriginalID":"N7ddb3388","height":32,"left":0,"owner":"ADLteam","text":"SCAT Engage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50,0,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"Ndb6a637e"},"Ndba2c7a8":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"Seahawk disengage\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"AheadFullButton","___assetServerOriginalID":"N1dafb262","height":32,"left":0,"owner":"ADLteam","text":"SeaHawk Disengage","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,50,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"Ndba2c7a8"},"Nf69cd5f5":{"events":{"pointerClick":{"body":"  this.broadcast(\"command\", [\"Radio Warn\"], 0);","parameters":["  eventData","  nodeData  "]}},"extends":"http://vwf.example.com/button.vwf","properties":{"DisplayName":"RudderIdleButton","___assetServerOriginalID":"N92abf93c","height":32,"left":0,"owner":"ADLteam","text":"Radio Warn","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,50,0,1],"visible":true,"width":100},"random":{"c":1,"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693},"sequence":0,"name":"Nf69cd5f5"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"Panel2","___assetServerOriginalID":"N587c140e","background_color":[0.509803921568627,0.494117647058824,0.494117647058824],"background_visible":true,"border_color":[1,1,1],"border_radius":16,"height":91,"left":0,"owner":"ADLteam","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,4.14300012588501,8,0,1],"visible":true,"width":487},"random":{"c":1,"s0":0.812594716902822,"s1":0.157300377963111,"s2":0.709430967690423},"sequence":0,"name":"N70c6ca3e"}},"extends":"http://vwf.example.com/panel.vwf","properties":{"DisplayName":"ControlPanel","EditorData":{},"___assetServerOriginalID":"N8a5ca10c","background_color":[0.56078431372549,0.549019607843137,0.549019607843137],"background_visible":true,"border_color":[1,1,1],"border_radius":6,"border_width":1,"height":109,"left":0,"owner":"ADLteam","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1.8125,2.32691287994385,0,1],"visible":true,"visibleToCamera":null,"width":531},"random":{"c":1,"s0":0.92649619281292,"s1":0.428400575416163,"s2":0.644341029459611},"sequence":0,"name":"Nf9aafaaf"}},"extends":"SandboxCamera.vwf","properties":{"DisplayName":"TAO","___assetServerOriginalID":"Na138c25e","owner":"ADLteam","sourceAssetId":"13a0f08e","transform":[-0.9999650120735168,0.008154707960784435,0.001855730079114437,0,-0.008363192901015282,-0.9750370383262634,-0.22188477218151093,0,0,-0.22189253568649292,0.975071132183075,0,-0.17541885375976562,3.028019905090332,0.6712805032730103,1]},"random":{"c":1,"s0":0.252087571425363,"s1":0.732919854577631,"s2":0.607417270774022},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"Nd5e1b1a5"}},"extends":"sandboxGroup.vwf","properties":{"DisplayName":"CICModel","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"open":true,"owner":"ADLteam","showGlyph":false,"sourceAssetId":"61c77daf","transform":[1,0,0,0,0,1,0,0,0,0,1,0,17.786998748779297,-17.11833381652832,0.014999999664723873,1],"type":"Group"},"random":{"c":1,"s0":0.340581656666473,"s1":0.179447925183922,"s2":0.356423601740971},"sequence":0,"name":"N343365f5"},{"extends":"sphere2.vwf","methods":{"hit":{"body":"                                                                                                     this.parent.children.delete(this);                                                                                                     ","parameters":[]},"tick":{"body":"                                       // The tick function is called 20 times every second.\n    // Write code here to animate over time\n\n    this.transformAPI.move(1.8, 0, 0, this.transformAPI.COORDINATES.LOCAL);                                       ","parameters":[]}},"properties":{"DisplayName":"sphere3","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"activeState":"active","hostile":true,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.46782827377319336,0.8838194012641907,0,0,-0.8838194012641907,0.46782827377319336,0,0,0,0,1,0,-194,-459.25,5.75,1],"type":"Primitive"},"random":{"c":1,"s0":0.84529956500046,"s1":0.366396581055596,"s2":0.683664361946285},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"N34c48328"},{"children":{"N476ecaaf":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","___assetServerOriginalID":"N8cf5a8e2","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.999999974752427e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"LOCAL":"local","GLOBAL":"global","PARENT":"parent"}},"worldTransform":[0.18804042041301727,-0.9821426272392273,0.006052142009139061,0,0.98142409324646,0.18813441693782806,0.03757866099476814,0,-0.03804640844464302,-0.0011256071738898754,0.9992753267288208,0,4.332369804382324,-20.394678115844727,-0.7163000702857971,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"N476ecaaf"},"N4d85c93":{"extends":"box2.vwf","properties":{"DisplayName":"box7","___assetServerOriginalID":"N83e3ec00","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":1.13,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong"},"owner":"ADLteam","renderDepth":7,"transform":[1,0,9.999999974752427e-7,0,0,1,0,0,0,0,1,0,1,0,-0.2499990016222,1],"type":"Primitive","width":2.18},"random":{"c":1,"s0":0.198099663946778,"s1":0.0275812551844865,"s2":0.352169041289017},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N4d85c93"},"N72c82269":{"extends":"asset.vwf","properties":{"DisplayName":"./vwfdatamanager.svc/DataFile/Navy/AttackSpeedBoat.dae1","___assetServerOriginalID":"N958e2662","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"reflect":0.001,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong"},"owner":"ADLteam","transform":[-9.999999974752427e-7,1,-9.999999974752427e-7,0,-1.0000009536743164,-9.999999974752427e-7,-9.999999974752427e-7,0,-9.999999974752427e-7,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.375302,"s1":0.872168,"s2":0.110384},"sequence":0,"source":"/sas/assets/c1064312","type":"subDriver/threejs/asset/vnd.collada+xml","name":"N72c82269"},"Nfa7f7609":{"events":{"pointerClick":{"body":"                                         this.parent.launchMissile()","parameters":["                                         eventData","                                         nodeData                                         "]}},"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___assetServerOriginalID":"N8c4837dd","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"ADLteam","transform":[0.08618500083684921,-0.022557999938726425,0.9960219860076904,0,0.0010019999463111162,-0.9997419714927673,-0.02273000031709671,0,0.9962769746780396,0.002956999931484461,-0.08614099770784378,0,1,0,1.5,1],"type":"Primitive","visible":false,"width":1.36},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Nfa7f7609"}},"extends":"box2.vwf","methods":{"_keyDown":{"body":"    if(!this.verifyCamera()) return;\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }    ","parameters":["e","d"]},"_keyUp":{"body":"    if(!this.verifyCamera()) return;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if (e.key.char == \" \")\n    {\n        this.launchMissile();\n    }    ","parameters":["e","d"]},"hit":{"body":"       var pos = args[0];\n    var force = args[1];\n    if (typeof force == 'number')\n        this.health -= force;\n    else\n        this.health -= 101;\n\n    if (this.health < 0)\n    {\n        var def = this.explosionDef.internal_val;\n        var pos = this.transformAPI.getWorldPosition();\n        def.properties.transform[12] = pos[0];\n        def.properties.transform[13] = pos[1];\n        def.properties.transform[14] = pos[2];\n        def.properties.fuse = 1;\n        vwf.createChild(vwf.application(), GUID(), _DataManager.getCleanNodePrototype(def), null);\n        this.parent.children.delete(this);\n    }       ","parameters":["args"]},"launchMissile":{"body":"            var def = this.missileDef.internal_val;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.internal_val.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n    vwf.createChild(vwf.application(), GUID(), _DataManager.getCleanNodePrototype(def), null, function()\n    {\n        console.log(performance.now() - now);\n        //   console.profileEnd(\"launch\");\n    });\n    this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);            ","parameters":[]},"ready":{"body":"                                                  // The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\",this._kd);\n    this.Scene.unbind(\"keyUp\",this._ku);\n    var self = this;\n    this._kd = function(e,d){self._keyDown(e,d)};\n    this._ku = function(e,d){self._keyUp(e,d)};\n    this.Scene.bind(\"keyDown\",this._kd);\n    this.Scene.bind(\"keyUp\",this._ku);                                                  ","parameters":[]},"tick":{"body":"                                                 var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }\n\n    if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n        this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n        this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0])/3);\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n\n        this.physicsAPI.addTorque(0, 0, speedTorqueFactor * mass * 3);\n        var force = this.transformAPI.localToGlobal(speedTorqueFactor * mass, 0, 0);\n        this.physicsAPI.addTorque(force);\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n        this.physicsAPI.addTorque(0, 0, -speedTorqueFactor * mass * 3);\n        var force = this.transformAPI.localToGlobal(-speedTorqueFactor * mass, 0, 0);\n        this.physicsAPI.addTorque(force);\n    }                                                 ","parameters":[]},"verifyCamera":{"body":"   var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.controllingCamera) return false;\n    return true;   ","parameters":[]}},"properties":{"DisplayName":"FAC_MASTER","EditorData":{"controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"}},"___physics_activation_state":4,"___physics_angular_velocity":[-0.0205620388669852,0.137373529226051,0.000692897715996474],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.115731220145219,0.602527779520543,-0.000487978426872444],"___physics_mass":8051.2,"___physics_velocity_angular":[0.02765009179711342,-0.1445750892162323,0.00038580354885198176],"___physics_velocity_linear":[-0.01912243291735649,0.10449027270078659,-0.0032515337225049734],"_keysDown":[],"_length":7,"activeState":"active","controllingCamera":"SandboxCamera-vwf-N373ec60b","counter":14602,"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"./vwfdatamanager.svc/datafile/vwf/fragmentRound.vwf.json","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"health":100,"height":1.2,"hostile":true,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","side":0,"blendMode":1,"fog":true,"shading":true,"metal":false,"wireframe":false,"depthtest":true,"depthwrite":true,"vertexColors":false},"missileDef":{"continues":"./vwfdatamanager.svc/datafile/vwf/missile.vwf.json","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"owner":"ADLteam","physicsAPI":{},"sourceAssetId":"1ad6adad","transform":[0.18804042041301727,-0.9821426272392273,0.006052142009139061,0,0.98142409324646,0.18813441693782806,0.03757866099476814,0,-0.0380462221801281,-0.0011265893699601293,0.9992753267288208,0,3.739713668823242,-17.449094772338867,0.014999999664723873,1],"type":"Primitive","visible":false,"width":2.5},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N864a13b2"},{"extends":"sphere2.vwf","methods":{"hit":{"body":"                                                                                                           this.parent.children.delete(this);                                                                                                           ","parameters":[]},"tick":{"body":"                 // The tick function is called 20 times every second.\n    // Write code here to animate over time\n\n    this.transformAPI.move(.8, 0, 0, this.transformAPI.COORDINATES.LOCAL);                 ","parameters":[]}},"properties":{"DisplayName":"sphere5","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"activeState":"active","hostile":true,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.46782827377319336,0.8838194012641907,0,0,-0.8838194012641907,0.46782827377319336,0,0,0,0,1,0,124.75,-163,52.25,1],"type":"Primitive"},"random":{"c":1,"s0":0.84529956500046,"s1":0.366396581055596,"s2":0.683664361946285},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"Naf7ad664"},{"extends":"sphere2.vwf","methods":{"hit":{"body":"                                                                                              this.parent.children.delete(this);                                                                                              ","parameters":[]},"tick":{"body":"                                // The tick function is called 20 times every second.\n    // Write code here to animate over time\n\n    this.transformAPI.move(1.8, 0, 0, this.transformAPI.COORDINATES.LOCAL);                                ","parameters":[]}},"properties":{"DisplayName":"sphere2","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"activeState":"active","hostile":true,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.46782827377319336,0.8838194012641907,0,0,-0.8838194012641907,0.46782827377319336,0,0,0,0,1,0,-194,-352.75,204.5,1],"type":"Primitive"},"random":{"c":1,"s0":0.84529956500046,"s1":0.366396581055596,"s2":0.683664361946285},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"Nb54cbf3e"},{"children":{"N13d5c626":{"children":{"N340d2472":{"children":{"N4ab22f0":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"Label1","___assetServerOriginalID":"Nc2f33b2e","font_size":68,"height":100,"left":0,"owner":"Anonymous_wS9HWx6DN-wlBP2rAAAG","text":1000,"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3.625,15.7196969985962,0,1],"width":100},"random":{"c":1,"s0":0.136464140377939,"s1":0.743883366230875,"s2":0.724490934750065},"sequence":0,"name":"N4ab22f0"},"Nf7adbb24":{"extends":"http://vwf.example.com/label.vwf","properties":{"DisplayName":"Label2","___assetServerOriginalID":"N3766c21c","font_size":68,"height":100,"left":0,"owner":"Anonymous_wS9HWx6DN-wlBP2rAAAG","text":1000,"top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,3.625,28.787878036499,0,1],"width":100},"random":{"c":1,"s0":0.136464140377939,"s1":0.743883366230875,"s2":0.724490934750065},"sequence":0,"name":"Nf7adbb24"}},"extends":"SandboxCamera.vwf","methods":{"tick":{"body":"                            // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.fov += (this.fovGoal - this.fov) / 5;                            ","parameters":[]}},"properties":{"DisplayName":"5 inch camera","___assetServerOriginalID":"Nbfaae356","fov":60,"fovGoal":60,"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[-1.0107758380284437e-10,0.9999999403953552,1.2820014383407852e-8,0,1.2445218189327534e-8,-1.8371753895962684e-8,1,0,1.0000001192092896,9.475908946399159e-11,-1.3434772405673812e-8,0,0.7140258550643921,-0.11136921495199203,-2.436673402786255,1]},"random":{"c":1,"s0":0.881991325877607,"s1":0.977037542732432,"s2":0.315142978914082},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"N340d2472"},"Ne34e98a":{"children":{"N5635cead":{"children":{"N859bfe16":{"extends":"SandboxParticleSystem.vwf","methods":{"explode":{"body":"                     this.counter = 40;\n    this.visible = true;\n    if (this.explodeSount)\n        this.audioAPI.playSound(this.explodeSount);\n\n    vwf.callMethod(this.id, \"reset\");                     ","parameters":[]},"tick":{"body":"                            // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.counter--\n    if(this.counter < 0)\n    {\n        this.visible = false;   \n    }                            ","parameters":[]}},"properties":{"DisplayName":"ParticleSystem2","___assetServerOriginalID":"N1f45830d","additive":false,"alphaTest":1,"counter":30,"damping":0.25,"depthTest":false,"endColor":[1,1,1,0],"endSize":4,"explodeSount":"","image":"../vwfDataManager.svc/texture?UID=water.png","mamSpin":-0.8,"maxAcceleration":[0,0,0],"maxLifeTime":137,"maxOrientation":11.4,"maxRate":10,"maxVelocity":[-0.022,1,0],"minLifeTime":137,"minOrientation":-20.3,"minSpin":-2.7,"minVelocity":[0.026,0,0],"owner":"ADLteam","particleCount":100,"renderDepth":0,"solver":"Euler","startColor":[0.63921568627451,0.63921568627451,0.63921568627451,0.08],"startSize":0.76,"textureTiles":4,"transform":[0.82846599817276,0.560039639472961,-3.6560525717988e-9,0,-0.559673845767975,0.827925443649292,0.0360964685678482,0,0.0202558990567923,-0.0299645513296127,0.99934720993042,0,2.82527814476907e-8,4.75819135203892e-8,0.00000272732245321095,1],"type":"ParticleSystem","velocityMode":"cartesian","visible":false},"random":{"c":1,"s0":0.981667949585244,"s1":0.595058325445279,"s2":0.676680717850104},"sequence":0,"name":"N859bfe16"}},"extends":"sandboxGroup.vwf","methods":{"explode":{"body":"                 this.children_by_name.ParticleSystem2.explode();                 ","parameters":[]},"tick":{"body":"","parameters":[]}},"properties":{"DisplayName":"Explosion","___assetServerOriginalID":"Ne6302cad","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"explodeSound":"/sas/assets/3c6b353e","explodeSound2":"/sas/assets/d714ebe1","fuse":10000000,"open":true,"owner":"ADLteam","transform":[0.010000278241932392,0.8183329105377197,-0.5729156136512756,0,-0.014281878247857094,0.5730028748512268,0.8182082772254944,0,0.9998477101325989,0,0.017452405765652657,0,0,0,2,1],"type":"Group"},"random":{"c":1248939,"s0":0.463987119728699,"s1":0.0462946102488786,"s2":0.294398021884263},"sequence":0,"name":"N5635cead"}},"extends":"box2.vwf","properties":{"DisplayName":"Barrel","___assetServerOriginalID":"N67ae5f4f","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.23,"height":3.19,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1.5,1],"type":"Primitive","width":0.28},"random":{"c":1,"s0":0.809604124864563,"s1":0.25392062519677,"s2":0.65455412468873},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Ne34e98a"}},"extends":"box2.vwf","properties":{"DisplayName":"50CalPivot","___assetServerOriginalID":"Naa7829c8","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":0.55,"height":0.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"Anonymous_srrHyERdWKafkXchAAAA","transform":[0.02205572836101055,0,0.9997562170028687,0,0,1,0,0,-0.9997562170028687,0,0.02205572836101055,0,0.0000013468421684592613,-1.5892135252215667e-7,0.7499991655349731,1],"type":"Primitive","width":1},"random":{"c":1,"s0":0.570447616046295,"s1":0.810183898778632,"s2":0.997119625797495},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N13d5c626"}},"extends":"box2.vwf","methods":{"_keyDown":{"body":"     if (!this.verifyCamera()) return;\n    if (e.key.char == ' ') this.activateState(\"firing\");     ","parameters":["e"]},"_keyUp":{"body":"    if (!this.verifyCamera()) return;\n    if (e.key.char == ' ') this.activateState(\"idle\");\n    if (e.key.char == 'T') this.activateState(\"targeting\");    ","parameters":["e"]},"_pointerDown":{"body":"      if (!this.verifyCamera()) return;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = true;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].fovGoal = 10;\n    }      ","parameters":["e","d"]},"_pointerMove":{"body":"      if (!this.verifyCamera()) return;\n    if (!this.mouseDown) return;\n    var relx = e.position[0] - this.lastx;\n    var rely = e.position[1] - this.lasty;\n\n    this.lastx = e.position[0];\n    this.lasty = e.position[1];\n    this.transformAPI.rotateZ(-relx * 80);\n    this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(rely * 30);      ","parameters":["e","d"]},"_pointerUp":{"body":"      if (!this.verifyCamera()) return;\n    if (e.button == \"left\")\n    {\n        this.lastx = e.position[0];\n        this.lasty = e.position[1];\n        this.mouseDown = false;\n    }\n    if (e.button == \"right\")\n    {\n        this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].fovGoal = 60;\n    }      ","parameters":["e","d"]},"_pointerWheel":{"body":"      if (!this.verifyCamera()) return;\n    this.fuse += e.wheelDelta;\n    this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].children_by_name[\"Label2\"].text = this.fuse;      ","parameters":["e"]},"activateState":{"body":"    if (this.states[newState] && this.states[newState].transitions.indexOf(newState))\n    {\n        this.activeState = newState;\n        console.log(\"transition to \" + newState);\n    }\n    else\n    {\n        console.log(\"invalid transition\");\n    }    ","parameters":["newState"]},"command":{"body":"  var command = args[0];\n    if(command == \"5 inch engage\")\n      this.activateState(\"targeting\");\n    \n    if(command == \"5 inch disengage\")\n      this.activateState(\"idle\");  ","parameters":["args"]},"explode":{"body":"  var def = this.explosionDef;\n    if (def.internal_val)\n        def = def.internal_val;\n    def = JSON.parse(JSON.stringify(def));\n    def.properties.transform[12] = pos[0];\n    def.properties.transform[13] = pos[1];\n    def.properties.transform[14] = pos[2];\n    def.properties.fuse = dist / 10;\n    // console.profile(\"launch\");\n    vwf.createChild(vwf.application(), GUID(), _DataManager.getCleanNodePrototype(def), null);  ","parameters":["pos","dist"]},"fire":{"body":"  var origin = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.getWorldPosition();\n    var dir = this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].transformAPI.localToGlobalRotation([0, 0, 1]);\n    var shake = [this.random() / this.accuracy - 1 / this.accuracy, this.random() / this.accuracy - 1 / this.accuracy, this.random() / this.accuracy - 1 / this.accuracy];\n    dir = Vec3.normalize(Vec3.add(shake, dir, []), []);\n    var hit = this.Scene.traceAPI.rayCast(origin, dir,\n    {\n        ignore: [findviewnode(this.id)]\n    });\n    this.audioAPI.playSound(this.fireSound, false, 300.0);\n    var dist = this.fuse;\n    if (hit && hit.distance < dist)\n    {\n       dist = hit.distance;\n    }\n\n    var point = Vec3.add(origin, Vec3.scale(dir, dist, []), []);\n    this.explode(point, dist);\n    this.children_by_name[\"50CalPivot\"].children_by_name[\"Barrel\"].children_by_name[\"Explosion\"].explode();\n\n    var shake = [this.random() / 1 - .5, this.random() / 1 - .5, this.random() / 1 - .5]\n    this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].transformAPI.move(shake);\n    shake = [this.random() / 1 - .5, this.random() / 1 - .5, this.random() / 1 - .5]\n    this.children_by_name[\"50CalPivot\"].transformAPI.move(shake);  ","parameters":[]},"firing":{"body":"   if (this.Ammo > 0 && this.activeState == \"firing\")\n    {\n        var target = this.Scene.findNodeByID(this.targetID);\n    if (!target)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    \n        if (this.firecounter < 0)\n        {\n            this.firecounter = 30;\n            this.Ammo -= 1;\n            this.fire();\n            this.activateState(\"targeting\");\n            return;\n        }\n\n        if (this.Ammo == 0)\n        {\n            this.activeState = \"reloading\";\n            this.firecounter = 170;\n            this.playSound(this.reloadSound, false, 10);\n        }\n    }\n    this.firecounter--;   ","parameters":[]},"ready":{"body":"                  this.Scene.unbind(\"pointerMove\", this._pv);\n    this.Scene.unbind(\"pointerDown\", this._pd);\n    this.Scene.unbind(\"pointerUp\", this._pu);\n    this.Scene.unbind(\"pointerWheel\", this._pw);\n\n    this.Scene.unbind(\"keyDown\", this._kd);\n    this.Scene.unbind(\"keyUp\", this._ku);\n    var self = this;\n    this._pv = function(e, d)\n    {\n        self._pointerMove(e, d);\n    }\n    this._pd = function(e, d)\n    {\n        self._pointerDown(e, d);\n    }\n    this._pu = function(e, d)\n    {\n        self._pointerUp(e, d);\n    }\n    this._kd = function(e, d)\n    {\n        self._keyDown(e, d);\n    }\n    this._ku = function(e, d)\n    {\n        self._keyUp(e, d);\n    }\n    this._pw = function(e, d)\n    {\n        self._pointerWheel(e, d);\n    }\n    this.Scene.bind(\"pointerMove\", this._pv);\n    this.Scene.bind(\"pointerDown\", this._pd);\n    this.Scene.bind(\"pointerUp\", this._pu);\n    this.Scene.bind(\"pointerWheel\", this._pw);\n    this.Scene.bind(\"keyDown\", this._kd);\n    this.Scene.bind(\"keyUp\", this._ku);                  ","parameters":[]},"reloading":{"body":"     if (this.activeState == 'reloading')\n    {\n        this.firecounter--;\n        if (this.firecounter == 0)\n        {\n            this.Ammo = 30;\n            this.activeState = 'firing';\n        }\n\n    }     ","parameters":[]},"targeting":{"body":"  var near = Infinity;\n    var target = null;\n    var thispos = this.transformAPI.getPosition();\n\n    for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var child = this.Scene.children[i];\n        if (child.id == this.id) continue;\n        if (child.parent.id == this.id) continue;\n        var childpos = child.transformAPI.getPosition();\n        var dist = MATH.distanceVec3(thispos, childpos);\n        if (dist < near && child.hostile && child.activeState !== 'disabled')\n        {\n            near = dist;\n            target = child;\n        }\n    }\n    if (target && near < (this.maxRange || 15000))\n    {\n        this.targetID = target.id;\n        this.activateState(\"tracking\");\n    }  ","parameters":[]},"tick":{"body":"     this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].children_by_name[\"Label1\"].text = Math.floor(this.Ammo);\n\n    var pos = this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].transformAPI.getPosition();\n    var goal = [.5, 0, -2];\n    var move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);\n\n    var pos = this.children_by_name[\"50CalPivot\"].transformAPI.getPosition();\n    var goal = [.0, 0, .75];\n    var move = Vec3.subtract(goal, pos, []);\n\n    this.children_by_name[\"50CalPivot\"].transformAPI.move(move[0] / 2, move[1] / 2, move[2] / 2);\n    var state = this.states[this.activeState];\n    if(state)\n    {\n        if(state.updateFunc && this[state.updateFunc])\n            this[state.updateFunc]();\n        \n        \n        \n    }     ","parameters":[]},"tracking":{"body":" this.firecounter--;\n    if (!this.targetID)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    var target = this.Scene.findNodeByID(this.targetID);\n    if (!target)\n    {\n        this.activateState(\"targeting\");\n        return;\n    }\n    var thispos = this.transformAPI.getPosition();\n    var targetpos = target.transformAPI.getWorldPosition();\n    if (this.parent.transformAPI)\n    {\n        targetpos = this.parent.transformAPI.globalToLocal(targetpos);\n    }\n    if (!this.lastTargetPos)\n        this.lastTargetPos = targetpos;\n\n    var targetSpeed = MATH.subVec3(targetpos, this.lastTargetPos.internal_val);\n    // targetSpeed = MATH.scaleVec3(targetSpeed, 20); //now in m/s\n\n    var vec = MATH.subVec3(thispos, targetpos);\n    var dist = MATH.lengthVec3(vec);\n    vec = MATH.subVec3(thispos, MATH.addVec3(targetpos, MATH.scaleVec3(targetSpeed, (dist / 10) + 1)));\n    this.fuse = MATH.lengthVec3(vec);\n    vec = MATH.toUnitVec3(vec);\n    var targetangle = Math.atan2(vec[0], vec[1]);\n    var thisvec = this.transformAPI.localToGlobalRotation(1, 0, vec[2]);\n    thisvec = MATH.toUnitVec3(thisvec);\n    var thisangle = Math.atan2(thisvec[0], thisvec[1]);\n    var angle = targetangle - thisangle;\n\n    if (angle < -Math.PI)\n        angle *= -1;\n    else if (angle > Math.PI)\n    {\n        angle *= -1;\n    }\n    angle *= 10;\n    if (angle > 1) angle = 1;\n    if (angle < -1) angle = -1;\n    this.transformAPI.rotateZ(-angle * .7);\n\n    var upvec = this.children_by_name[\"50CalPivot\"].transformAPI.localToGlobalRotation(1, 0, 0);\n    var targetvec = MATH.subVec3(thispos, targetpos);\n    targetvec = MATH.toUnitVec3(targetvec);\n\n    var dot = MATH.dotVec3(upvec, targetvec)\n    if (dot > .01)\n    {\n        this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(Math.min(-0.2, -dot));\n    }\n    if (dot < -.01)\n    {\n        this.children_by_name[\"50CalPivot\"].transformAPI.rotateY(Math.max(0.2, -dot));\n    }\n\n    if (Math.abs(angle) < .06 && Math.abs(dot) < .02 && this.firecounter < 1)\n    {\n        this.activateState(\"firing\");\n    }\n    this.lastTargetPos = targetpos; ","parameters":[]},"verifyCamera":{"body":"      var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n    var thisCam = this.children_by_name[\"50CalPivot\"].children_by_name[\"5 inch camera\"].id;\n    if (!cam || cam.id != thisCam) return false;\n    return true;      ","parameters":[]}},"properties":{"Ammo":30,"DisplayName":"50CalBase","EditorData":{"accuracy":{"displayname":"accuracy","max":50,"min":2,"property":"accuracy","step":1,"type":"slider"}},"EditorDate":"","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":1.78,"accuracy":200,"activeState":"idle","controllingCamera":"SandboxCamera-vwf-N37c91fa8","explosionDef":{"continues":"./vwfdatamanager.svc/datafile/vwf/fragmentRound.vwf.json","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"fireSound":"/sas/assets/36481324","firecounter":0,"fuse":100,"height":1.25,"keysDown":[],"lastTargetPos":null,"lastx":0.0126315789473684,"lasty":0.486051905717151,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"mouseDown":false,"owner":"ADLteam","reloadSound":"/sas/assets/ee04dc80","sourceAssetId":"895ba941","state":"ready","states":{"engaging":{"transitions":["tracking","idle","targeting"],"updateFunc":"firing"},"firing":{"transitions":["tracking","idle","targeting"],"updateFunc":"firing"},"idle":{"transitions":["targeting","idle"],"updateFunc":null},"targeting":{"transitions":["tracking","idle","engaging"],"updateFunc":"targeting"},"tracking":{"transitions":["targeting","idle","engaging"],"updateFunc":"tracking"}},"targetID":null,"tracerDef":{"extends":"sphere2.vwf","methods":{"tick":{"body":" // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.life++;\n    if(this.life > 20)\n         vwf.deleteNode(this.id); ","parameters":[]}},"properties":{"DisplayName":"sphere1","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"isSelectable":false,"life":0,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1},"owner":"Anonymous_wpez3LO-WphZ6WWjAAAA","radius":0.2,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,-13.75,-0.25,0,1],"type":"Primitive","visible":true},"random":{"c":1,"s0":0.206418882822618,"s1":0.937666497891769,"s2":0.393718022387475},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs"},"transform":[0.045729056000709534,0.9989544749259949,0,0,-0.9989544749259949,0.045729056000709534,0,0,0,0,1,0,10.276628494262695,-9.944171905517578,0.0898917019367218,1],"type":"Primitive","width":1.31},"random":{"c":1213009,"s0":0.362921888241544,"s1":0.572814299259335,"s2":0.939833354437724},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Nbc6de302"},{"extends":"sphere2.vwf","methods":{"hit":{"body":"                                                                                                      this.parent.children.delete(this);                                                                                                      ","parameters":[]},"tick":{"body":"           // The tick function is called 20 times every second.\n    // Write code here to animate over time\n\n    this.transformAPI.move(0.8, 0, 0, this.transformAPI.COORDINATES.LOCAL);           ","parameters":[]}},"properties":{"DisplayName":"sphere13","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"activeState":"active","hostile":true,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","transform":[0.46782827377319336,0.8838194012641907,0,0,-0.8838194012641907,0.46782827377319336,0,0,0,0,1,0,20,230.25,24.25,1],"type":"Primitive"},"random":{"c":1,"s0":0.84529956500046,"s1":0.366396581055596,"s2":0.683664361946285},"sequence":0,"source":"vwf/model/threejs/sphere.js","type":"subDriver/threejs","name":"Nf3394a5a"},{"DisplayName":null,"glyphURL":"../vwf/view/editorview/images/icons/scene.png","simTime":0,"placemarks":{"Origin":[0,0,0]},"navmode":"none","sunColor":[1,1,1],"sunDirection":[0.5,0.5,1],"sunIntensity":0.8,"shadowDarkness":0.5,"ambientColor":[0.35,0.35,0.35],"fogColor":[1,1,1],"fogNear":100,"fogFar":1000,"fogType":0,"fogDensity":0.005,"fogVFalloff":1.3,"fogVFalloffStart":0,"skyColorBlend":1,"skyFogBlend":0,"skyApexColor":[0.9,0.9,0.9],"skyHorizonColor":[0.8,0.8,0.8],"___physics_gravity":[0,0,-9.8],"___physics_accuracy":10,"___physics_active":true,"vAtmosphereDensity":0.0005,"playMode":"stop","octreeObjects":5,"octreeDepth":16,"octreeExtents":640,"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":0.8,"g":0.8,"b":0.8},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"wireframe":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0.11,"offsety":0.11,"rot":0,"scalex":27.77777777777778,"scaley":27.77777777777778,"src":"textures/grid2.gif"}],"type":"phong","metal":false,"combine":0,"depthtest":true,"depthwrite":true},"skyTexture":"white","owner":"ADLteam","type":"scene"}]