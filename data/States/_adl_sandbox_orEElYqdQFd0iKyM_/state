[{"extends":"plane2.vwf","methods":{"tick":{"body":"                            // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.materialDef.layers[0].offsetx += .001                            ","parameters":[]}},"properties":{"DisplayName":"plane2","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":1000,"castShadows":false,"materialDef":{"alpha":1,"ambient":{"b":0.670588,"g":0.443137,"r":0.282352},"blendMode":1,"color":{"a":1,"b":0.670588,"g":0.443137,"r":0.282352},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":"4","offsetx":15.2249999999971,"offsety":0,"rot":0,"scalex":50,"scaley":50,"src":"../vwfDataManager.svc/texture?UID=waternormal.jpg"}],"metal":false,"reflect":5.2,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"owner":"ADLteam","renderDepth":1,"transform":[0.5,-0.866025984287262,0,0,0.8660249710083008,0.5,0,0,0,0,1,0,0,0,20.25,1],"type":"Primitive","width":1000},"random":{"c":1,"s0":0.328179,"s1":0.047833,"s2":0.328243},"sequence":0,"source":"vwf/model/threejs/plane.js","type":"subDriver/threejs","name":"N34af7f23"},{"children":{"N3e329d9d":{"extends":"Seek.vwf","properties":{"DisplayName":"seek1","Offset":[8,0,2],"Target":"box2-vwf-Nc5cb6be","owner":"ADLteam","strength":0.3,"type":"behavior"},"random":{"c":1,"s0":0.127052,"s1":0.514706,"s2":0.823928},"sequence":0,"name":"N3e329d9d"}},"extends":"SandboxCamera.vwf","methods":{"tick":{"body":"        var node = this.Scene.findNodeByID(this.objectToLookAt);\n    var pos = [0, 0, 0];\n    if (node)\n        pos = node.transformAPI.localToGlobal([0, 0, 0]);\n    var offset = this.offset;\n    offset = MATH.scaleVec3(offset, this.zoom);\n\n    this.transformAPI.lookat(pos, '', '-Y', 'Z');        ","parameters":[]}},"properties":{"DisplayName":"LookatCamera","EditorData":{"Target":{"displayname":"Target","property":"objectToLookAt","type":"nodeid"}},"last_x":0,"last_y":0,"mousedown":0,"objectToLookAt":"box2-vwf-Nc5cb6be","offset":[1,0,0],"owner":"ADLteam","quaternion":[-0.168121,0.013128,-0.076735,0.982687],"rotation":[-0.907434,0.070859,-0.414178,21.353824],"scale":[1,0.998998,0.999],"transform":[0.9822478890419006,0.18758542835712433,7.051362160837016e-8,0,-0.18156394362449646,0.9507178664207458,-0.247330904006958,0,-0.04639559984207153,0.24293950200080872,0.9678964018821716,0,42.397239685058594,-67.00320434570312,22.711191177368164,1],"translation":[-4.978086,-9.806168,1.459538],"zoom":1},"random":{"c":1,"s0":0.762165,"s1":0.779216,"s2":0.235236},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"N373ec60b"},{"children":{"N15586c73":{"children":{"N94f3b0c9":{"extends":"SandboxCamera.vwf","properties":{"DisplayName":"Camera1","owner":"ADLteam","transform":[-1.0000009536743164,0,-9.999999974752427e-7,0,0,0.08715499937534332,0.9961940050125122,0,-9.999999974752427e-7,0.9961940050125122,-0.08715599775314331,0,24.5,15.553004264831543,5.666027069091797,1]},"random":{"c":1,"s0":0.041035,"s1":0.718352,"s2":0.528338},"sequence":0,"source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","name":"N94f3b0c9"}},"extends":"asset.vwf","properties":{"DisplayName":"Barry1","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":[{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong"},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1}],"owner":"ADLteam","transform":[1,0,0,0,0,0,1,0,0,-1,0,0,0.25,-1.5,-0.75,1],"type":"3DR Object"},"random":{"c":1,"s0":0.529011,"s1":0.196021,"s2":0.923128},"sequence":0,"source":"./vwfdatamanager.svc/3drdownload?pid=adl:1588","type":"subDriver/threejs/asset/vnd.osgjs+json+compressed","name":"N15586c73"}},"extends":"box2.vwf","methods":{"tick":{"body":"                    var waterDepth = 20;\n    var hullThick = 2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 2;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n           \n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n        //this.physicsAPI.addForceAtCenter(this.transformAPI.localToGlobal(0, 100, 0));\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 10;\n        vel[1] *= 1.0 - depth / 3;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }                    ","parameters":[]}},"properties":{"DisplayName":"box2","___physics_activation_state":4,"___physics_angular_velocity":[0.0067684168103513,0.00232219359937594,0.00000300311251272397],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-5.51645837632456e-10,2.28675722473472e-8,-0.00000146451189718221],"___physics_mass":80051.2,"___physics_velocity_angular":[0.008379931561648846,-0.002338845981284976,0.000013828842384100426],"___physics_velocity_linear":[0.0000014165404991217656,-0.00012891086225863546,-0.0032490950543433428],"_length":135,"counter":14602,"height":10,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"ADLteam","physicsAPI":{},"transform":[0.9999997019767761,0.0000190751798072597,0.0007725547184236348,0,-0.00000929956695472356,0.9999199509620667,-0.012651646509766579,0,-0.000772734172642231,0.012651635333895683,0.9999196529388428,0,35.97203063964844,18.466352462768555,20.418537139892578,1],"type":"Primitive","visible":false,"width":20},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N8524199"},{"extends":"SandboxParticleSystem.vwf","methods":{"tick":{"body":" // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    try{\n    this.emitterPosition = this.Scene.children_by_name.box4.children_by_name.enginePos.transformAPI.getWorldPosition();\n    findviewnode(this.id).children[0].children[0].frustumCulled = false\n    }catch(e)\n    {\n    } ","parameters":[]}},"properties":{"DisplayName":"Wake","alphaTest":0,"colorRange":[0,0,0.231372,0],"damping":-0.01,"depthTest":false,"emitterPosition":[41.4999923706055,-62.0858726501465,19.9328174591064],"emitterSize":[1,1,0.4],"emitterType":"box","endAlpha":0.24,"endColor":[0.741176,0.854901,0.988235,0.24],"endColor_noAplha":[0.741176,0.854901,0.988235],"endSize":3,"gravity":-0.02,"image":"../vwfDataManager.svc/texture?UID=smoke.png","mamSpin":2.6,"maxOrientation":19.6,"maxVelocity":[0.01,0.01,0.01],"minOrientation":-14.8,"minSpin":-3.8,"minVelocity":[-0.011,-0.01,-0.01],"owner":"ADLteam","renderDepth":-3,"rotation":{"_order":"XYZ","_x":0,"_y":0,"_z":0},"sizeRange":0.62,"solver":"Analytic","startAlpha":0.98,"startColor":[1,1,1,0.98],"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"type":"ParticleSystem"},"random":{"c":1,"s0":0.337756,"s1":0.105646,"s2":0.018279},"sequence":0,"name":"N991d8a3"},{"children":{"N16f23ee5":{"extends":"http://vwf.example.com/node3.vwf","properties":{"DisplayName":"enginePos","glyphURL":"../vwf/view/editorview/images/icons/sphere.png","owner":"ADLteam","transform":[1,0,0,0,0,1,0,0,-9.999999974752427e-7,0,1,0,3,0,-0.75,1],"transformAPI":{"COORDINATES":{"GLOBAL":"global","LOCAL":"local","PARENT":"parent"}},"worldTransform":[0.18804042041301727,-0.9821426272392273,0.006052142940461636,0,0.98142409324646,0.18813441693782806,0.03757866099476814,0,-0.03804640844464302,-0.0011256062425673008,0.9992753267288208,0,41.50437927246094,-62.07962417602539,19.93284797668457,1]},"random":{"c":1,"s0":0.022454,"s1":0.002702,"s2":0.55584},"sequence":0,"name":"N16f23ee5"},"N1f0f830f":{"extends":"box2.vwf","properties":{"DisplayName":"box7","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"_length":3.45,"castShadows":false,"height":1.13,"materialDef":{"alpha":0,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.577350269189626,"g":0.577350269189626,"r":0.577350269189626},"specularLevel":1,"type":"phong"},"owner":"ADLteam","renderDepth":7,"transform":[1,0,9.999999974752427e-7,0,0,1,0,0,0,0,1,0,1,0,-0.2499990016222,1],"type":"Primitive","width":2.18},"random":{"c":1,"s0":0.198099663946778,"s1":0.0275812551844865,"s2":0.352169041289017},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N1f0f830f"},"N36848c63":{"events":{"pointerClick":{"body":"                                this.parent.launchMissile()","parameters":["                                eventData","                                nodeData                                "]}},"extends":"box2.vwf","properties":{"DisplayName":"MissileLauncher","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"height":1.61,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"ADLteam","transform":[0.08618500083684921,-0.022557999938726425,0.9960219860076904,0,0.0010019999463111162,-0.9997419714927673,-0.02273000031709671,0,0.9962769746780396,0.002956999931484461,-0.08614099770784378,0,1,0,1.5,1],"type":"Primitive","visible":false,"width":1.36},"random":{"c":1,"s0":0.778299,"s1":0.286493,"s2":0.191579},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"N36848c63"},"Ndef1df6a":{"extends":"asset.vwf","properties":{"DisplayName":"./vwfdatamanager.svc/DataFile/Navy/AttackSpeedBoat.dae1","___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_angular":[0,0,0],"___physics_velocity_linear":[0,0,0],"materialDef":{"alpha":1,"ambient":{"b":0.584,"g":0.584,"r":0.584},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"/sas/assets/7e6084c4"}],"reflect":0.001,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong"},"owner":"ADLteam","transform":[-9.999999974752427e-7,1,-9.999999974752427e-7,0,-1.0000009536743164,-9.999999974752427e-7,-9.999999974752427e-7,0,-9.999999974752427e-7,0,1,0,0.5,0,-0.5,1]},"random":{"c":1,"s0":0.375302,"s1":0.872168,"s2":0.110384},"sequence":0,"source":"/sas/assets/c1064312","type":"subDriver/threejs/asset/vnd.collada+xml","name":"Ndef1df6a"}},"extends":"box2.vwf","methods":{"_keyDown":{"body":"                                // if (this.Scene.clientAPI.getCameraForClient(vwf.client()).id != this.controllingCamera) return;\n    if (this._keysDown.indexOf(e.key.char) == -1)\n    {\n        this._keysDown.push(e.key.char);\n    }                                ","parameters":["e","d"]},"_keyUp":{"body":"                                // if (this.Scene.clientAPI.getCameraForClient(vwf.client()).id != this.controllingCamera) return;\n    if (this._keysDown.indexOf(e.key.char) !== -1)\n    {\n        this._keysDown.splice(this._keysDown.indexOf(e.key.char), 1);\n    }\n    if(e.key.char == \" \")\n    {\n        this.launchMissile();   \n    }                                ","parameters":["e","d"]},"hit":{"body":"             if(typeof force == 'number')\n        this.health -= force;\n    else\n        this.health -= 101;\n    \n    if (this.health < 0)\n    {\n        var def = this.explosionDef.internal_val;\n        var pos = this.transformAPI.getWorldPosition();\n        def.properties.transform[12] = pos[0];\n        def.properties.transform[13] = pos[1];\n        def.properties.transform[14] = pos[2];\n        def.properties.fuse = 1;\n        vwf.createChild(vwf.application(), GUID(), _DataManager.getCleanNodePrototype(def), null);\n        this.parent.children.delete(this);\n    }             ","parameters":["pos","force"]},"launchMissile":{"body":"   var def = this.missileDef.internal_val;\n    var pos = this.children_by_name.MissileLauncher.worldTransform.internal_val.slice();\n\n    pos[14] += 0;\n    def.properties.transform = pos;\n    def.properties.___physics_velocity_linear = this.physicsAPI.getLinearVelocity();\n    def.properties.fired = true;\n    var now = performance.now();\n    // console.profile(\"launch\");\n    vwf.createChild(vwf.application(), GUID(), _DataManager.getCleanNodePrototype(def), null, function()\n    {\n        console.log(performance.now() - now);\n        //   console.profileEnd(\"launch\");\n    });\n    this.audioAPI.playSound(\"/sas/assets/4334801b\", false, 100);   ","parameters":[]},"ready":{"body":"                                         // The scene is now completely loaded. This will fire on each client when the client joins, so it`s not a great place to create objects\n    this.Scene.unbind(\"keyDown\",this._kd);\n    this.Scene.unbind(\"keyUp\",this._ku);\n    var self = this;\n    this._kd = function(e,d){self._keyDown(e,d)};\n    this._ku = function(e,d){self._keyUp(e,d)};\n    this.Scene.bind(\"keyDown\",this._kd);\n    this.Scene.bind(\"keyUp\",this._ku);                                         ","parameters":[]},"tick":{"body":"                                        var waterDepth = 20;\n    var hullThick = 2.2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 5;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 100;\n        vel[1] *= 1.0 - depth / 30;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }\n\n    if (this._keysDown.indexOf(\"W\") !== -1)\n    {\n        var force = this.transformAPI.localToGlobal(-10 * mass, 0, 0);\n        this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n    }\n    if (this._keysDown.indexOf(\"S\") !== -1)\n    {\n        var force = this.transformAPI.localToGlobal(10 * mass, 0, 0);\n        this.physicsAPI.addForceAtCenter(force[0], force[1], force[2]);\n    }\n    var vel = this.physicsAPI.getLinearVelocity();\n    vel = this.transformAPI.globalToLocalRotation(vel);\n    var speedTorqueFactor = (Math.abs(vel[0])/3);\n    if (this._keysDown.indexOf(\"A\") !== -1)\n    {\n\n        this.physicsAPI.addTorque(0, 0, speedTorqueFactor * mass * 3);\n        var force = this.transformAPI.localToGlobal(speedTorqueFactor * mass, 0, 0);\n        this.physicsAPI.addTorque(force);\n    }\n    if (this._keysDown.indexOf(\"D\") !== -1)\n    {\n        this.physicsAPI.addTorque(0, 0, -speedTorqueFactor * mass * 3);\n        var force = this.transformAPI.localToGlobal(-speedTorqueFactor * mass, 0, 0);\n        this.physicsAPI.addTorque(force);\n    }                                        ","parameters":[]}},"properties":{"DisplayName":"box4","EditorData":{"controllingCamera":{"displayname":"Controlling Camera","property":"controllingCamera","type":"nodeid"}},"___physics_activation_state":4,"___physics_angular_velocity":[-0.0205620388669852,0.137373529226051,0.000692897715996474],"___physics_damping":0.4,"___physics_deactivation_time":0,"___physics_enabled":true,"___physics_linear_velocity":[-0.115731220145219,0.602527779520543,-0.000487978426872444],"___physics_mass":8051.2,"___physics_velocity_angular":[0.02765009179711342,-0.1445750892162323,0.00038580354885198176],"___physics_velocity_linear":[-0.01912243291735649,0.10449027270078659,-0.0032515337225049734],"_keysDown":[],"_length":7,"controllingCamera":"SandboxCamera-vwf-N373ec60b","counter":14602,"editorData":{"controllingCamera":{"displayName":"controllingCamera","type":"nodeID"}},"explosionDef":{"continues":"./vwfdatamanager.svc/datafile/vwf/fragmentRound.vwf.json","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"health":100,"height":1.2,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"a":1,"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"metal":false,"reflect":0.8,"shadeless":false,"shading":true,"shadow":true,"shininess":15,"side":0,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false},"missileDef":{"continues":"./vwfdatamanager.svc/datafile/vwf/missile.vwf.json","properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},"owner":"ADLteam","physicsAPI":{},"transform":[0.18804042041301727,-0.9821426272392273,0.006052142940461636,0,0.98142409324646,0.18813441693782806,0.03757866099476814,0,-0.0380462221801281,-0.0011265884386375546,0.9992753267288208,0,40.91172409057617,-59.13404083251953,20.664148330688477,1],"type":"Primitive","visible":false,"width":2.5},"random":{"c":1,"s0":0.134394,"s1":0.921757,"s2":0.045269},"sequence":0,"source":"vwf/model/threejs/box.js","type":"subDriver/threejs","name":"Nc5cb6be"},{"DisplayName":null,"glyphURL":"../vwf/view/editorview/images/icons/scene.png","simTime":14602,"placemarks":{"Origin":[0,0,0]},"navmode":"none","sunColor":[1,1,1],"sunDirection":[0.5,0.5,1],"sunIntensity":0.8,"shadowDarkness":0.5,"ambientColor":[0.35,0.35,0.35],"fogColor":[1,1,1],"fogNear":100,"fogFar":1000,"fogType":0,"fogDensity":0.005,"fogVFalloff":1.3,"fogVFalloffStart":0,"skyColorBlend":0,"skyFogBlend":0,"skyApexColor":[0.9,0.9,0.9],"skyHorizonColor":[0.8,0.8,0.8],"___physics_gravity":[0,0,-9.8],"___physics_accuracy":10,"___physics_active":true,"vAtmosphereDensity":0.0005,"playMode":"stop","octreeObjects":5,"octreeDepth":16,"octreeExtents":640,"materialDef":{"shininess":15,"alpha":1,"ambient":{"r":0.8,"g":0.8,"b":0.8},"color":{"r":1,"g":1,"b":1,"a":1},"emit":{"r":0,"g":0,"b":0},"reflect":0.8,"shadeless":false,"shadow":true,"specularColor":{"r":0.5773502691896258,"g":0.5773502691896258,"b":0.5773502691896258},"specularLevel":1,"wireframe":true,"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0.11,"offsety":0.11,"rot":0,"scalex":27.77777777777778,"scaley":27.77777777777778,"src":"textures/grid2.gif"}],"type":"phong","metal":false,"combine":0,"depthtest":true,"depthwrite":true},"skyTexture":"StormClouds","owner":"ADLteam","type":"scene"}]