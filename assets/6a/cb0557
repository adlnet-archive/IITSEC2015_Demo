{
	"extends": "http://vwf.example.com/node3.vwf",
	"sequence": 0,
	"random": {
		"s0": 0.2935250839218497,
		"s1": 0.8833305018488318,
		"s2": 0.4025755792390555,
		"c": 1
	},
	"properties": {
		"glyphURL": "../vwf/view/editorview/images/icons/sphere.png",
		"transform": [
			1,
			0,
			0,
			0,
			0,
			1,
			0,
			0,
			0,
			0,
			1,
			0,
			-1.1456044912338257,
			1.1538125276565552,
			0.01774579845368862,
			1
		],
		"owner": "ADLteam",
		"DisplayName": "xAPISender",
		"baseURL": "https://sandbox.adlnet.gov/",
		"EditorData": {
			"baseURL": {
				"displayname": "Base URL",
				"property": "baseURL",
				"type": "text"
			}
		},
		"___sourceAssetTimestamp": "Wed Oct 28 2015 16:54:18 GMT-0400 (Eastern Daylight Time)",
		"sourceAssetId": "6acb0557"
	},
	"methods": {
		"senderSnippet": {
			"body": "/*Generic code for sending xAPI statements from demo*/\n\n    var sender = this.Scene.children_by_name.xAPISender;\n    if (sender)\n    {\n        sender.xAPISend(\"verb\", \"object\", \"role\", null /*context object*/ );\n    }\n\n    /**/",
			"parameters": []
		},
		"xAPISend": {
			"body": "//xAPISend in the xAPISender entity\r\n    //Sends an xAPI sttement for tracking in an lrs\r\n    //Accepts:\r\n    //verbage - verb / action\r\n    //obj - object\r\n    //role - role assumed in the simulation\r\n    //res - object to be appended as result\r\n    // {\r\n    //  \"score\": { \"scaled\": float, \"raw\": int, \"min\": int, \"max\": int },\r\n    //  \"success\": boolean,\r\n    //  \"completion\": boolean,\r\n    //  \"response\": string,\r\n    //  \"duration\": ISO 8601 duration\r\n    //  \"extensions\": { \"key must be valid URI\": value (any JSON type)}\r\n    // }\r\n    //Returns:\r\n    //contructs and sends an xapi statement to an lrs\r\n\r\n    console.log(role + \" xAPI Send\");\r\n\r\n    //1 - Registration for the run of this game\r\n    if (!this.Scene.attempt)\r\n    {\r\n        this.Scene.attempt = ADL.ruuid();\r\n    }\r\n\r\n    //2 - Wrapper setup\r\n    var conf = {\r\n        // \"endpoint\": \"https://lrs.adlnet.gov/xapi/\",\r\n        \"endpoint\": \"https://40.129.74.197/xapi/\",\r\n        \"auth\": \"Basic \" + toBase64('iitsecDemo:1234'),\r\n    };\r\n    this.Scene.___xAPI.configure(conf);\r\n\r\n    //3 - Who is playing\r\n    var actor = {\r\n        account:\r\n        {\r\n            name: _UserManager.GetCurrentUserName(),\r\n            homePage: this.baseURL, //\"https://sandbox.adlnet.gov/\",\r\n        },\r\n        name: _UserManager.GetCurrentUserName(),\r\n    };\r\n\r\n    //4 - Verb = did\r\n    var v = encodeURI(verbage);\r\n    var verb = {\r\n        id: this.baseURL + \"verbs/\" + v,\r\n        display:\r\n        {\r\n            \"en-US\": v || \"default\",\r\n        }\r\n    };\r\n\r\n    //5 What happened and where\r\n    if (typeof obj === 'object')\r\n    {\r\n        obj = JSON.stringify(obj);\r\n    }\r\n    var object = {\r\n        id: this.baseURL + \"objects/\" + (encodeURI(obj) || \"object\"),\r\n    };\r\n\r\n    //6 - Additional context\r\n    var contextActivities = {\r\n        \"category\": [\r\n            {\r\n                \"id\": this.baseURL + \"event/2015/iitsecdemo\"\r\n            },\r\n            {\r\n                \"id\": this.baseURL + \"role/\" + (encodeURI(role) || \"default\")\r\n            },\r\n        ],\r\n        \"grouping\": [\r\n            {\r\n                \"id\": window.location.toString(),\r\n            },\r\n            {\r\n                \"id\": this.baseURL + \"attempt/\" + this.Scene.attempt\r\n            },\r\n        ],\r\n        \"other\": [\r\n            {\r\n                \"id\": _DataManager.getCurrentApplication(),\r\n                definition:\r\n                {\r\n                    type: this.baseURL + \"world\"\r\n                }\r\n            }\r\n        ],\r\n    };\r\n\r\n    //8 - Roll it all into one statement\r\n    var stmt = new ADL.XAPIStatement(actor, verb, object);\r\n\r\n    stmt.addParentActivity(new ADL.XAPIStatement.Activity(window.location.toString(), _DataManager.getInstanceData().title, _DataManager.getInstanceData.description, this.Scene.attempt));\r\n    stmt.context.contextActivities = contextActivities;\r\n    stmt.context.extensions = {\r\n        \"https://sandbox.adlnet.gov/context/extensions/scene/time/\": this.Scene.time,\r\n    };\r\n    if (res) stmt.result = res;\r\n    stmt.timestamp = new Date().toISOString();\r\n\r\n    this.Scene.___xAPI.sendStatement(null, stmt);",
			"parameters": [
				"verbage",
				"obj",
				"role",
				"res"
			]
		}
	}
}