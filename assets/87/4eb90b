{"extends":"box2.vwf","source":"vwf/model/threejs/box.js","type":"subDriver/threejs","sequence":0,"random":{"s0":0.134394,"s1":0.921757,"s2":0.045269,"c":1},"properties":{"___physics_activation_state":4,"___physics_deactivation_time":0,"___physics_velocity_linear":[0.0000014165404991217656,-0.00012891086225863546,-0.0032490950543433428],"___physics_velocity_angular":[0.008379931561648846,-0.002338845981284976,0.000013828842384100426],"DisplayName":"box2","___physics_angular_velocity":[0.0067684168103513,0.00232219359937594,0.00000300311251272397],"___physics_damping":0.4,"___physics_enabled":true,"___physics_linear_velocity":[-5.51645837632456e-10,2.28675722473472e-8,-0.00000146451189718221],"___physics_mass":80051.2,"_length":135,"counter":14602,"height":10,"materialDef":{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"a":1,"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"blendMode":0,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"rot":0,"scalex":1,"scaley":1,"src":"checker.jpg"}],"reflect":0.8,"shadeless":false,"shadow":true,"shininess":15,"specularColor":{"b":0.57735,"g":0.57735,"r":0.57735},"specularLevel":1},"owner":"ADLteam","physicsAPI":{},"transform":[0.9999997019767761,0.0000190751798072597,0.0007725547184236348,0,-0.00000929956695472356,0.9999199509620667,-0.012651646509766579,0,-0.000772734172642231,0.012651635333895683,0.9999196529388428,0,-14.84634017944336,0.44742000102996826,0.013869263231754303,1],"type":"Primitive","visible":false,"width":20,"sourceAssetId":"874eb90b"},"methods":{"tick":{"body":"                      var waterDepth = 20;\n    var hullThick = 2;\n    var depthFloor = waterDepth + hullThick;\n    // The tick function is called 20 times every second.\n    // Write code here to animate over time\n    this.physicsAPI.addForceAtCenter(0, 0, 9.8);\n    this.physicsAPI.wake();\n    var mass = this.physicsAPI.getMass();\n    var corners = [\n        [this._length / 2, this.width / 2, 0],\n        [this._length / 2, -this.width / 2, 0],\n        [-this._length / 2, this.width / 2, 0],\n        [-this._length / 2, -this.width / 2, 0],\n    ];\n\n    this.counter++;\n    var rocking = -mass / 2;\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.sin(this.counter / 30) * this._length, Math.cos(this.counter / 15) * this.width, 0]);\n    this.physicsAPI.addForceOffset([0, 0, rocking], [Math.cos(this.counter / 10) * this._length, Math.sin(this.counter / 10) * this.width, 0]);\n\n    for (var i = 0; i < corners.length; i++)\n    {\n        var corner = corners[i];\n        var worldCorner = this.transformAPI.localToGlobal(corner);\n        var depth = depthFloor - worldCorner[2];\n        depth = Math.min(depth, 5);\n        if (depth > 0)\n        {\n           \n            this.physicsAPI.addForceOffset([0, 0, depth * mass * 9.8 / 3], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n            //    vel[0] *= .6;\n            // vel[1] *= .6;\n            vel[2] *= 1 - depth / 50;\n\n            torque[0] *= 1 - depth / 100;\n            torque[1] *= 1 - depth / 100;\n            torque[2] *= 1 - depth / 100;\n            this.physicsAPI.setAngularVelocity(torque);\n            this.physicsAPI.setLinearVelocity(vel);\n        }\n        //  if (depth < 0)\n        {\n\n            this.physicsAPI.addForceOffset([0, 0, -mass * 9.8 / 4], Vec3.subtract(worldCorner, this.transformAPI.getPosition(), []));\n            var vel = this.physicsAPI.getLinearVelocity();\n            var torque = this.physicsAPI.getAngularVelocity();\n        }\n\n    }\n\n    var depth = depthFloor - this.transformAPI.getPosition()[2]\n    depth = Math.min(depth, 5);\n    if (depth > 0)\n    {\n        //this.physicsAPI.addForceAtCenter(this.transformAPI.localToGlobal(0, 100, 0));\n        var vel = this.physicsAPI.getLinearVelocity();\n        vel = this.transformAPI.globalToLocalRotation(vel);\n        vel[0] *= 1.0 - depth / 10;\n        vel[1] *= 1.0 - depth / 3;\n        vel = this.transformAPI.localToGlobalRotation(vel);\n        this.physicsAPI.setLinearVelocity(vel);\n\n    }                      ","parameters":[]}},"children":{"N5e09f750":{"extends":"asset.vwf","source":"./vwfdatamanager.svc/3drdownload?pid=adl:1588","type":"subDriver/threejs/asset/vnd.osgjs+json+compressed","sequence":0,"random":{"s0":0.529011,"s1":0.196021,"s2":0.923128,"c":1},"properties":{"___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_linear":[0,0,0],"___physics_velocity_angular":[0,0,0],"materialDef":[{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong"},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1},{"alpha":1,"ambient":{"b":1,"g":1,"r":1},"color":{"b":1,"g":1,"r":1},"emit":{"b":0,"g":0,"r":0},"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"reflect":0,"shininess":0.004002,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1}],"DisplayName":"Barry1","owner":"ADLteam","transform":[1,0,0,0,0,0,1,0,0,-1,0,0,0.25,-1.5,-0.75,1],"type":"3DR Object"},"children":{"N1912e84c":{"extends":"SandboxCamera.vwf","source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","sequence":0,"random":{"s0":0.041035,"s1":0.718352,"s2":0.528338,"c":1},"properties":{"DisplayName":"Camera1","owner":"ADLteam","transform":[-1.0000009536743164,0,-9.999999974752427e-7,0,0,0.08715499937534332,0.9961940050125122,0,-9.999999974752427e-7,0.9961940050125122,-0.08715599775314331,0,24.5,15.553004264831543,5.666027069091797,1]}},"N9f8d5c7e":{"extends":"asset.vwf","source":"rails","type":"link_existing/threejs","sequence":0,"random":{"s0":0.5605327761732042,"s1":0.27802790026180446,"s2":0.10562265035696328,"c":1},"properties":{"___physics_activation_state":1,"___physics_deactivation_time":0,"___physics_velocity_linear":[0,0,0],"___physics_velocity_angular":[0,0,0],"type":"3DR Object","DisplayName":"rails","transform":[1,0,0,0,0,-1,0,0,0,0,-1,0,0.0000019999999949504854,0.000004999999873689376,0,1],"materialDef":{"alpha":0.98,"ambient":{"b":1,"g":1,"r":1},"blendMode":1,"color":{"b":1,"g":1,"r":1},"depthtest":true,"depthwrite":true,"emit":{"b":0,"g":0,"r":0},"fog":true,"layers":[{"alpha":1,"mapInput":0,"mapTo":1,"offsetx":0,"offsety":0,"scalex":1,"scaley":1,"src":"./vwfdatamanager.svc/3drtexture?pid=adl:1588&file=barryatlas.png"}],"metal":false,"reflect":0,"shading":true,"shininess":0.0004022,"side":0,"specularColor":{"b":0,"g":0,"r":0},"specularLevel":1,"type":"phong","vertexColors":false,"wireframe":false}}}}}}}