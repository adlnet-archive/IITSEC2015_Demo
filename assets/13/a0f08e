{"extends":"SandboxCamera.vwf","source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","sequence":0,"random":{"s0":0.252087571425363,"s1":0.732919854577631,"s2":0.607417270774022,"c":1},"properties":{"DisplayName":"OOD","owner":"ADLteam","transform":[-0.9999650120735168,0.008154707960784435,0.001855730079114437,0,-0.008363192901015282,-0.9750370383262634,-0.22188477218151093,0,0,-0.22189253568649292,0.975071132183075,0,-2.901139259338379,0.8558543920516968,0.009999999776482582,1],"___assetServerOriginalID":"Na138c25e","sourceAssetId":"13a0f08e","last_x":0,"last_y":0,"movement":[0,0,0],"zoom":"","mouseDown":0,"mousedown":0,"offset":[1,0,0]},"methods":{"deinitialize":{"body":"    this.Scene.unbind('pointerMove', this.mousemove);\n    this.Scene.unbind('pointerDown', this.mousepress);\n    this.Scene.unbind('pointerUp', this.mouseup);\n    this.Scene.unbind('pointerWheel', this.mousewheel);\n    this.Scene.unbind('keyDown', this.keydown);\n    this.Scene.unbind('keyUp', this.keyup);    ","parameters":[]},"ready":{"body":"    this.Scene.unbind('pointerMove', this.mousemove);\n    this.Scene.unbind('pointerDown', this.mousepress);\n    this.Scene.unbind('pointerUp', this.mouseup);\n    this.Scene.unbind('pointerWheel', this.mousewheel);\n    this.Scene.unbind('keyDown', this.keydown);\n    this.Scene.unbind('keyUp', this.keyup);\n    var self = this;\n    this.mousemove = function(e, d)\n    {\n\n        var rel_x = self.last_x - e.position[0];\n        var rel_y = self.last_y - e.position[1];\n        self.rotateCam(rel_x * 3, rel_y * 3);\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mousewheel = function(e, d)\n    {\n        self.zoom += e.wheelDelta;\n    }\n    this.mousepress = function(e, d)\n    {\n\n        self.mousedown = true;\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mouseup = function(e, d)\n    {\n        self.mousedown = false;\n    }\n    this.keydown = function(e, d)\n    {\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement.internal_val, [0, 1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement.internal_val, [0, -1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement.internal_val, [1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement.internal_val, [-1, 0, 0], []);\n    }\n    this.keyup = function(e, d)\n    {\n        console.log(e);\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement.internal_val, [0, -1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement.internal_val, [0, 1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement.internal_val, [-1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement.internal_val, [1, 0, 0], []);\n    }\n\n    this.Scene.bind('pointerMove', this.mousemove);\n    this.Scene.bind('pointerDown', this.mousepress);\n    this.Scene.bind('pointerUp', this.mouseup);\n    this.Scene.bind('pointerWheel', this.mousewheel);\n    this.Scene.bind('keyDown', this.keydown);\n    this.Scene.bind('keyUp', this.keyup);    ","parameters":[]},"rotateCam":{"body":"    var xrot = Quaternion.fromAngleAxis(rel_x, [0, 0, 1], []);\n    var offset = this.offset.internal_val;\n    offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(xrot, []), offset, []);\n\n    var side = Vec3.cross(offset, [0, 0, 1], []);\n    var yrot = Quaternion.fromAngleAxis(rel_y, side, []);\n    offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(yrot, []), offset, []);\n    this.offset = offset;    ","parameters":["rel_x","rel_y"]},"tick":{"body":"    var pos = Vec3.add(this.transformAPI.getPosition(), this.offset.internal_val, []);\n\n    //this.transformAPI.setPosition(MATH.addVec3(pos, offset));\n    this.transformAPI.lookat(pos, '', '-Y', 'Z');\n    var movement = this.movement.internal_val;\n    movement = this.transformAPI.localToGlobalRotation(movement);\n    movement[2] = 0;\n    movement = Vec3.normalize(movement, []);\n    this.transformAPI.move(movement[0] / 10, movement[1] / 10, 0);    ","parameters":[]}},"children":{"N70033554":{"continues":"/sas/assets/546b7d66","properties":{"___assetServerOriginalID":"N70033554","visibleToCamera":"SandboxCamera-vwf-N114c4dd8"},"children":{"-sas-assets-546b7d66-Ndef5eb17N5111c16a":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17N5111c16a"}},"-sas-assets-546b7d66-Ndef5eb17N58f296e0":{"children":{"-sas-assets-546b7d66-Ndef5eb17N35c0d585":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17N35c0d585"}}},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17N58f296e0"}},"-sas-assets-546b7d66-Ndef5eb17N6444e6eb":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17N6444e6eb"}},"-sas-assets-546b7d66-Ndef5eb17N762225da":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17N762225da"}},"-sas-assets-546b7d66-Ndef5eb17N7dbb5d5b":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17N7dbb5d5b"}},"-sas-assets-546b7d66-Ndef5eb17Ne63ee92c":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17Ne63ee92c"}},"-sas-assets-546b7d66-Ndef5eb17Ne73b9040":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17Ne73b9040"}},"-sas-assets-546b7d66-Ndef5eb17Nef06867c":{"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-Ndef5eb17Nef06867c"}},"-sas-assets-546b7d66-N70033554N5111c16a":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.3930771751329303,"s1":0.4313182334881276,"s2":0.5514309389982373,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554N5111c16a"}},"-sas-assets-546b7d66-N70033554N58f296e0":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.9661465331446379,"s1":0.7089963310863823,"s2":0.19323216774500906,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554N58f296e0"},"children":{"-sas-assets-546b7d66-N70033554N35c0d585":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.6261400065850466,"s1":0.8073666284326464,"s2":0.014533743727952242,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554N35c0d585"}}}},"-sas-assets-546b7d66-N70033554N6444e6eb":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.6551445482764393,"s1":0.4965678043663502,"s2":0.9258301525842398,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554N6444e6eb"}},"-sas-assets-546b7d66-N70033554N762225da":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.03323344490490854,"s1":0.04844399727880955,"s2":0.5038123694248497,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554N762225da"}},"-sas-assets-546b7d66-N70033554N7dbb5d5b":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.23653043434023857,"s1":0.6408541309647262,"s2":0.9946431200951338,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554N7dbb5d5b"}},"-sas-assets-546b7d66-N70033554Ne63ee92c":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.8596731536090374,"s1":0.0014402854721993208,"s2":0.10778280766680837,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554Ne63ee92c"}},"-sas-assets-546b7d66-N70033554Ne73b9040":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.726288084173575,"s1":0.8239935331512243,"s2":0.9174024811945856,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554Ne73b9040"}},"-sas-assets-546b7d66-N70033554Nef06867c":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.5863746772520244,"s1":0.6492023037280887,"s2":0.16839615046046674,"c":1},"properties":{"___assetServerOriginalID":"-sas-assets-546b7d66-N70033554Nef06867c"}},"N390b8ea4":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.08356164023280144,"s1":0.18991985660977662,"s2":0.07709118258208036,"c":1},"properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,55.900001525878906,1,1],"___assetServerOriginalID":"N390b8ea4"}},"N3229eadc":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.3118294542655349,"s1":0.47852701833471656,"s2":0.9227444764692336,"c":1},"properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1.6031250953674316,4.2917351722717285,0,1],"___assetServerOriginalID":"N3229eadc"},"children":{"N2b6240a":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.4820709330961108,"s1":0.5478288850281388,"s2":0.7775873972568661,"c":1},"properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0.9497549533843994,1.5625,0,1],"___assetServerOriginalID":"N2b6240a"}}}},"N20541cb5":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.13988755433820188,"s1":0.6335537165869027,"s2":0.640753619838506,"c":1},"properties":{"___assetServerOriginalID":"N20541cb5"}},"Ndcab9b5f":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.059495433466508985,"s1":0.5283098984509706,"s2":0.6467869582120329,"c":1},"properties":{"___assetServerOriginalID":"Ndcab9b5f"}},"Nf9874cc0":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.7195216026157141,"s1":0.6023491120431572,"s2":0.2567155167926103,"c":1},"properties":{"___assetServerOriginalID":"Nf9874cc0"}},"Nbf269b71":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.47059754258953035,"s1":0.7816268661990762,"s2":0.8614914289209992,"c":1},"properties":{"___assetServerOriginalID":"Nbf269b71"}},"Ne524783b":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.2724255882203579,"s1":0.18277664855122566,"s2":0.8351644172798842,"c":1},"properties":{"___assetServerOriginalID":"Ne524783b"}},"Na64f00c":{"extends":"http://vwf.example.com/node.vwf","sequence":0,"random":{"s0":0.9105141945183277,"s1":0.73916384880431,"s2":0.6541308830492198,"c":1},"properties":{"transform":[1,0,0,0,0,1,0,0,0,0,1,0,80,28.450000762939453,1,1],"___assetServerOriginalID":"Na64f00c"}}}}}}