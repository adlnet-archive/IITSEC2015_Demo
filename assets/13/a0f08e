{
	"extends": "SandboxCamera.vwf",
	"source": "vwf/model/threejs/camera.js",
	"type": "subDriver/threejs",
	"sequence": 0,
	"random": {
		"s0": 0.252087571425363,
		"s1": 0.732919854577631,
		"s2": 0.607417270774022,
		"c": 1
	},
	"properties": {
		"DisplayName": "OOD",
		"___assetServerOriginalID": "Na138c25e",
		"last_x": 0,
		"last_y": 0,
		"mouseDown": 0,
		"mousedown": 0,
		"movement": [
			0,
			0,
			0
		],
		"offset": [
			1,
			0,
			0
		],
		"owner": "ADLteam",
		"sourceAssetId": "13a0f08e",
		"transform": [
			-0.9999650120735168,
			0.008154707960784435,
			0.001855730079114437,
			0,
			-0.008363192901015282,
			-0.9750370383262634,
			-0.22188477218151093,
			0,
			0,
			-0.22189253568649292,
			0.975071132183075,
			0,
			0.5,
			0.75,
			1.5,
			1
		],
		"worldTransform": [
			-0.9999650120735168,
			0.008154707960784435,
			0.001855730079114437,
			0,
			-0.008363192901015282,
			-0.9750370383262634,
			-0.22188477218151093,
			0,
			0,
			-0.22189253568649292,
			0.975071132183075,
			0,
			0.5,
			0.75,
			1.5,
			1
		],
		"zoom": "",
		"": null,
		"EditorData": {
			"movement": {
				"displayname": "Movement",
				"property": "movement",
				"type": "vector"
			},
			"offset": {
				"displayname": "Offset",
				"property": "offset",
				"type": "vector"
			}
		},
		"___sourceAssetTimestamp": "Tue Nov 24 2015 13:25:46 GMT-0500 (Eastern Standard Time)",
		"activeState": "idle",
		"states": {
			"idle": {
				"inFunc": null,
				"outFunc": null,
				"updateFunc": "idle"
			},
			"outRun": {
				"inFunc": null,
				"outFunc": null,
				"updateFunc": "outRun"
			},
			"targeting": {
				"inFunc": null,
				"outFunc": null,
				"updateFunc": "targeting"
			}
		},
		"far": 10000
	},
	"methods": {
		"TAOCommandRadioWarn": {
			"body": "\n\n\n   this.children_by_name.CommandDisplayLabel.visible = true;\n      this.children_by_name.CommandDisplayLabel.text = data; \n\n",
			"parameters": [
				"data"
			]
		},
		"deinitialize": {
			"body": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                     this.Scene.unbind('pointerMove', this.mousemove);\n                    this.Scene.unbind('pointerDown', this.mousepress);\n                    this.Scene.unbind('pointerUp', this.mouseup);\n                    this.Scene.unbind('pointerWheel', this.mousewheel);\n                    this.Scene.unbind('keyDown', this.keydown);\n                    this.Scene.unbind('keyUp', this.keyup);     \n\n\n\n\n\n\n\n\n",
			"parameters": []
		},
		"rotateCam": {
			"body": "\n\n\n\n\n\n\n\n\n\n\n\n\n             var xrot = Quaternion.fromAngleAxis(rel_x, [0, 0, 1], []);\n                var offset = this.offset;\n                offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(xrot, []), offset, []);\n\n                var side = Vec3.cross(offset, [0, 0, 1], []);\n                var yrot = Quaternion.fromAngleAxis(rel_y, side, []);\n                offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(yrot, []), offset, []);\n                this.offset = offset; \n\n\n\n\n\n\n",
			"parameters": [
				"rel_x",
				"rel_y"
			]
		},
		"verifyCamera": {
			"body": "var cam = this.Scene.clientAPI.getCameraForClient(vwf.client());\n\n    if (!cam || cam.id != this.id) return false;\n    return true;",
			"parameters": []
		},
		"tick": {
			"body": "if (this.userControlled())\n    {\n\n   \n    \n    var pos = Vec3.add(this.transformAPI.getPosition(), this.offset, []);\n\n    //this.transformAPI.setPosition(MATH.addVec3(pos, offset));\n    this.transformAPI.lookat(pos, '', '-Y', 'Z');\n    var movement = this.movement;\n    movement = this.transformAPI.localToGlobalRotation(movement);\n    movement[2] = 0;\n    if (MATH.lengthVec3(movement) == 0) return;\n    movement = Vec3.normalize(movement, []);\n    this.transformAPI.move(movement[0] / 10, movement[1] / 10, 0);\n         return;\n    }\n    else\n    {\n    var state = this.states[this.activeState];\n     if (state)\n    {\n        if (this[state.updateFunc])\n            this[state.updateFunc]();\n    }\n    }",
			"parameters": []
		},
		"userControlled": {
			"body": "if (this.Scene.clientAPI.getClientForCamera(this.id).length > 0)\n        return true;\n    return false;",
			"parameters": []
		},
		"activateState": {
			"body": "var oldState = this.states[this.activeState];\n    if (oldState)\n    {\n        if (oldState.outFunc && this[oldState.outFunc])\n            this[oldState.outFunc]();\n    }\n    var newState = this.states[state];\n    if (newState && this[newState.inFunc])\n        this[newState.inFunc]()\n    this.activeState = state;",
			"parameters": [
				"state"
			]
		},
		"hostileWithin": {
			"body": "for (var i = 0; i < this.Scene.children.length; i++)\n    {\n        var node = this.Scene.children[i];\n        if (node.hostile)\n        {\n            var pos = this.parent.transformAPI.getWorldPosition();\n            var hostilePos = node.transformAPI.getWorldPosition();\n            if (Vec3.distance(pos, hostilePos) < meters)\n                return true;\n        }\n    }\n    return false;",
			"parameters": [
				"meters"
			]
		},
		"idle": {
			"body": "if (this.hostileWithin(1000))\n    {\n        \n        this.activateState(\"outRun\");\n    }",
			"parameters": []
		},
		"outRun": {
			"body": "this.broadcast(\"command\", [\"aheadFull\"], 0);\n    this.broadcast(\"command\", [\"rudderCenter\"], 0);\n    if (this.hostileWithin(500))\n    {\n\n        this.activateState(\"targeting\");\n    }",
			"parameters": []
		},
		"targeting": {
			"body": "this.broadcast(\"command\", [\"aheadHalf\"], 0);\n    this.broadcast(\"command\", [\"hardRight\"], 0);",
			"parameters": []
		},
		"ready": {
			"body": "this.Scene.unbind('pointerMove', this.mousemove,this);\n    this.Scene.unbind('pointerDown', this.mousepress,this);\n    this.Scene.unbind('pointerUp', this.mouseup,this);\n    this.Scene.unbind('pointerWheel', this.mousewheel,this);\n    this.Scene.unbind('keyDown', this.keydown,this);\n    this.Scene.unbind('keyUp', this.keyup,this);\n    var self = this;\n    this.mousemove = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        var rel_x = self.last_x - e.position[0];\n        var rel_y = self.last_y - e.position[1];\n        self.rotateCam(rel_x * 3, rel_y * 3);\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mousewheel = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        self.zoom += e.wheelDelta;\n    }\n    this.mousepress = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        self.mousedown = true;\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mouseup = function(e, d)\n    {\n        if (!self.verifyCamera()) return;\n        self.mousedown = false;\n    }\n    this.keydown = function(e, d)\n    {\n        return;\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement, [0, 1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement, [0, -1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement, [1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement, [-1, 0, 0], []);\n    }\n    this.keyup = function(e, d)\n    {\n        return;\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement, [0, -1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement, [0, 1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement, [-1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement, [1, 0, 0], []);\n    }\n\n    this.Scene.bind('pointerMove', this.mousemove,this);\n    this.Scene.bind('pointerDown', this.mousepress,this);\n    this.Scene.bind('pointerUp', this.mouseup,this);\n    this.Scene.bind('pointerWheel', this.mousewheel,this);\n    this.Scene.bind('keyDown', this.keydown,this);\n    this.Scene.bind('keyUp', this.keyup,this);",
			"parameters": []
		}
	},
	"children": {
		"N70033554": {
			"continues": "/sas/assets/546b7d66",
			"properties": {
				"transform": [
					1,
					0,
					0,
					0,
					0,
					1,
					0,
					0,
					0,
					0,
					1,
					0,
					2.14814814814815,
					3.31957547169811,
					0.574596977233888,
					1
				],
				"___assetServerOriginalID": "N70033554",
				"visibleToCamera": "",
				"visibleToAncestor": true
			},
			"children": {
				"-sas-assets-546b7d66-Nd6c2559fN5111c16a": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fN5111c16a"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fN58f296e0": {
					"children": {
						"-sas-assets-546b7d66-Nd6c2559fN35c0d585": {
							"properties": {
								"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fN35c0d585"
							}
						}
					},
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fN58f296e0"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fN6444e6eb": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fN6444e6eb"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fN762225da": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fN762225da"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fN7dbb5d5b": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fN7dbb5d5b"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fNe63ee92c": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fNe63ee92c"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fNe73b9040": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fNe73b9040"
					}
				},
				"-sas-assets-546b7d66-Nd6c2559fNef06867c": {
					"properties": {
						"___assetServerOriginalID": "-sas-assets-546b7d66-Nd6c2559fNef06867c"
					}
				},
				"Na64f00c": {
					"extends": "http://vwf.example.com/node.vwf",
					"sequence": 0,
					"random": {
						"s0": 0.910514194518328,
						"s1": 0.73916384880431,
						"s2": 0.65413088304922,
						"c": 1
					},
					"properties": {
						"___assetServerOriginalID": "Na64f00c",
						"transform": [
							1,
							0,
							0,
							0,
							0,
							1,
							0,
							0,
							0,
							0,
							1,
							0,
							80,
							28.4500007629395,
							1,
							1
						]
					}
				},
				"N390b8ea4": {
					"extends": "http://vwf.example.com/node.vwf",
					"sequence": 0,
					"random": {
						"s0": 0.0835616402328014,
						"s1": 0.189919856609777,
						"s2": 0.0770911825820804,
						"c": 1
					},
					"properties": {
						"___assetServerOriginalID": "N390b8ea4",
						"transform": [
							1,
							0,
							0,
							0,
							0,
							1,
							0,
							0,
							0,
							0,
							1,
							0,
							80,
							55.9000015258789,
							1,
							1
						]
					}
				},
				"N3229eadc": {
					"extends": "http://vwf.example.com/node.vwf",
					"sequence": 0,
					"random": {
						"s0": 0.311829454265535,
						"s1": 0.478527018334717,
						"s2": 0.922744476469234,
						"c": 1
					},
					"properties": {
						"___assetServerOriginalID": "N3229eadc",
						"transform": [
							1,
							0,
							0,
							0,
							0,
							1,
							0,
							0,
							0,
							0,
							1,
							0,
							1.60312509536743,
							4.29173517227173,
							0,
							1
						]
					},
					"children": {
						"N2b6240a": {
							"extends": "http://vwf.example.com/node.vwf",
							"sequence": 0,
							"random": {
								"s0": 0.482070933096111,
								"s1": 0.547828885028139,
								"s2": 0.777587397256866,
								"c": 1
							},
							"properties": {
								"___assetServerOriginalID": "N2b6240a",
								"transform": [
									1,
									0,
									0,
									0,
									0,
									1,
									0,
									0,
									0,
									0,
									1,
									0,
									0.949754953384399,
									1.5625,
									0,
									1
								]
							}
						}
					}
				}
			}
		},
		"Nc18c840f": {
			"extends": "http://vwf.example.com/label.vwf",
			"sequence": 0,
			"random": {
				"s0": 0.791792148025706,
				"s1": 0.423837883397937,
				"s2": 0.640438914997503,
				"c": 1
			},
			"properties": {
				"DisplayName": "CommandDisplayLabel",
				"font_size": 24,
				"height": 51,
				"left": 0,
				"owner": "ADLteam",
				"style": {
					"background-color": "yellow",
					"border": "outset white 3px",
					"font-weight": "bold",
					"vertical-align": "middle"
				},
				"text": "Command",
				"text_align": "center",
				"top": 0,
				"transform": [
					1,
					0,
					0,
					0,
					0,
					1,
					0,
					0,
					0,
					0,
					1,
					0,
					70.0740737915039,
					18.6756820678711,
					0,
					1
				],
				"visible": false,
				"width": 294,
				"___assetServerOriginalID": "Nc18c840f",
				"visibleToAncestor": true
			}
		},
		"N6db4971e": {
			"extends": "sphere2.vwf",
			"source": "vwf/model/threejs/sphere.js",
			"type": "subDriver/threejs",
			"sequence": 0,
			"random": {
				"s0": 0.379120192490518,
				"s1": 0.887289399048313,
				"s2": 0.743462218903005,
				"c": 1
			},
			"properties": {
				"DisplayName": "sphere1",
				"___physics_activation_state": 1,
				"___physics_deactivation_time": 0,
				"___physics_velocity_angular": [
					0,
					0,
					0
				],
				"___physics_velocity_linear": [
					0,
					0,
					0
				],
				"materialDef": {
					"alpha": 1,
					"ambient": {
						"b": 1,
						"g": 1,
						"r": 1
					},
					"blendMode": 1,
					"color": {
						"a": 1,
						"b": 1,
						"g": 1,
						"r": 1
					},
					"depthtest": true,
					"depthwrite": true,
					"emit": {
						"b": 0,
						"g": 0,
						"r": 0
					},
					"fog": true,
					"layers": [
						{
							"alpha": 1,
							"blendMode": 0,
							"mapInput": 0,
							"mapTo": 1,
							"offsetx": 0,
							"offsety": 0,
							"rot": 0,
							"scalex": 1,
							"scaley": 1,
							"src": "checker.jpg"
						}
					],
					"metal": false,
					"reflect": 0.8,
					"shadeless": false,
					"shading": true,
					"shadow": true,
					"shininess": 15,
					"side": 0,
					"specularColor": {
						"b": 0.577350269189626,
						"g": 0.577350269189626,
						"r": 0.577350269189626
					},
					"specularLevel": 1,
					"type": "phong",
					"vertexColors": false,
					"wireframe": false
				},
				"owner": "ADLteam",
				"transform": [
					-1,
					6.989336887031072e-10,
					1.6136156300028404e-10,
					0,
					-7.166012228054797e-10,
					-0.9733957052230835,
					-0.2247261106967926,
					0,
					0,
					-0.2247261106967926,
					0.9733957052230835,
					0,
					0,
					0,
					0,
					1
				],
				"type": "Primitive",
				"visible": false,
				"___assetServerOriginalID": "N6db4971e"
			}
		}
	}
}