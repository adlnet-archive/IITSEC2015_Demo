{"extends":"SandboxCamera.vwf","source":"vwf/model/threejs/camera.js","type":"subDriver/threejs","sequence":0,"random":{"s0":0.252087571425363,"s1":0.732919854577631,"s2":0.607417270774022,"c":1},"properties":{"DisplayName":"OOD","owner":"ADLteam","transform":[-0.9999650120735168,0.008154707960784435,0.001855730079114437,0,-0.008363192901015282,-0.9750370383262634,-0.22188477218151093,0,0,-0.22189253568649292,0.975071132183075,0,0.25,0.25,1.5,1],"___assetServerOriginalID":"Na138c25e","sourceAssetId":"13a0f08e","last_x":0,"last_y":0,"movement":[0,0,0],"zoom":"","mouseDown":0,"mousedown":0,"offset":[1,0,0]},"methods":{"deinitialize":{"body":"  this.Scene.unbind('pointerMove', this.mousemove);\n    this.Scene.unbind('pointerDown', this.mousepress);\n    this.Scene.unbind('pointerUp', this.mouseup);\n    this.Scene.unbind('pointerWheel', this.mousewheel);\n    this.Scene.unbind('keyDown', this.keydown);\n    this.Scene.unbind('keyUp', this.keyup);  ","parameters":[]},"ready":{"body":"  this.Scene.unbind('pointerMove', this.mousemove);\n    this.Scene.unbind('pointerDown', this.mousepress);\n    this.Scene.unbind('pointerUp', this.mouseup);\n    this.Scene.unbind('pointerWheel', this.mousewheel);\n    this.Scene.unbind('keyDown', this.keydown);\n    this.Scene.unbind('keyUp', this.keyup);\n    var self = this;\n    this.mousemove = function(e, d)\n    {\n\n        var rel_x = self.last_x - e.position[0];\n        var rel_y = self.last_y - e.position[1];\n        self.rotateCam(rel_x * 3, rel_y * 3);\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mousewheel = function(e, d)\n    {\n        self.zoom += e.wheelDelta;\n    }\n    this.mousepress = function(e, d)\n    {\n\n        self.mousedown = true;\n        self.last_x = e.position[0];\n        self.last_y = e.position[1];\n    }\n    this.mouseup = function(e, d)\n    {\n        self.mousedown = false;\n    }\n    this.keydown = function(e, d)\n    {\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement.internal_val, [0, 1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement.internal_val, [0, -1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement.internal_val, [1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement.internal_val, [-1, 0, 0], []);\n    }\n    this.keyup = function(e, d)\n    {\n        console.log(e);\n        if (e.key.key == 'W')\n            self.movement = Vec3.add(self.movement.internal_val, [0, -1, 0], []);\n        if (e.key.key == 'S')\n            self.movement = Vec3.add(self.movement.internal_val, [0, 1, 0], []);\n        if (e.key.key == 'A')\n            self.movement = Vec3.add(self.movement.internal_val, [-1, 0, 0], []);\n        if (e.key.key == 'D')\n            self.movement = Vec3.add(self.movement.internal_val, [1, 0, 0], []);\n    }\n\n    this.Scene.bind('pointerMove', this.mousemove);\n    this.Scene.bind('pointerDown', this.mousepress);\n    this.Scene.bind('pointerUp', this.mouseup);\n    this.Scene.bind('pointerWheel', this.mousewheel);\n    this.Scene.bind('keyDown', this.keydown);\n    this.Scene.bind('keyUp', this.keyup);  ","parameters":[]},"rotateCam":{"body":"  var xrot = Quaternion.fromAngleAxis(rel_x, [0, 0, 1], []);\n    var offset = this.offset.internal_val;\n    offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(xrot, []), offset, []);\n\n    var side = Vec3.cross(offset, [0, 0, 1], []);\n    var yrot = Quaternion.fromAngleAxis(rel_y, side, []);\n    offset = Mat4.multVec3NoTranslate(Quaternion.toRotationMatrix4(yrot, []), offset, []);\n    this.offset = offset;  ","parameters":["rel_x","rel_y"]},"tick":{"body":"  var pos = Vec3.add(this.transformAPI.getPosition(), this.offset.internal_val, []);\n\n    //this.transformAPI.setPosition(MATH.addVec3(pos, offset));\n    this.transformAPI.lookat(pos, '', '-Y', 'Z');\n    var movement = this.movement.internal_val;\n    movement = this.transformAPI.localToGlobalRotation(movement);\n    movement[2] = 0;\n    movement = Vec3.normalize(movement, []);\n    this.transformAPI.move(movement[0] / 10, movement[1] / 10, 0);  ","parameters":[]}},"children":{"N8a5ca10c":{"extends":"http://vwf.example.com/panel.vwf","sequence":0,"random":{"s0":0.92649619281292,"s1":0.428400575416163,"s2":0.644341029459611,"c":1},"properties":{"DisplayName":"ControlPanel","background_color":[0.56078431372549,0.549019607843137,0.549019607843137],"background_visible":true,"border_color":[1,1,1],"border_radius":6,"border_width":1,"height":112,"left":0,"owner":"ADLteam","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,1.8125,2.32691287994385,0,1],"visible":true,"width":531,"___assetServerOriginalID":"N8a5ca10c","visibleToCamera":null,"EditorData":{}},"children":{"N587c140e":{"extends":"http://vwf.example.com/panel.vwf","sequence":0,"random":{"s0":0.812594716902822,"s1":0.157300377963111,"s2":0.709430967690423,"c":1},"properties":{"DisplayName":"Panel2","background_color":[0.509803921568627,0.494117647058824,0.494117647058824],"background_visible":true,"border_color":[1,1,1],"border_radius":16,"height":91,"left":0,"owner":"ADLteam","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,4,8,0,1],"visible":true,"width":487,"___assetServerOriginalID":"N587c140e"},"children":{"N1dafb262":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"AheadFullButton","height":32,"left":0,"owner":"ADLteam","text":"Ahead Full","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"visible":true,"width":100,"___assetServerOriginalID":"N1dafb262"},"events":{"pointerClick":{"parameters":["      eventData","      nodeData      "],"body":"      this.broadcast(\"command\", [\"aheadFull\"], 0);"}}},"N92abf93c":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"RudderIdleButton","height":32,"left":0,"owner":"ADLteam","text":"Rudder Idle","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,50,0,1],"visible":true,"width":100,"___assetServerOriginalID":"N92abf93c"},"events":{"pointerClick":{"parameters":["      eventData","      nodeData      "],"body":"      this.broadcast(\"command\", [\"rudderCenter\"], 0);"}}},"Na82188bf":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"AheadHalf","height":32,"left":0,"owner":"ADLteam","text":"Ahead Half","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,25,0,0,1],"visible":true,"width":100,"___assetServerOriginalID":"Na82188bf"},"events":{"pointerClick":{"parameters":["      eventData","      nodeData      "],"body":"      this.broadcast(\"command\", [\"aheadHalf\"], 0);"}}},"N2a53749":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"RudderRightButton","height":32,"left":0,"owner":"ADLteam","text":"Rudder Right","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50,50,0,1],"visible":true,"width":100,"___assetServerOriginalID":"N2a53749"},"events":{"pointerClick":{"parameters":["        eventData","        nodeData        "],"body":"        this.broadcast(\"command\",[\"hardRight\"],0);"}}},"N2303df4b":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"BackFullButton","height":32,"left":0,"owner":"ADLteam","text":"Back","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,74.46739959716797,47.527469635009766,0,1],"visible":true,"width":100,"___assetServerOriginalID":"N2303df4b"},"events":{"pointerClick":{"parameters":["        eventData","        nodeData        "],"body":"        this.broadcast(\"command\",[\"backFull\"],0);"}}},"N7ddb3388":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"EngineIdleButton","height":32,"left":0,"owner":"ADLteam","text":"Idle","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,50,0,0,1],"visible":true,"width":100,"___assetServerOriginalID":"N7ddb3388"},"events":{"pointerClick":{"parameters":["      eventData","      nodeData      "],"body":"      this.broadcast(\"command\", [\"engineIdle\"], 0);"}}},"N7710970d":{"extends":"http://vwf.example.com/button.vwf","sequence":0,"random":{"s0":0.324383671861142,"s1":0.312827368732542,"s2":0.228529343148693,"c":1},"properties":{"DisplayName":"RudderLeftButton","height":32,"left":0,"owner":"ADLteam","text":"Rudder Left","top":0,"transform":[1,0,0,0,0,1,0,0,0,0,1,0,0,50,0,1],"visible":true,"width":100,"___assetServerOriginalID":"N7710970d"},"events":{"pointerClick":{"parameters":["        eventData","        nodeData        "],"body":"        this.broadcast(\"command\",[\"hardLeft\"],0);"}}}}}}}}}